"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const X=require("obsidian");/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Lr(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ae={},zn=[],Ht=()=>{},Ds=()=>!1,Ia=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Jr=e=>e.startsWith("onUpdate:"),st=Object.assign,qr=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Su=Object.prototype.hasOwnProperty,Pe=(e,t)=>Su.call(e,t),ke=Array.isArray,Kn=e=>Jo(e)==="[object Map]",io=e=>Jo(e)==="[object Set]",Vl=e=>Jo(e)==="[object Date]",xe=e=>typeof e=="function",Ke=e=>typeof e=="string",Kt=e=>typeof e=="symbol",Ue=e=>e!==null&&typeof e=="object",Vs=e=>(Ue(e)||xe(e))&&xe(e.then)&&xe(e.catch),js=Object.prototype.toString,Jo=e=>js.call(e),xu=e=>Jo(e).slice(8,-1),$s=e=>Jo(e)==="[object Object]",Hr=e=>Ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Do=Lr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ra=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Du=/-(\w)/g,Tt=Ra(e=>e.replace(Du,(t,n)=>n?n.toUpperCase():"")),Vu=/\B([A-Z])/g,Tn=Ra(e=>e.replace(Vu,"-$1").toLowerCase()),Ba=Ra(e=>e.charAt(0).toUpperCase()+e.slice(1)),cr=Ra(e=>e?`on${Ba(e)}`:""),St=(e,t)=>!Object.is(e,t),va=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ms=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},_a=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let jl;const Ya=()=>jl||(jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function uo(e){if(ke(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=Ke(o)?Nu(o):uo(o);if(a)for(const r in a)t[r]=a[r]}return t}else if(Ke(e)||Ue(e))return e}const ju=/;(?![^(]*\))/g,$u=/:([^]+)/,Mu=/\/\*[^]*?\*\//g;function Nu(e){const t={};return e.replace(Mu,"").split(ju).forEach(n=>{if(n){const o=n.split($u);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function $t(e){let t="";if(Ke(e))t=e;else if(ke(e))for(let n=0;n<e.length;n++){const o=$t(e[n]);o&&(t+=o+" ")}else if(Ue(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Ou="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Au=Lr(Ou);function Ns(e){return!!e||e===""}function Tu(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=qo(e[o],t[o]);return n}function qo(e,t){if(e===t)return!0;let n=Vl(e),o=Vl(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Kt(e),o=Kt(t),n||o)return e===t;if(n=ke(e),o=ke(t),n||o)return n&&o?Tu(e,t):!1;if(n=Ue(e),o=Ue(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,r=Object.keys(t).length;if(a!==r)return!1;for(const l in e){const s=e.hasOwnProperty(l),i=t.hasOwnProperty(l);if(s&&!i||!s&&i||!qo(e[l],t[l]))return!1}}return String(e)===String(t)}function zr(e,t){return e.findIndex(n=>qo(n,t))}const Os=e=>!!(e&&e.__v_isRef===!0),P=e=>Ke(e)?e:e==null?"":ke(e)||Ue(e)&&(e.toString===js||!xe(e.toString))?Os(e)?P(e.value):JSON.stringify(e,As,2):String(e),As=(e,t)=>Os(t)?As(e,t.value):Kn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],r)=>(n[fr(o,r)+" =>"]=a,n),{})}:io(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>fr(n))}:Kt(t)?fr(t):Ue(t)&&!ke(t)&&!$s(t)?String(t):t,fr=(e,t="")=>{var n;return Kt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};function Fu(e){return e==null?"initial":typeof e=="string"?e===""?" ":e:String(e)}/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ct;class Eu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ct,!t&&ct&&(this.index=(ct.scopes||(ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ct;try{return ct=this,t()}finally{ct=n}}}on(){++this._on===1&&(this.prevScope=ct,ct=this)}off(){this._on>0&&--this._on===0&&(ct=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Ts(){return ct}function Pu(e,t=!1){ct&&ct.cleanups.push(e)}let Be;const pr=new WeakSet;class Fs{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ct&&ct.active&&ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pr.has(this)&&(pr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ps(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,$l(this),Is(this);const t=Be,n=zt;Be=this,zt=!0;try{return this.fn()}finally{Rs(this),Be=t,zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Qr(t);this.deps=this.depsTail=void 0,$l(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mr(this)&&this.run()}get dirty(){return Mr(this)}}let Es=0,Vo,jo;function Ps(e,t=!1){if(e.flags|=8,t){e.next=jo,jo=e;return}e.next=Vo,Vo=e}function Kr(){Es++}function Gr(){if(--Es>0)return;if(jo){let t=jo;for(jo=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Vo;){let t=Vo;for(Vo=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Is(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Rs(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),Qr(o),Iu(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Mr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Bs(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Bs(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Eo)||(e.globalVersion=Eo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Mr(e))))return;e.flags|=2;const t=e.dep,n=Be,o=zt;Be=e,zt=!0;try{Is(e);const a=e.fn(e._value);(t.version===0||St(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Be=n,zt=o,Rs(e),e.flags&=-3}}function Qr(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)Qr(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Iu(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let zt=!0;const Ys=[];function bn(){Ys.push(zt),zt=!1}function kn(){const e=Ys.pop();zt=e===void 0?!0:e}function $l(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Be;Be=void 0;try{t()}finally{Be=n}}}let Eo=0;class Ru{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ua{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Be||!zt||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new Ru(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,Us(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=o)}return n}trigger(t){this.version++,Eo++,this.notify(t)}notify(t){Kr();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Gr()}}}function Us(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Us(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ca=new WeakMap,Bn=Symbol(""),Nr=Symbol(""),Po=Symbol("");function ft(e,t,n){if(zt&&Be){let o=Ca.get(e);o||Ca.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new Ua),a.map=o,a.key=n),a.track()}}function vn(e,t,n,o,a,r){const l=Ca.get(e);if(!l){Eo++;return}const s=i=>{i&&i.trigger()};if(Kr(),t==="clear")l.forEach(s);else{const i=ke(e),u=i&&Hr(n);if(i&&n==="length"){const d=Number(o);l.forEach((m,g)=>{(g==="length"||g===Po||!Kt(g)&&g>=d)&&s(m)})}else switch((n!==void 0||l.has(void 0))&&s(l.get(n)),u&&s(l.get(Po)),t){case"add":i?u&&s(l.get("length")):(s(l.get(Bn)),Kn(e)&&s(l.get(Nr)));break;case"delete":i||(s(l.get(Bn)),Kn(e)&&s(l.get(Nr)));break;case"set":Kn(e)&&s(l.get(Bn));break}}Gr()}function Bu(e,t){const n=Ca.get(e);return n&&n.get(t)}function Ln(e){const t=Ee(e);return t===e?t:(ft(t,"iterate",Po),Yt(e)?t:t.map(at))}function Wa(e){return ft(e=Ee(e),"iterate",Po),e}const Yu={__proto__:null,[Symbol.iterator](){return mr(this,Symbol.iterator,at)},concat(...e){return Ln(this).concat(...e.map(t=>ke(t)?Ln(t):t))},entries(){return mr(this,"entries",e=>(e[1]=at(e[1]),e))},every(e,t){return cn(this,"every",e,t,void 0,arguments)},filter(e,t){return cn(this,"filter",e,t,n=>n.map(at),arguments)},find(e,t){return cn(this,"find",e,t,at,arguments)},findIndex(e,t){return cn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return cn(this,"findLast",e,t,at,arguments)},findLastIndex(e,t){return cn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return cn(this,"forEach",e,t,void 0,arguments)},includes(...e){return vr(this,"includes",e)},indexOf(...e){return vr(this,"indexOf",e)},join(e){return Ln(this).join(e)},lastIndexOf(...e){return vr(this,"lastIndexOf",e)},map(e,t){return cn(this,"map",e,t,void 0,arguments)},pop(){return go(this,"pop")},push(...e){return go(this,"push",e)},reduce(e,...t){return Ml(this,"reduce",e,t)},reduceRight(e,...t){return Ml(this,"reduceRight",e,t)},shift(){return go(this,"shift")},some(e,t){return cn(this,"some",e,t,void 0,arguments)},splice(...e){return go(this,"splice",e)},toReversed(){return Ln(this).toReversed()},toSorted(e){return Ln(this).toSorted(e)},toSpliced(...e){return Ln(this).toSpliced(...e)},unshift(...e){return go(this,"unshift",e)},values(){return mr(this,"values",at)}};function mr(e,t,n){const o=Wa(e),a=o[t]();return o!==e&&!Yt(e)&&(a._next=a.next,a.next=()=>{const r=a._next();return r.value&&(r.value=n(r.value)),r}),a}const Uu=Array.prototype;function cn(e,t,n,o,a,r){const l=Wa(e),s=l!==e&&!Yt(e),i=l[t];if(i!==Uu[t]){const m=i.apply(e,r);return s?at(m):m}let u=n;l!==e&&(s?u=function(m,g){return n.call(this,at(m),g,e)}:n.length>2&&(u=function(m,g){return n.call(this,m,g,e)}));const d=i.call(l,u,o);return s&&a?a(d):d}function Ml(e,t,n,o){const a=Wa(e);let r=n;return a!==e&&(Yt(e)?n.length>3&&(r=function(l,s,i){return n.call(this,l,s,i,e)}):r=function(l,s,i){return n.call(this,l,at(s),i,e)}),a[t](r,...o)}function vr(e,t,n){const o=Ee(e);ft(o,"iterate",Po);const a=o[t](...n);return(a===-1||a===!1)&&tl(n[0])?(n[0]=Ee(n[0]),o[t](...n)):a}function go(e,t,n=[]){bn(),Kr();const o=Ee(e)[t].apply(e,n);return Gr(),kn(),o}const Wu=Lr("__proto__,__v_isRef,__isVue"),Ws=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Kt));function Lu(e){Kt(e)||(e=String(e));const t=Ee(this);return ft(t,"has",e),t.hasOwnProperty(e)}class Ls{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(a?r?ed:zs:r?Hs:qs).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=ke(t);if(!a){let i;if(l&&(i=Yu[n]))return i;if(n==="hasOwnProperty")return Lu}const s=Reflect.get(t,n,ce(t)?t:o);return(Kt(n)?Ws.has(n):Wu(n))||(a||ft(t,"get",n),r)?s:ce(s)?l&&Hr(n)?s:s.value:Ue(s)?a?Zr(s):_n(s):s}}class Js extends Ls{constructor(t=!1){super(!1,t)}set(t,n,o,a){let r=t[n];if(!this._isShallow){const i=An(r);if(!Yt(o)&&!An(o)&&(r=Ee(r),o=Ee(o)),!ke(t)&&ce(r)&&!ce(o))return i||(r.value=o),!0}const l=ke(t)&&Hr(n)?Number(n)<t.length:Pe(t,n),s=Reflect.set(t,n,o,ce(t)?t:a);return t===Ee(a)&&(l?St(o,r)&&vn(t,"set",n,o):vn(t,"add",n,o)),s}deleteProperty(t,n){const o=Pe(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&vn(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!Kt(n)||!Ws.has(n))&&ft(t,"has",n),o}ownKeys(t){return ft(t,"iterate",ke(t)?"length":Bn),Reflect.ownKeys(t)}}class Ju extends Ls{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const qu=new Js,Hu=new Ju,zu=new Js(!0);const Or=e=>e,ra=e=>Reflect.getPrototypeOf(e);function Ku(e,t,n){return function(...o){const a=this.__v_raw,r=Ee(a),l=Kn(r),s=e==="entries"||e===Symbol.iterator&&l,i=e==="keys"&&l,u=a[e](...o),d=n?Or:t?Sa:at;return!t&&ft(r,"iterate",i?Nr:Bn),{next(){const{value:m,done:g}=u.next();return g?{value:m,done:g}:{value:s?[d(m[0]),d(m[1])]:d(m),done:g}},[Symbol.iterator](){return this}}}}function la(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Gu(e,t){const n={get(a){const r=this.__v_raw,l=Ee(r),s=Ee(a);e||(St(a,s)&&ft(l,"get",a),ft(l,"get",s));const{has:i}=ra(l),u=t?Or:e?Sa:at;if(i.call(l,a))return u(r.get(a));if(i.call(l,s))return u(r.get(s));r!==l&&r.get(a)},get size(){const a=this.__v_raw;return!e&&ft(Ee(a),"iterate",Bn),Reflect.get(a,"size",a)},has(a){const r=this.__v_raw,l=Ee(r),s=Ee(a);return e||(St(a,s)&&ft(l,"has",a),ft(l,"has",s)),a===s?r.has(a):r.has(a)||r.has(s)},forEach(a,r){const l=this,s=l.__v_raw,i=Ee(s),u=t?Or:e?Sa:at;return!e&&ft(i,"iterate",Bn),s.forEach((d,m)=>a.call(r,u(d),u(m),l))}};return st(n,e?{add:la("add"),set:la("set"),delete:la("delete"),clear:la("clear")}:{add(a){!t&&!Yt(a)&&!An(a)&&(a=Ee(a));const r=Ee(this);return ra(r).has.call(r,a)||(r.add(a),vn(r,"add",a,a)),this},set(a,r){!t&&!Yt(r)&&!An(r)&&(r=Ee(r));const l=Ee(this),{has:s,get:i}=ra(l);let u=s.call(l,a);u||(a=Ee(a),u=s.call(l,a));const d=i.call(l,a);return l.set(a,r),u?St(r,d)&&vn(l,"set",a,r):vn(l,"add",a,r),this},delete(a){const r=Ee(this),{has:l,get:s}=ra(r);let i=l.call(r,a);i||(a=Ee(a),i=l.call(r,a)),s&&s.call(r,a);const u=r.delete(a);return i&&vn(r,"delete",a,void 0),u},clear(){const a=Ee(this),r=a.size!==0,l=a.clear();return r&&vn(a,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=Ku(a,e,t)}),n}function Xr(e,t){const n=Gu(e,t);return(o,a,r)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(Pe(n,a)&&a in o?n:o,a,r)}const Qu={get:Xr(!1,!1)},Xu={get:Xr(!1,!0)},Zu={get:Xr(!0,!1)};const qs=new WeakMap,Hs=new WeakMap,zs=new WeakMap,ed=new WeakMap;function td(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nd(e){return e.__v_skip||!Object.isExtensible(e)?0:td(xu(e))}function _n(e){return An(e)?e:el(e,!1,qu,Qu,qs)}function od(e){return el(e,!1,zu,Xu,Hs)}function Zr(e){return el(e,!0,Hu,Zu,zs)}function el(e,t,n,o,a){if(!Ue(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=nd(e);if(r===0)return e;const l=a.get(e);if(l)return l;const s=new Proxy(e,r===2?o:n);return a.set(e,s),s}function Gn(e){return An(e)?Gn(e.__v_raw):!!(e&&e.__v_isReactive)}function An(e){return!!(e&&e.__v_isReadonly)}function Yt(e){return!!(e&&e.__v_isShallow)}function tl(e){return e?!!e.__v_raw:!1}function Ee(e){const t=e&&e.__v_raw;return t?Ee(t):e}function ad(e){return!Pe(e,"__v_skip")&&Object.isExtensible(e)&&Ms(e,"__v_skip",!0),e}const at=e=>Ue(e)?_n(e):e,Sa=e=>Ue(e)?Zr(e):e;function ce(e){return e?e.__v_isRef===!0:!1}function fe(e){return Ks(e,!1)}function co(e){return Ks(e,!0)}function Ks(e,t){return ce(e)?e:new rd(e,t)}class rd{constructor(t,n){this.dep=new Ua,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ee(t),this._value=n?t:at(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Yt(t)||An(t);t=o?t:Ee(t),St(t,n)&&(this._rawValue=t,this._value=o?t:at(t),this.dep.trigger())}}function b(e){return ce(e)?e.value:e}function je(e){return xe(e)?e():b(e)}const ld={get:(e,t,n)=>t==="__v_raw"?e:b(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return ce(a)&&!ce(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Gs(e){return Gn(e)?e:new Proxy(e,ld)}class sd{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Ua,{get:o,set:a}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=a}get value(){return this._value=this._get()}set value(t){this._set(t)}}function id(e){return new sd(e)}class ud{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Bu(Ee(this._object),this._key)}}class dd{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function on(e,t,n){return ce(e)?e:xe(e)?new dd(e):Ue(e)&&arguments.length>1?cd(e,t,n):fe(e)}function cd(e,t,n){const o=e[t];return ce(o)?o:new ud(e,t,n)}class fd{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ua(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Eo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return Ps(this,!0),!0}get value(){const t=this.dep.track();return Bs(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pd(e,t,n=!1){let o,a;return xe(e)?o=e:(o=e.get,a=e.set),new fd(o,a,n)}const sa={},xa=new WeakMap;let Rn;function md(e,t=!1,n=Rn){if(n){let o=xa.get(n);o||xa.set(n,o=[]),o.push(e)}}function vd(e,t,n=Ae){const{immediate:o,deep:a,once:r,scheduler:l,augmentJob:s,call:i}=n,u=O=>a?O:Yt(O)||a===!1||a===0?hn(O,1):hn(O);let d,m,g,p,k=!1,y=!1;if(ce(e)?(m=()=>e.value,k=Yt(e)):Gn(e)?(m=()=>u(e),k=!0):ke(e)?(y=!0,k=e.some(O=>Gn(O)||Yt(O)),m=()=>e.map(O=>{if(ce(O))return O.value;if(Gn(O))return u(O);if(xe(O))return i?i(O,2):O()})):xe(e)?t?m=i?()=>i(e,2):e:m=()=>{if(g){bn();try{g()}finally{kn()}}const O=Rn;Rn=d;try{return i?i(e,3,[p]):e(p)}finally{Rn=O}}:m=Ht,t&&a){const O=m,N=a===!0?1/0:a;m=()=>hn(O(),N)}const x=Ts(),A=()=>{d.stop(),x&&x.active&&qr(x.effects,d)};if(r&&t){const O=t;t=(...N)=>{O(...N),A()}}let T=y?new Array(e.length).fill(sa):sa;const Z=O=>{if(!(!(d.flags&1)||!d.dirty&&!O))if(t){const N=d.run();if(a||k||(y?N.some((le,ie)=>St(le,T[ie])):St(N,T))){g&&g();const le=Rn;Rn=d;try{const ie=[N,T===sa?void 0:y&&T[0]===sa?[]:T,p];T=N,i?i(t,3,ie):t(...ie)}finally{Rn=le}}}else d.run()};return s&&s(Z),d=new Fs(m),d.scheduler=l?()=>l(Z,!1):Z,p=O=>md(O,!1,d),g=d.onStop=()=>{const O=xa.get(d);if(O){if(i)i(O,4);else for(const N of O)N();xa.delete(d)}},t?o?Z(!0):T=d.run():l?l(Z.bind(null,!0),!0):d.run(),A.pause=d.pause.bind(d),A.resume=d.resume.bind(d),A.stop=A,A}function hn(e,t=1/0,n){if(t<=0||!Ue(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ce(e))hn(e.value,t,n);else if(ke(e))for(let o=0;o<e.length;o++)hn(e[o],t,n);else if(io(e)||Kn(e))e.forEach(o=>{hn(o,t,n)});else if($s(e)){for(const o in e)hn(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&hn(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ho(e,t,n,o){try{return o?e(...o):e()}catch(a){La(a,t,n)}}function sn(e,t,n,o){if(xe(e)){const a=Ho(e,t,n,o);return a&&Vs(a)&&a.catch(r=>{La(r,t,n)}),a}if(ke(e)){const a=[];for(let r=0;r<e.length;r++)a.push(sn(e[r],t,n,o));return a}}function La(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Ae;if(t){let s=t.parent;const i=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;s;){const d=s.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,i,u)===!1)return}s=s.parent}if(r){bn(),Ho(r,null,10,[e,i,u]),kn();return}}hd(e,n,a,o,l)}function hd(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const gt=[];let tn=-1;const Qn=[];let jn=null,Hn=0;const Qs=Promise.resolve();let Da=null;function Nt(e){const t=Da||Qs;return e?t.then(this?e.bind(this):e):t}function gd(e){let t=tn+1,n=gt.length;for(;t<n;){const o=t+n>>>1,a=gt[o],r=Io(a);r<e||r===e&&a.flags&2?t=o+1:n=o}return t}function nl(e){if(!(e.flags&1)){const t=Io(e),n=gt[gt.length-1];!n||!(e.flags&2)&&t>=Io(n)?gt.push(e):gt.splice(gd(t),0,e),e.flags|=1,Xs()}}function Xs(){Da||(Da=Qs.then(ti))}function Zs(e){ke(e)?Qn.push(...e):jn&&e.id===-1?jn.splice(Hn+1,0,e):e.flags&1||(Qn.push(e),e.flags|=1),Xs()}function Nl(e,t,n=tn+1){for(;n<gt.length;n++){const o=gt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;gt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function ei(e){if(Qn.length){const t=[...new Set(Qn)].sort((n,o)=>Io(n)-Io(o));if(Qn.length=0,jn){jn.push(...t);return}for(jn=t,Hn=0;Hn<jn.length;Hn++){const n=jn[Hn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}jn=null,Hn=0}}const Io=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ti(e){try{for(tn=0;tn<gt.length;tn++){const t=gt[tn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ho(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;tn<gt.length;tn++){const t=gt[tn];t&&(t.flags&=-2)}tn=-1,gt.length=0,ei(),Da=null,(gt.length||Qn.length)&&ti()}}let rt=null,ni=null;function Va(e){const t=rt;return rt=e,ni=e&&e.type.__scopeId||null,t}function f(e,t=rt,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&Bl(-1);const r=Va(t);let l;try{l=e(...a)}finally{Va(r),o._d&&Bl(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function Yn(e,t){if(rt===null)return e;const n=Qa(rt),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[r,l,s,i=Ae]=t[a];r&&(xe(r)&&(r={mounted:r,updated:r}),r.deep&&hn(l),o.push({dir:r,instance:n,value:l,oldValue:void 0,arg:s,modifiers:i}))}return e}function En(e,t,n,o){const a=e.dirs,r=t&&t.dirs;for(let l=0;l<a.length;l++){const s=a[l];r&&(s.oldValue=r[l].value);let i=s.dir[o];i&&(bn(),sn(i,n,8,[e.el,s,e,t]),kn())}}const yd=Symbol("_vte"),wd=e=>e.__isTeleport,bd=Symbol("_leaveCb");function ol(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ol(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function I(e,t){return xe(e)?st({name:e.name},t,{setup:e}):e}function oi(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ai(e){const t=Ga(),n=co(null);if(t){const a=t.refs===Ae?t.refs={}:t.refs;Object.defineProperty(a,e,{enumerable:!0,get:()=>n.value,set:r=>n.value=r})}return n}function $o(e,t,n,o,a=!1){if(ke(e)){e.forEach((k,y)=>$o(k,t&&(ke(t)?t[y]:t),n,o,a));return}if(Xn(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&$o(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?Qa(o.component):o.el,l=a?null:r,{i:s,r:i}=e,u=t&&t.r,d=s.refs===Ae?s.refs={}:s.refs,m=s.setupState,g=Ee(m),p=m===Ae?Ds:k=>Pe(g,k);if(u!=null&&u!==i){if(Ke(u))d[u]=null,p(u)&&(m[u]=null);else if(ce(u)){u.value=null;const k=t;k.k&&(d[k.k]=null)}}if(xe(i))Ho(i,s,12,[l,d]);else{const k=Ke(i),y=ce(i);if(k||y){const x=()=>{if(e.f){const A=k?p(i)?m[i]:d[i]:i.value;if(a)ke(A)&&qr(A,r);else if(ke(A))A.includes(r)||A.push(r);else if(k)d[i]=[r],p(i)&&(m[i]=d[i]);else{const T=[r];i.value=T,e.k&&(d[e.k]=T)}}else k?(d[i]=l,p(i)&&(m[i]=l)):y&&(i.value=l,e.k&&(d[e.k]=l))};l?(x.id=-1,Mt(x,n)):x()}}}Ya().requestIdleCallback;Ya().cancelIdleCallback;const Xn=e=>!!e.type.__asyncLoader,ri=e=>e.type.__isKeepAlive;function kd(e,t){li(e,"a",t)}function _d(e,t){li(e,"da",t)}function li(e,t,n=pt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Ja(t,o,n),n){let a=n.parent;for(;a&&a.parent;)ri(a.parent.vnode)&&Cd(o,t,n,a),a=a.parent}}function Cd(e,t,n,o){const a=Ja(t,e,o,!0);qa(()=>{qr(o[t],a)},n)}function Ja(e,t,n=pt,o=!1){if(n){const a=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...l)=>{bn();const s=Ko(n),i=sn(t,n,e,l);return s(),kn(),i});return o?a.unshift(r):a.push(r),r}}const Sn=e=>(t,n=pt)=>{(!Bo||e==="sp")&&Ja(e,(...o)=>t(...o),n)},Sd=Sn("bm"),bt=Sn("m"),si=Sn("bu"),xd=Sn("u"),al=Sn("bum"),qa=Sn("um"),Dd=Sn("sp"),Vd=Sn("rtg"),jd=Sn("rtc");function $d(e,t=pt){Ja("ec",e,t)}const ii="components";function Md(e,t){return di(ii,e,!0,t)||e}const ui=Symbol.for("v-ndc");function zo(e){return Ke(e)?di(ii,e,!1)||e:e||ui}function di(e,t,n=!0,o=!1){const a=rt||pt;if(a){const r=a.type;{const s=vc(r,!1);if(s&&(s===t||s===Tt(t)||s===Ba(Tt(t))))return r}const l=Ol(a[e]||r[e],t)||Ol(a.appContext[e],t);return!l&&o?r:l}}function Ol(e,t){return e&&(e[t]||e[Tt(t)]||e[Ba(Tt(t))])}function Ce(e,t,n,o){let a;const r=n,l=ke(e);if(l||Ke(e)){const s=l&&Gn(e);let i=!1,u=!1;s&&(i=!Yt(e),u=An(e),e=Wa(e)),a=new Array(e.length);for(let d=0,m=e.length;d<m;d++)a[d]=t(i?u?Sa(at(e[d])):at(e[d]):e[d],d,void 0,r)}else if(typeof e=="number"){a=new Array(e);for(let s=0;s<e;s++)a[s]=t(s+1,s,void 0,r)}else if(Ue(e))if(e[Symbol.iterator])a=Array.from(e,(s,i)=>t(s,i,void 0,r));else{const s=Object.keys(e);a=new Array(s.length);for(let i=0,u=s.length;i<u;i++){const d=s[i];a[i]=t(e[d],d,i,r)}}else a=[];return a}function ze(e,t,n={},o,a){if(rt.ce||rt.parent&&Xn(rt.parent)&&rt.parent.ce)return t!=="default"&&(n.name=t),v(),E(W,null,[c("slot",n,o&&o())],64);let r=e[t];r&&r._c&&(r._d=!1),v();const l=r&&ci(r(n)),s=n.key||l&&l.key,i=E(W,{key:(s&&!Kt(s)?s:`_${t}`)+(!l&&o?"_fb":"")},l||(o?o():[]),l&&e._===1?64:-2);return!a&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),r&&r._c&&(r._d=!0),i}function ci(e){return e.some(t=>sl(t)?!(t.type===Cn||t.type===W&&!ci(t.children)):!0)?e:null}const Ar=e=>e?Ni(e)?Qa(e):Ar(e.parent):null,Mo=st(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ar(e.parent),$root:e=>Ar(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>pi(e),$forceUpdate:e=>e.f||(e.f=()=>{nl(e.update)}),$nextTick:e=>e.n||(e.n=Nt.bind(e.proxy)),$watch:e=>Xd.bind(e)}),hr=(e,t)=>e!==Ae&&!e.__isScriptSetup&&Pe(e,t),Nd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:r,accessCache:l,type:s,appContext:i}=e;let u;if(t[0]!=="$"){const p=l[t];if(p!==void 0)switch(p){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return r[t]}else{if(hr(o,t))return l[t]=1,o[t];if(a!==Ae&&Pe(a,t))return l[t]=2,a[t];if((u=e.propsOptions[0])&&Pe(u,t))return l[t]=3,r[t];if(n!==Ae&&Pe(n,t))return l[t]=4,n[t];Tr&&(l[t]=0)}}const d=Mo[t];let m,g;if(d)return t==="$attrs"&&ft(e.attrs,"get",""),d(e);if((m=s.__cssModules)&&(m=m[t]))return m;if(n!==Ae&&Pe(n,t))return l[t]=4,n[t];if(g=i.config.globalProperties,Pe(g,t))return g[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:r}=e;return hr(a,t)?(a[t]=n,!0):o!==Ae&&Pe(o,t)?(o[t]=n,!0):Pe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:r,type:l}},s){let i,u;return!!(n[s]||e!==Ae&&s[0]!=="$"&&Pe(e,s)||hr(t,s)||(i=r[0])&&Pe(i,s)||Pe(o,s)||Pe(Mo,s)||Pe(a.config.globalProperties,s)||(u=l.__cssModules)&&u[s])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Pe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ja(e){return ke(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function Ut(e,t){return!e||!t?e||t:ke(e)&&ke(t)?e.concat(t):st({},ja(e),ja(t))}let Tr=!0;function Od(e){const t=pi(e),n=e.proxy,o=e.ctx;Tr=!1,t.beforeCreate&&Al(t.beforeCreate,e,"bc");const{data:a,computed:r,methods:l,watch:s,provide:i,inject:u,created:d,beforeMount:m,mounted:g,beforeUpdate:p,updated:k,activated:y,deactivated:x,beforeDestroy:A,beforeUnmount:T,destroyed:Z,unmounted:O,render:N,renderTracked:le,renderTriggered:ie,errorCaptured:L,serverPrefetch:me,expose:Le,inheritAttrs:Te,components:tt,directives:vt,filters:nt}=t;if(u&&Ad(u,o,null),l)for(const ne in l){const z=l[ne];xe(z)&&(o[ne]=z.bind(n))}if(a){const ne=a.call(n,n);Ue(ne)&&(e.data=_n(ne))}if(Tr=!0,r)for(const ne in r){const z=r[ne],oe=xe(z)?z.bind(n,n):xe(z.get)?z.get.bind(n,n):Ht,$e=!xe(z)&&xe(z.set)?z.set.bind(n):Ht,se=w({get:oe,set:$e});Object.defineProperty(o,ne,{enumerable:!0,configurable:!0,get:()=>se.value,set:D=>se.value=D})}if(s)for(const ne in s)fi(s[ne],o,n,ne);if(i){const ne=xe(i)?i.call(n):i;Reflect.ownKeys(ne).forEach(z=>{Ma(z,ne[z])})}d&&Al(d,e,"c");function ee(ne,z){ke(z)?z.forEach(oe=>ne(oe.bind(n))):z&&ne(z.bind(n))}if(ee(Sd,m),ee(bt,g),ee(si,p),ee(xd,k),ee(kd,y),ee(_d,x),ee($d,L),ee(jd,le),ee(Vd,ie),ee(al,T),ee(qa,O),ee(Dd,me),ke(Le))if(Le.length){const ne=e.exposed||(e.exposed={});Le.forEach(z=>{Object.defineProperty(ne,z,{get:()=>n[z],set:oe=>n[z]=oe,enumerable:!0})})}else e.exposed||(e.exposed={});N&&e.render===Ht&&(e.render=N),Te!=null&&(e.inheritAttrs=Te),tt&&(e.components=tt),vt&&(e.directives=vt),me&&oi(e)}function Ad(e,t,n=Ht){ke(e)&&(e=Fr(e));for(const o in e){const a=e[o];let r;Ue(a)?"default"in a?r=eo(a.from||o,a.default,!0):r=eo(a.from||o):r=eo(a),ce(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:l=>r.value=l}):t[o]=r}}function Al(e,t,n){sn(ke(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function fi(e,t,n,o){let a=o.includes(".")?xi(n,o):()=>n[o];if(Ke(e)){const r=t[e];xe(r)&&lt(a,r)}else if(xe(e))lt(a,e.bind(n));else if(Ue(e))if(ke(e))e.forEach(r=>fi(r,t,n,o));else{const r=xe(e.handler)?e.handler.bind(n):t[e.handler];xe(r)&&lt(a,r,e)}}function pi(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:r,config:{optionMergeStrategies:l}}=e.appContext,s=r.get(t);let i;return s?i=s:!a.length&&!n&&!o?i=t:(i={},a.length&&a.forEach(u=>$a(i,u,l,!0)),$a(i,t,l)),Ue(t)&&r.set(t,i),i}function $a(e,t,n,o=!1){const{mixins:a,extends:r}=t;r&&$a(e,r,n,!0),a&&a.forEach(l=>$a(e,l,n,!0));for(const l in t)if(!(o&&l==="expose")){const s=Td[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const Td={data:Tl,props:Fl,emits:Fl,methods:Co,computed:Co,beforeCreate:ht,created:ht,beforeMount:ht,mounted:ht,beforeUpdate:ht,updated:ht,beforeDestroy:ht,beforeUnmount:ht,destroyed:ht,unmounted:ht,activated:ht,deactivated:ht,errorCaptured:ht,serverPrefetch:ht,components:Co,directives:Co,watch:Ed,provide:Tl,inject:Fd};function Tl(e,t){return t?e?function(){return st(xe(e)?e.call(this,this):e,xe(t)?t.call(this,this):t)}:t:e}function Fd(e,t){return Co(Fr(e),Fr(t))}function Fr(e){if(ke(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ht(e,t){return e?[...new Set([].concat(e,t))]:t}function Co(e,t){return e?st(Object.create(null),e,t):t}function Fl(e,t){return e?ke(e)&&ke(t)?[...new Set([...e,...t])]:st(Object.create(null),ja(e),ja(t??{})):t}function Ed(e,t){if(!e)return t;if(!t)return e;const n=st(Object.create(null),e);for(const o in t)n[o]=ht(e[o],t[o]);return n}function mi(){return{app:null,config:{isNativeTag:Ds,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pd=0;function Id(e,t){return function(o,a=null){xe(o)||(o=st({},o)),a!=null&&!Ue(a)&&(a=null);const r=mi(),l=new WeakSet,s=[];let i=!1;const u=r.app={_uid:Pd++,_component:o,_props:a,_container:null,_context:r,_instance:null,version:gc,get config(){return r.config},set config(d){},use(d,...m){return l.has(d)||(d&&xe(d.install)?(l.add(d),d.install(u,...m)):xe(d)&&(l.add(d),d(u,...m))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,m){return m?(r.components[d]=m,u):r.components[d]},directive(d,m){return m?(r.directives[d]=m,u):r.directives[d]},mount(d,m,g){if(!i){const p=u._ceVNode||c(o,a);return p.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),e(p,d,g),i=!0,u._container=d,d.__vue_app__=u,Qa(p.component)}},onUnmount(d){s.push(d)},unmount(){i&&(sn(s,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(d,m){return r.provides[d]=m,u},runWithContext(d){const m=Zn;Zn=u;try{return d()}finally{Zn=m}}};return u}}let Zn=null;function Ma(e,t){if(pt){let n=pt.provides;const o=pt.parent&&pt.parent.provides;o===n&&(n=pt.provides=Object.create(o)),n[e]=t}}function eo(e,t,n=!1){const o=Ga();if(o||Zn){let a=Zn?Zn._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&xe(t)?t.call(o&&o.proxy):t}}const vi={},hi=()=>Object.create(vi),gi=e=>Object.getPrototypeOf(e)===vi;function Rd(e,t,n,o=!1){const a={},r=hi();e.propsDefaults=Object.create(null),yi(e,t,a,r);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);n?e.props=o?a:od(a):e.type.props?e.props=a:e.props=r,e.attrs=r}function Bd(e,t,n,o){const{props:a,attrs:r,vnode:{patchFlag:l}}=e,s=Ee(a),[i]=e.propsOptions;let u=!1;if((o||l>0)&&!(l&16)){if(l&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let g=d[m];if(za(e.emitsOptions,g))continue;const p=t[g];if(i)if(Pe(r,g))p!==r[g]&&(r[g]=p,u=!0);else{const k=Tt(g);a[k]=Er(i,s,k,p,e,!1)}else p!==r[g]&&(r[g]=p,u=!0)}}}else{yi(e,t,a,r)&&(u=!0);let d;for(const m in s)(!t||!Pe(t,m)&&((d=Tn(m))===m||!Pe(t,d)))&&(i?n&&(n[m]!==void 0||n[d]!==void 0)&&(a[m]=Er(i,s,m,void 0,e,!0)):delete a[m]);if(r!==s)for(const m in r)(!t||!Pe(t,m))&&(delete r[m],u=!0)}u&&vn(e.attrs,"set","")}function yi(e,t,n,o){const[a,r]=e.propsOptions;let l=!1,s;if(t)for(let i in t){if(Do(i))continue;const u=t[i];let d;a&&Pe(a,d=Tt(i))?!r||!r.includes(d)?n[d]=u:(s||(s={}))[d]=u:za(e.emitsOptions,i)||(!(i in o)||u!==o[i])&&(o[i]=u,l=!0)}if(r){const i=Ee(n),u=s||Ae;for(let d=0;d<r.length;d++){const m=r[d];n[m]=Er(a,i,m,u[m],e,!Pe(u,m))}}return l}function Er(e,t,n,o,a,r){const l=e[n];if(l!=null){const s=Pe(l,"default");if(s&&o===void 0){const i=l.default;if(l.type!==Function&&!l.skipFactory&&xe(i)){const{propsDefaults:u}=a;if(n in u)o=u[n];else{const d=Ko(a);o=u[n]=i.call(null,t),d()}}else o=i;a.ce&&a.ce._setProp(n,o)}l[0]&&(r&&!s?o=!1:l[1]&&(o===""||o===Tn(n))&&(o=!0))}return o}const Yd=new WeakMap;function wi(e,t,n=!1){const o=n?Yd:t.propsCache,a=o.get(e);if(a)return a;const r=e.props,l={},s=[];let i=!1;if(!xe(e)){const d=m=>{i=!0;const[g,p]=wi(m,t,!0);st(l,g),p&&s.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!i)return Ue(e)&&o.set(e,zn),zn;if(ke(r))for(let d=0;d<r.length;d++){const m=Tt(r[d]);El(m)&&(l[m]=Ae)}else if(r)for(const d in r){const m=Tt(d);if(El(m)){const g=r[d],p=l[m]=ke(g)||xe(g)?{type:g}:st({},g),k=p.type;let y=!1,x=!0;if(ke(k))for(let A=0;A<k.length;++A){const T=k[A],Z=xe(T)&&T.name;if(Z==="Boolean"){y=!0;break}else Z==="String"&&(x=!1)}else y=xe(k)&&k.name==="Boolean";p[0]=y,p[1]=x,(y||Pe(p,"default"))&&s.push(m)}}const u=[l,s];return Ue(e)&&o.set(e,u),u}function El(e){return e[0]!=="$"&&!Do(e)}const rl=e=>e==="_"||e==="_ctx"||e==="$stable",ll=e=>ke(e)?e.map(nn):[nn(e)],Ud=(e,t,n)=>{if(t._n)return t;const o=f((...a)=>ll(t(...a)),n);return o._c=!1,o},bi=(e,t,n)=>{const o=e._ctx;for(const a in e){if(rl(a))continue;const r=e[a];if(xe(r))t[a]=Ud(a,r,o);else if(r!=null){const l=ll(r);t[a]=()=>l}}},ki=(e,t)=>{const n=ll(t);e.slots.default=()=>n},_i=(e,t,n)=>{for(const o in t)(n||!rl(o))&&(e[o]=t[o])},Wd=(e,t,n)=>{const o=e.slots=hi();if(e.vnode.shapeFlag&32){const a=t._;a?(_i(o,t,n),n&&Ms(o,"_",a,!0)):bi(t,o)}else t&&ki(e,t)},Ld=(e,t,n)=>{const{vnode:o,slots:a}=e;let r=!0,l=Ae;if(o.shapeFlag&32){const s=t._;s?n&&s===1?r=!1:_i(a,t,n):(r=!t.$stable,bi(t,a)),l=t}else t&&(ki(e,t),l={default:1});if(r)for(const s in a)!rl(s)&&l[s]==null&&delete a[s]},Mt=ac;function Jd(e){return qd(e)}function qd(e,t){const n=Ya();n.__VUE__=!0;const{insert:o,remove:a,patchProp:r,createElement:l,createText:s,createComment:i,setText:u,setElementText:d,parentNode:m,nextSibling:g,setScopeId:p=Ht,insertStaticContent:k}=e,y=(S,V,F,q=null,Y=null,U=null,te=void 0,Q=null,H=!!V.dynamicChildren)=>{if(S===V)return;S&&!yo(S,V)&&(q=kt(S),D(S,Y,U,!0),S=null),V.patchFlag===-2&&(H=!1,V.dynamicChildren=null);const{type:J,ref:ge,shapeFlag:ae}=V;switch(J){case Ka:x(S,V,F,q);break;case Cn:A(S,V,F,q);break;case No:S==null&&T(V,F,q,te);break;case W:tt(S,V,F,q,Y,U,te,Q,H);break;default:ae&1?N(S,V,F,q,Y,U,te,Q,H):ae&6?vt(S,V,F,q,Y,U,te,Q,H):(ae&64||ae&128)&&J.process(S,V,F,q,Y,U,te,Q,H,dn)}ge!=null&&Y?$o(ge,S&&S.ref,U,V||S,!V):ge==null&&S&&S.ref!=null&&$o(S.ref,null,U,S,!0)},x=(S,V,F,q)=>{if(S==null)o(V.el=s(V.children),F,q);else{const Y=V.el=S.el;V.children!==S.children&&u(Y,V.children)}},A=(S,V,F,q)=>{S==null?o(V.el=i(V.children||""),F,q):V.el=S.el},T=(S,V,F,q)=>{[S.el,S.anchor]=k(S.children,V,F,q,S.el,S.anchor)},Z=({el:S,anchor:V},F,q)=>{let Y;for(;S&&S!==V;)Y=g(S),o(S,F,q),S=Y;o(V,F,q)},O=({el:S,anchor:V})=>{let F;for(;S&&S!==V;)F=g(S),a(S),S=F;a(V)},N=(S,V,F,q,Y,U,te,Q,H)=>{V.type==="svg"?te="svg":V.type==="math"&&(te="mathml"),S==null?le(V,F,q,Y,U,te,Q,H):me(S,V,Y,U,te,Q,H)},le=(S,V,F,q,Y,U,te,Q)=>{let H,J;const{props:ge,shapeFlag:ae,transition:ve,dirs:Se}=S;if(H=S.el=l(S.type,U,ge&&ge.is,ge),ae&8?d(H,S.children):ae&16&&L(S.children,H,null,q,Y,gr(S,U),te,Q),Se&&En(S,null,q,"created"),ie(H,S,S.scopeId,te,q),ge){for(const Ie in ge)Ie!=="value"&&!Do(Ie)&&r(H,Ie,null,ge[Ie],U,q);"value"in ge&&r(H,"value",null,ge.value,U),(J=ge.onVnodeBeforeMount)&&Zt(J,q,S)}Se&&En(S,null,q,"beforeMount");const Me=Hd(Y,ve);Me&&ve.beforeEnter(H),o(H,V,F),((J=ge&&ge.onVnodeMounted)||Me||Se)&&Mt(()=>{J&&Zt(J,q,S),Me&&ve.enter(H),Se&&En(S,null,q,"mounted")},Y)},ie=(S,V,F,q,Y)=>{if(F&&p(S,F),q)for(let U=0;U<q.length;U++)p(S,q[U]);if(Y){let U=Y.subTree;if(V===U||ji(U.type)&&(U.ssContent===V||U.ssFallback===V)){const te=Y.vnode;ie(S,te,te.scopeId,te.slotScopeIds,Y.parent)}}},L=(S,V,F,q,Y,U,te,Q,H=0)=>{for(let J=H;J<S.length;J++){const ge=S[J]=Q?$n(S[J]):nn(S[J]);y(null,ge,V,F,q,Y,U,te,Q)}},me=(S,V,F,q,Y,U,te)=>{const Q=V.el=S.el;let{patchFlag:H,dynamicChildren:J,dirs:ge}=V;H|=S.patchFlag&16;const ae=S.props||Ae,ve=V.props||Ae;let Se;if(F&&Pn(F,!1),(Se=ve.onVnodeBeforeUpdate)&&Zt(Se,F,V,S),ge&&En(V,S,F,"beforeUpdate"),F&&Pn(F,!0),(ae.innerHTML&&ve.innerHTML==null||ae.textContent&&ve.textContent==null)&&d(Q,""),J?Le(S.dynamicChildren,J,Q,F,q,gr(V,Y),U):te||z(S,V,Q,null,F,q,gr(V,Y),U,!1),H>0){if(H&16)Te(Q,ae,ve,F,Y);else if(H&2&&ae.class!==ve.class&&r(Q,"class",null,ve.class,Y),H&4&&r(Q,"style",ae.style,ve.style,Y),H&8){const Me=V.dynamicProps;for(let Ie=0;Ie<Me.length;Ie++){const Fe=Me[Ie],it=ae[Fe],ot=ve[Fe];(ot!==it||Fe==="value")&&r(Q,Fe,it,ot,Y,F)}}H&1&&S.children!==V.children&&d(Q,V.children)}else!te&&J==null&&Te(Q,ae,ve,F,Y);((Se=ve.onVnodeUpdated)||ge)&&Mt(()=>{Se&&Zt(Se,F,V,S),ge&&En(V,S,F,"updated")},q)},Le=(S,V,F,q,Y,U,te)=>{for(let Q=0;Q<V.length;Q++){const H=S[Q],J=V[Q],ge=H.el&&(H.type===W||!yo(H,J)||H.shapeFlag&198)?m(H.el):F;y(H,J,ge,null,q,Y,U,te,!0)}},Te=(S,V,F,q,Y)=>{if(V!==F){if(V!==Ae)for(const U in V)!Do(U)&&!(U in F)&&r(S,U,V[U],null,Y,q);for(const U in F){if(Do(U))continue;const te=F[U],Q=V[U];te!==Q&&U!=="value"&&r(S,U,Q,te,Y,q)}"value"in F&&r(S,"value",V.value,F.value,Y)}},tt=(S,V,F,q,Y,U,te,Q,H)=>{const J=V.el=S?S.el:s(""),ge=V.anchor=S?S.anchor:s("");let{patchFlag:ae,dynamicChildren:ve,slotScopeIds:Se}=V;Se&&(Q=Q?Q.concat(Se):Se),S==null?(o(J,F,q),o(ge,F,q),L(V.children||[],F,ge,Y,U,te,Q,H)):ae>0&&ae&64&&ve&&S.dynamicChildren?(Le(S.dynamicChildren,ve,F,Y,U,te,Q),(V.key!=null||Y&&V===Y.subTree)&&Ci(S,V,!0)):z(S,V,F,ge,Y,U,te,Q,H)},vt=(S,V,F,q,Y,U,te,Q,H)=>{V.slotScopeIds=Q,S==null?V.shapeFlag&512?Y.ctx.activate(V,F,q,te,H):nt(V,F,q,Y,U,te,H):qe(S,V,H)},nt=(S,V,F,q,Y,U,te)=>{const Q=S.component=dc(S,q,Y);if(ri(S)&&(Q.ctx.renderer=dn),cc(Q,!1,te),Q.asyncDep){if(Y&&Y.registerDep(Q,ee,te),!S.el){const H=Q.subTree=c(Cn);A(null,H,V,F),S.placeholder=H.el}}else ee(Q,S,V,F,Y,U,te)},qe=(S,V,F)=>{const q=V.component=S.component;if(nc(S,V,F))if(q.asyncDep&&!q.asyncResolved){ne(q,V,F);return}else q.next=V,q.update();else V.el=S.el,q.vnode=V},ee=(S,V,F,q,Y,U,te)=>{const Q=()=>{if(S.isMounted){let{next:ae,bu:ve,u:Se,parent:Me,vnode:Ie}=S;{const j=Si(S);if(j){ae&&(ae.el=Ie.el,ne(S,ae,te)),j.asyncDep.then(()=>{S.isUnmounted||Q()});return}}let Fe=ae,it;Pn(S,!1),ae?(ae.el=Ie.el,ne(S,ae,te)):ae=Ie,ve&&va(ve),(it=ae.props&&ae.props.onVnodeBeforeUpdate)&&Zt(it,Me,ae,Ie),Pn(S,!0);const ot=Il(S),$=S.subTree;S.subTree=ot,y($,ot,m($.el),kt($),S,Y,U),ae.el=ot.el,Fe===null&&oc(S,ot.el),Se&&Mt(Se,Y),(it=ae.props&&ae.props.onVnodeUpdated)&&Mt(()=>Zt(it,Me,ae,Ie),Y)}else{let ae;const{el:ve,props:Se}=V,{bm:Me,m:Ie,parent:Fe,root:it,type:ot}=S,$=Xn(V);Pn(S,!1),Me&&va(Me),!$&&(ae=Se&&Se.onVnodeBeforeMount)&&Zt(ae,Fe,V),Pn(S,!0);{it.ce&&it.ce._def.shadowRoot!==!1&&it.ce._injectChildStyle(ot);const j=S.subTree=Il(S);y(null,j,F,q,S,Y,U),V.el=j.el}if(Ie&&Mt(Ie,Y),!$&&(ae=Se&&Se.onVnodeMounted)){const j=V;Mt(()=>Zt(ae,Fe,j),Y)}(V.shapeFlag&256||Fe&&Xn(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&S.a&&Mt(S.a,Y),S.isMounted=!0,V=F=q=null}};S.scope.on();const H=S.effect=new Fs(Q);S.scope.off();const J=S.update=H.run.bind(H),ge=S.job=H.runIfDirty.bind(H);ge.i=S,ge.id=S.uid,H.scheduler=()=>nl(ge),Pn(S,!0),J()},ne=(S,V,F)=>{V.component=S;const q=S.vnode.props;S.vnode=V,S.next=null,Bd(S,V.props,q,F),Ld(S,V.children,F),bn(),Nl(S),kn()},z=(S,V,F,q,Y,U,te,Q,H=!1)=>{const J=S&&S.children,ge=S?S.shapeFlag:0,ae=V.children,{patchFlag:ve,shapeFlag:Se}=V;if(ve>0){if(ve&128){$e(J,ae,F,q,Y,U,te,Q,H);return}else if(ve&256){oe(J,ae,F,q,Y,U,te,Q,H);return}}Se&8?(ge&16&&Xt(J,Y,U),ae!==J&&d(F,ae)):ge&16?Se&16?$e(J,ae,F,q,Y,U,te,Q,H):Xt(J,Y,U,!0):(ge&8&&d(F,""),Se&16&&L(ae,F,q,Y,U,te,Q,H))},oe=(S,V,F,q,Y,U,te,Q,H)=>{S=S||zn,V=V||zn;const J=S.length,ge=V.length,ae=Math.min(J,ge);let ve;for(ve=0;ve<ae;ve++){const Se=V[ve]=H?$n(V[ve]):nn(V[ve]);y(S[ve],Se,F,null,Y,U,te,Q,H)}J>ge?Xt(S,Y,U,!0,!1,ae):L(V,F,q,Y,U,te,Q,H,ae)},$e=(S,V,F,q,Y,U,te,Q,H)=>{let J=0;const ge=V.length;let ae=S.length-1,ve=ge-1;for(;J<=ae&&J<=ve;){const Se=S[J],Me=V[J]=H?$n(V[J]):nn(V[J]);if(yo(Se,Me))y(Se,Me,F,null,Y,U,te,Q,H);else break;J++}for(;J<=ae&&J<=ve;){const Se=S[ae],Me=V[ve]=H?$n(V[ve]):nn(V[ve]);if(yo(Se,Me))y(Se,Me,F,null,Y,U,te,Q,H);else break;ae--,ve--}if(J>ae){if(J<=ve){const Se=ve+1,Me=Se<ge?V[Se].el:q;for(;J<=ve;)y(null,V[J]=H?$n(V[J]):nn(V[J]),F,Me,Y,U,te,Q,H),J++}}else if(J>ve)for(;J<=ae;)D(S[J],Y,U,!0),J++;else{const Se=J,Me=J,Ie=new Map;for(J=Me;J<=ve;J++){const de=V[J]=H?$n(V[J]):nn(V[J]);de.key!=null&&Ie.set(de.key,J)}let Fe,it=0;const ot=ve-Me+1;let $=!1,j=0;const B=new Array(ot);for(J=0;J<ot;J++)B[J]=0;for(J=Se;J<=ae;J++){const de=S[J];if(it>=ot){D(de,Y,U,!0);continue}let we;if(de.key!=null)we=Ie.get(de.key);else for(Fe=Me;Fe<=ve;Fe++)if(B[Fe-Me]===0&&yo(de,V[Fe])){we=Fe;break}we===void 0?D(de,Y,U,!0):(B[we-Me]=J+1,we>=j?j=we:$=!0,y(de,V[we],F,null,Y,U,te,Q,H),it++)}const re=$?zd(B):zn;for(Fe=re.length-1,J=ot-1;J>=0;J--){const de=Me+J,we=V[de],he=V[de+1],Re=de+1<ge?he.el||he.placeholder:q;B[J]===0?y(null,we,F,Re,Y,U,te,Q,H):$&&(Fe<0||J!==re[Fe]?se(we,F,Re,2):Fe--)}}},se=(S,V,F,q,Y=null)=>{const{el:U,type:te,transition:Q,children:H,shapeFlag:J}=S;if(J&6){se(S.component.subTree,V,F,q);return}if(J&128){S.suspense.move(V,F,q);return}if(J&64){te.move(S,V,F,dn);return}if(te===W){o(U,V,F);for(let ae=0;ae<H.length;ae++)se(H[ae],V,F,q);o(S.anchor,V,F);return}if(te===No){Z(S,V,F);return}if(q!==2&&J&1&&Q)if(q===0)Q.beforeEnter(U),o(U,V,F),Mt(()=>Q.enter(U),Y);else{const{leave:ae,delayLeave:ve,afterLeave:Se}=Q,Me=()=>{S.ctx.isUnmounted?a(U):o(U,V,F)},Ie=()=>{U._isLeaving&&U[bd](!0),ae(U,()=>{Me(),Se&&Se()})};ve?ve(U,Me,Ie):Ie()}else o(U,V,F)},D=(S,V,F,q=!1,Y=!1)=>{const{type:U,props:te,ref:Q,children:H,dynamicChildren:J,shapeFlag:ge,patchFlag:ae,dirs:ve,cacheIndex:Se}=S;if(ae===-2&&(Y=!1),Q!=null&&(bn(),$o(Q,null,F,S,!0),kn()),Se!=null&&(V.renderCache[Se]=void 0),ge&256){V.ctx.deactivate(S);return}const Me=ge&1&&ve,Ie=!Xn(S);let Fe;if(Ie&&(Fe=te&&te.onVnodeBeforeUnmount)&&Zt(Fe,V,S),ge&6)Ft(S.component,F,q);else{if(ge&128){S.suspense.unmount(F,q);return}Me&&En(S,null,V,"beforeUnmount"),ge&64?S.type.remove(S,V,F,dn,q):J&&!J.hasOnce&&(U!==W||ae>0&&ae&64)?Xt(J,V,F,!1,!0):(U===W&&ae&384||!Y&&ge&16)&&Xt(H,V,F),q&&G(S)}(Ie&&(Fe=te&&te.onVnodeUnmounted)||Me)&&Mt(()=>{Fe&&Zt(Fe,V,S),Me&&En(S,null,V,"unmounted")},F)},G=S=>{const{type:V,el:F,anchor:q,transition:Y}=S;if(V===W){Ge(F,q);return}if(V===No){O(S);return}const U=()=>{a(F),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(S.shapeFlag&1&&Y&&!Y.persisted){const{leave:te,delayLeave:Q}=Y,H=()=>te(F,U);Q?Q(S.el,U,H):H()}else U()},Ge=(S,V)=>{let F;for(;S!==V;)F=g(S),a(S),S=F;a(V)},Ft=(S,V,F)=>{const{bum:q,scope:Y,job:U,subTree:te,um:Q,m:H,a:J}=S;Pl(H),Pl(J),q&&va(q),Y.stop(),U&&(U.flags|=8,D(te,S,V,F)),Q&&Mt(Q,V),Mt(()=>{S.isUnmounted=!0},V)},Xt=(S,V,F,q=!1,Y=!1,U=0)=>{for(let te=U;te<S.length;te++)D(S[te],V,F,q,Y)},kt=S=>{if(S.shapeFlag&6)return kt(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const V=g(S.anchor||S.el),F=V&&V[yd];return F?g(F):V};let Et=!1;const oa=(S,V,F)=>{S==null?V._vnode&&D(V._vnode,null,null,!0):y(V._vnode||null,S,V,null,null,null,F),V._vnode=S,Et||(Et=!0,Nl(),ei(),Et=!1)},dn={p:y,um:D,m:se,r:G,mt:nt,mc:L,pc:z,pbc:Le,n:kt,o:e};return{render:oa,hydrate:void 0,createApp:Id(oa)}}function gr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Pn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Hd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ci(e,t,n=!1){const o=e.children,a=t.children;if(ke(o)&&ke(a))for(let r=0;r<o.length;r++){const l=o[r];let s=a[r];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[r]=$n(a[r]),s.el=l.el),!n&&s.patchFlag!==-2&&Ci(l,s)),s.type===Ka&&s.patchFlag!==-1&&(s.el=l.el),s.type===Cn&&!s.el&&(s.el=l.el)}}function zd(e){const t=e.slice(),n=[0];let o,a,r,l,s;const i=e.length;for(o=0;o<i;o++){const u=e[o];if(u!==0){if(a=n[n.length-1],e[a]<u){t[o]=a,n.push(o);continue}for(r=0,l=n.length-1;r<l;)s=r+l>>1,e[n[s]]<u?r=s+1:l=s;u<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,l=n[r-1];r-- >0;)n[r]=l,l=t[l];return n}function Si(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Si(t)}function Pl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Kd=Symbol.for("v-scx"),Gd=()=>eo(Kd);function Un(e,t){return Ha(e,null,t)}function Qd(e,t){return Ha(e,null,{flush:"sync"})}function lt(e,t,n){return Ha(e,t,n)}function Ha(e,t,n=Ae){const{immediate:o,deep:a,flush:r,once:l}=n,s=st({},n),i=t&&o||!t&&r!=="post";let u;if(Bo){if(r==="sync"){const p=Gd();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!i){const p=()=>{};return p.stop=Ht,p.resume=Ht,p.pause=Ht,p}}const d=pt;s.call=(p,k,y)=>sn(p,d,k,y);let m=!1;r==="post"?s.scheduler=p=>{Mt(p,d&&d.suspense)}:r!=="sync"&&(m=!0,s.scheduler=(p,k)=>{k?p():nl(p)}),s.augmentJob=p=>{t&&(p.flags|=4),m&&(p.flags|=2,d&&(p.id=d.uid,p.i=d))};const g=vd(e,t,s);return Bo&&(u?u.push(g):i&&g()),g}function Xd(e,t,n){const o=this.proxy,a=Ke(e)?e.includes(".")?xi(o,e):()=>o[e]:e.bind(o,o);let r;xe(t)?r=t:(r=t.handler,n=t);const l=Ko(this),s=Ha(a,r.bind(o),n);return l(),s}function xi(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}function Lt(e,t,n=Ae){const o=Ga(),a=Tt(t),r=Tn(t),l=Di(e,a),s=id((i,u)=>{let d,m=Ae,g;return Qd(()=>{const p=e[a];St(d,p)&&(d=p,u())}),{get(){return i(),n.get?n.get(d):d},set(p){const k=n.set?n.set(p):p;if(!St(k,d)&&!(m!==Ae&&St(p,m)))return;const y=o.vnode.props;y&&(t in y||a in y||r in y)&&(`onUpdate:${t}`in y||`onUpdate:${a}`in y||`onUpdate:${r}`in y)||(d=p,u()),o.emit(`update:${t}`,k),St(p,k)&&St(p,m)&&!St(k,g)&&u(),m=p,g=k}}});return s[Symbol.iterator]=()=>{let i=0;return{next(){return i<2?{value:i++?l||Ae:s,done:!1}:{done:!0}}}},s}const Di=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tt(t)}Modifiers`]||e[`${Tn(t)}Modifiers`];function Zd(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||Ae;let a=n;const r=t.startsWith("update:"),l=r&&Di(o,t.slice(7));l&&(l.trim&&(a=n.map(d=>Ke(d)?d.trim():d)),l.number&&(a=n.map(_a)));let s,i=o[s=cr(t)]||o[s=cr(Tt(t))];!i&&r&&(i=o[s=cr(Tn(t))]),i&&sn(i,e,6,a);const u=o[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,sn(u,e,6,a)}}function Vi(e,t,n=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const r=e.emits;let l={},s=!1;if(!xe(e)){const i=u=>{const d=Vi(u,t,!0);d&&(s=!0,st(l,d))};!n&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!r&&!s?(Ue(e)&&o.set(e,null),null):(ke(r)?r.forEach(i=>l[i]=null):st(l,r),Ue(e)&&o.set(e,l),l)}function za(e,t){return!e||!Ia(t)?!1:(t=t.slice(2).replace(/Once$/,""),Pe(e,t[0].toLowerCase()+t.slice(1))||Pe(e,Tn(t))||Pe(e,t))}function Il(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[r],slots:l,attrs:s,emit:i,render:u,renderCache:d,props:m,data:g,setupState:p,ctx:k,inheritAttrs:y}=e,x=Va(e);let A,T;try{if(n.shapeFlag&4){const O=a||o,N=O;A=nn(u.call(N,O,d,m,p,g,k)),T=s}else{const O=t;A=nn(O.length>1?O(m,{attrs:s,slots:l,emit:i}):O(m,null)),T=t.props?s:ec(s)}}catch(O){Oo.length=0,La(O,e,1),A=c(Cn)}let Z=A;if(T&&y!==!1){const O=Object.keys(T),{shapeFlag:N}=Z;O.length&&N&7&&(r&&O.some(Jr)&&(T=tc(T,r)),Z=to(Z,T,!1,!0))}return n.dirs&&(Z=to(Z,null,!1,!0),Z.dirs=Z.dirs?Z.dirs.concat(n.dirs):n.dirs),n.transition&&ol(Z,n.transition),A=Z,Va(x),A}const ec=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ia(n))&&((t||(t={}))[n]=e[n]);return t},tc=(e,t)=>{const n={};for(const o in e)(!Jr(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function nc(e,t,n){const{props:o,children:a,component:r}=e,{props:l,children:s,patchFlag:i}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&i>=0){if(i&1024)return!0;if(i&16)return o?Rl(o,l,u):!!l;if(i&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const g=d[m];if(l[g]!==o[g]&&!za(u,g))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:o===l?!1:o?l?Rl(o,l,u):!0:!!l;return!1}function Rl(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const r=o[a];if(t[r]!==e[r]&&!za(n,r))return!0}return!1}function oc({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const ji=e=>e.__isSuspense;function ac(e,t){t&&t.pendingBranch?ke(e)?t.effects.push(...e):t.effects.push(e):Zs(e)}const W=Symbol.for("v-fgt"),Ka=Symbol.for("v-txt"),Cn=Symbol.for("v-cmt"),No=Symbol.for("v-stc"),Oo=[];let Ot=null;function v(e=!1){Oo.push(Ot=e?null:[])}function rc(){Oo.pop(),Ot=Oo[Oo.length-1]||null}let Ro=1;function Bl(e,t=!1){Ro+=e,e<0&&Ot&&t&&(Ot.hasOnce=!0)}function $i(e){return e.dynamicChildren=Ro>0?Ot||zn:null,rc(),Ro>0&&Ot&&Ot.push(e),e}function C(e,t,n,o,a,r){return $i(h(e,t,n,o,a,r,!0))}function E(e,t,n,o,a){return $i(c(e,t,n,o,a,!0))}function sl(e){return e?e.__v_isVNode===!0:!1}function yo(e,t){return e.type===t.type&&e.key===t.key}const Mi=({key:e})=>e??null,ha=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ke(e)||ce(e)||xe(e)?{i:rt,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,o=0,a=null,r=e===W?0:1,l=!1,s=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Mi(t),ref:t&&ha(t),scopeId:ni,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:rt};return s?(ul(i,n),r&128&&e.normalize(i)):n&&(i.shapeFlag|=Ke(n)?8:16),Ro>0&&!l&&Ot&&(i.patchFlag>0||r&6)&&i.patchFlag!==32&&Ot.push(i),i}const c=lc;function lc(e,t=null,n=null,o=0,a=null,r=!1){if((!e||e===ui)&&(e=Cn),sl(e)){const s=to(e,t,!0);return n&&ul(s,n),Ro>0&&!r&&Ot&&(s.shapeFlag&6?Ot[Ot.indexOf(e)]=s:Ot.push(s)),s.patchFlag=-2,s}if(hc(e)&&(e=e.__vccOpts),t){t=sc(t);let{class:s,style:i}=t;s&&!Ke(s)&&(t.class=$t(s)),Ue(i)&&(tl(i)&&!ke(i)&&(i=st({},i)),t.style=uo(i))}const l=Ke(e)?1:ji(e)?128:wd(e)?64:Ue(e)?4:xe(e)?2:0;return h(e,t,n,o,a,l,r,!0)}function sc(e){return e?tl(e)||gi(e)?st({},e):e:null}function to(e,t,n=!1,o=!1){const{props:a,ref:r,patchFlag:l,children:s,transition:i}=e,u=t?De(a||{},t):a,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Mi(u),ref:t&&t.ref?n&&r?ke(r)?r.concat(ha(t)):[r,ha(t)]:ha(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&to(e.ssContent),ssFallback:e.ssFallback&&to(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&ol(d,i.clone(d)),d}function _(e=" ",t=0){return c(Ka,null,e,t)}function il(e,t){const n=c(No,null,e);return n.staticCount=t,n}function R(e="",t=!1){return t?(v(),E(Cn,null,e)):c(Cn,null,e)}function nn(e){return e==null||typeof e=="boolean"?c(Cn):ke(e)?c(W,null,e.slice()):sl(e)?$n(e):c(Ka,null,String(e))}function $n(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:to(e)}function ul(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ke(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),ul(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!gi(t)?t._ctx=rt:a===3&&rt&&(rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else xe(t)?(t={default:t,_ctx:rt},n=32):(t=String(t),o&64?(n=16,t=[_(t)]):n=8);e.children=t,e.shapeFlag|=n}function De(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=$t([t.class,o.class]));else if(a==="style")t.style=uo([t.style,o.style]);else if(Ia(a)){const r=t[a],l=o[a];l&&r!==l&&!(ke(r)&&r.includes(l))&&(t[a]=r?[].concat(r,l):l)}else a!==""&&(t[a]=o[a])}return t}function Zt(e,t,n,o=null){sn(e,t,7,[n,o])}const ic=mi();let uc=0;function dc(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||ic,r={uid:uc++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Eu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wi(o,a),emitsOptions:Vi(o,a),emit:null,emitted:null,propsDefaults:Ae,inheritAttrs:o.inheritAttrs,ctx:Ae,data:Ae,props:Ae,attrs:Ae,slots:Ae,refs:Ae,setupState:Ae,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Zd.bind(null,r),e.ce&&e.ce(r),r}let pt=null;const Ga=()=>pt||rt;let Na,Pr;{const e=Ya(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),r=>{a.length>1?a.forEach(l=>l(r)):a[0](r)}};Na=t("__VUE_INSTANCE_SETTERS__",n=>pt=n),Pr=t("__VUE_SSR_SETTERS__",n=>Bo=n)}const Ko=e=>{const t=pt;return Na(e),e.scope.on(),()=>{e.scope.off(),Na(t)}},Yl=()=>{pt&&pt.scope.off(),Na(null)};function Ni(e){return e.vnode.shapeFlag&4}let Bo=!1;function cc(e,t=!1,n=!1){t&&Pr(t);const{props:o,children:a}=e.vnode,r=Ni(e);Rd(e,o,r,t),Wd(e,a,n||t);const l=r?fc(e,t):void 0;return t&&Pr(!1),l}function fc(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Nd);const{setup:o}=n;if(o){bn();const a=e.setupContext=o.length>1?mc(e):null,r=Ko(e),l=Ho(o,e,0,[e.props,a]),s=Vs(l);if(kn(),r(),(s||e.sp)&&!Xn(e)&&oi(e),s){if(l.then(Yl,Yl),t)return l.then(i=>{Ul(e,i)}).catch(i=>{La(i,e,0)});e.asyncDep=l}else Ul(e,l)}else Oi(e)}function Ul(e,t,n){xe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ue(t)&&(e.setupState=Gs(t)),Oi(e)}function Oi(e,t,n){const o=e.type;e.render||(e.render=o.render||Ht);{const a=Ko(e);bn();try{Od(e)}finally{kn(),a()}}}const pc={get(e,t){return ft(e,"get",""),e[t]}};function mc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,pc),slots:e.slots,emit:e.emit,expose:t}}function Qa(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Gs(ad(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Mo)return Mo[n](e)},has(t,n){return n in t||n in Mo}})):e.proxy}function vc(e,t=!0){return xe(e)?e.displayName||e.name:e.name||t&&e.__name}function hc(e){return xe(e)&&"__vccOpts"in e}const w=(e,t)=>pd(e,t,Bo),gc="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ir;const Wl=typeof window<"u"&&window.trustedTypes;if(Wl)try{Ir=Wl.createPolicy("vue",{createHTML:e=>e})}catch{}const Ai=Ir?e=>Ir.createHTML(e):e=>e,yc="http://www.w3.org/2000/svg",wc="http://www.w3.org/1998/Math/MathML",mn=typeof document<"u"?document:null,Ll=mn&&mn.createElement("template"),bc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?mn.createElementNS(yc,e):t==="mathml"?mn.createElementNS(wc,e):n?mn.createElement(e,{is:n}):mn.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>mn.createTextNode(e),createComment:e=>mn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>mn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,r){const l=n?n.previousSibling:t.lastChild;if(a&&(a===r||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===r||!(a=a.nextSibling)););else{Ll.innerHTML=Ai(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const s=Ll.content;if(o==="svg"||o==="mathml"){const i=s.firstChild;for(;i.firstChild;)s.appendChild(i.firstChild);s.removeChild(i)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},kc=Symbol("_vtc");function _c(e,t,n){const o=e[kc];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Jl=Symbol("_vod"),Cc=Symbol("_vsh"),Ti=Symbol("");function Fn(e){const t=Ga();if(!t)return;const n=t.ut=(a=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(r=>Oa(r,a))},o=()=>{const a=e(t.proxy);t.ce?Oa(t.ce,a):Rr(t.subTree,a),n(a)};si(()=>{Zs(o)}),bt(()=>{lt(o,Ht,{flush:"post"});const a=new MutationObserver(o);a.observe(t.subTree.el.parentNode,{childList:!0}),qa(()=>a.disconnect())})}function Rr(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Rr(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Oa(e.el,t);else if(e.type===W)e.children.forEach(n=>Rr(n,t));else if(e.type===No){let{el:n,anchor:o}=e;for(;n&&(Oa(n,t),n!==o);)n=n.nextSibling}}function Oa(e,t){if(e.nodeType===1){const n=e.style;let o="";for(const a in t){const r=Fu(t[a]);n.setProperty(`--${a}`,r),o+=`--${a}: ${r};`}n[Ti]=o}}const Sc=/(^|;)\s*display\s*:/;function xc(e,t,n){const o=e.style,a=Ke(n);let r=!1;if(n&&!a){if(t)if(Ke(t))for(const l of t.split(";")){const s=l.slice(0,l.indexOf(":")).trim();n[s]==null&&ga(o,s,"")}else for(const l in t)n[l]==null&&ga(o,l,"");for(const l in n)l==="display"&&(r=!0),ga(o,l,n[l])}else if(a){if(t!==n){const l=o[Ti];l&&(n+=";"+l),o.cssText=n,r=Sc.test(n)}}else t&&e.removeAttribute("style");Jl in e&&(e[Jl]=r?o.display:"",e[Cc]&&(o.display="none"))}const ql=/\s*!important$/;function ga(e,t,n){if(ke(n))n.forEach(o=>ga(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Dc(e,t);ql.test(n)?e.setProperty(Tn(o),n.replace(ql,""),"important"):e[o]=n}}const Hl=["Webkit","Moz","ms"],yr={};function Dc(e,t){const n=yr[t];if(n)return n;let o=Tt(t);if(o!=="filter"&&o in e)return yr[t]=o;o=Ba(o);for(let a=0;a<Hl.length;a++){const r=Hl[a]+o;if(r in e)return yr[t]=r}return t}const zl="http://www.w3.org/1999/xlink";function Kl(e,t,n,o,a,r=Au(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(zl,t.slice(6,t.length)):e.setAttributeNS(zl,t,n):n==null||r&&!Ns(n)?e.removeAttribute(t):e.setAttribute(t,r?"":Kt(n)?String(n):n)}function Gl(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ai(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const s=r==="OPTION"?e.getAttribute("value")||"":e.value,i=n==null?e.type==="checkbox"?"on":"":String(n);(s!==i||!("_value"in e))&&(e.value=i),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const s=typeof e[t];s==="boolean"?n=Ns(n):n==null&&s==="string"?(n="",l=!0):s==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(a||t)}function Mn(e,t,n,o){e.addEventListener(t,n,o)}function Vc(e,t,n,o){e.removeEventListener(t,n,o)}const Ql=Symbol("_vei");function jc(e,t,n,o,a=null){const r=e[Ql]||(e[Ql]={}),l=r[t];if(o&&l)l.value=o;else{const[s,i]=$c(t);if(o){const u=r[t]=Oc(o,a);Mn(e,s,u,i)}else l&&(Vc(e,s,l,i),r[t]=void 0)}}const Xl=/(?:Once|Passive|Capture)$/;function $c(e){let t;if(Xl.test(e)){t={};let o;for(;o=e.match(Xl);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Tn(e.slice(2)),t]}let wr=0;const Mc=Promise.resolve(),Nc=()=>wr||(Mc.then(()=>wr=0),wr=Date.now());function Oc(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;sn(Ac(o,n.value),t,5,[o])};return n.value=e,n.attached=Nc(),n}function Ac(e,t){if(ke(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const Zl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Tc=(e,t,n,o,a,r)=>{const l=a==="svg";t==="class"?_c(e,o,l):t==="style"?xc(e,n,o):Ia(t)?Jr(t)||jc(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Fc(e,t,o,l))?(Gl(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Kl(e,t,o,l,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ke(o))?Gl(e,Tt(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Kl(e,t,o,l))};function Fc(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Zl(t)&&xe(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Zl(t)&&Ke(n)?!1:t in e}const no=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ke(t)?n=>va(t,n):t};function Ec(e){e.target.composing=!0}function es(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const yn=Symbol("_assign"),Go={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[yn]=no(a);const r=o||a.props&&a.props.type==="number";Mn(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n&&(s=s.trim()),r&&(s=_a(s)),e[yn](s)}),n&&Mn(e,"change",()=>{e.value=e.value.trim()}),t||(Mn(e,"compositionstart",Ec),Mn(e,"compositionend",es),Mn(e,"change",es))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:r}},l){if(e[yn]=no(l),e.composing)return;const s=(r||e.type==="number")&&!/^0\d/.test(e.value)?_a(e.value):e.value,i=t??"";s!==i&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===i)||(e.value=i))}},Pc={deep:!0,created(e,t,n){e[yn]=no(n),Mn(e,"change",()=>{const o=e._modelValue,a=Yo(e),r=e.checked,l=e[yn];if(ke(o)){const s=zr(o,a),i=s!==-1;if(r&&!i)l(o.concat(a));else if(!r&&i){const u=[...o];u.splice(s,1),l(u)}}else if(io(o)){const s=new Set(o);r?s.add(a):s.delete(a),l(s)}else l(Fi(e,r))})},mounted:ts,beforeUpdate(e,t,n){e[yn]=no(n),ts(e,t,n)}};function ts(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(ke(t))a=zr(t,o.props.value)>-1;else if(io(t))a=t.has(o.props.value);else{if(t===n)return;a=qo(t,Fi(e,!0))}e.checked!==a&&(e.checked=a)}const Ic={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=io(t);Mn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?_a(Yo(l)):Yo(l));e[yn](e.multiple?a?new Set(r):r:r[0]),e._assigning=!0,Nt(()=>{e._assigning=!1})}),e[yn]=no(o)},mounted(e,{value:t}){ns(e,t)},beforeUpdate(e,t,n){e[yn]=no(n)},updated(e,{value:t}){e._assigning||ns(e,t)}};function ns(e,t){const n=e.multiple,o=ke(t);if(!(n&&!o&&!io(t))){for(let a=0,r=e.options.length;a<r;a++){const l=e.options[a],s=Yo(l);if(n)if(o){const i=typeof s;i==="string"||i==="number"?l.selected=t.some(u=>String(u)===String(s)):l.selected=zr(t,s)>-1}else l.selected=t.has(s);else if(qo(Yo(l),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Yo(e){return"_value"in e?e._value:e.value}function Fi(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Rc=["ctrl","shift","alt","meta"],Bc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Rc.some(n=>e[`${n}Key`]&&!t.includes(n))},Qt=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(a,...r)=>{for(let l=0;l<t.length;l++){const s=Bc[t[l]];if(s&&s(a,t))return}return e(a,...r)})},Yc=st({patchProp:Tc},bc);let os;function Uc(){return os||(os=Jd(Yc))}const fo=(...e)=>{const t=Uc().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=Lc(o);if(!a)return;const r=t._component;!xe(r)&&!r.render&&!r.template&&(r.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const l=n(a,!1,Wc(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t};function Wc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Lc(e){return Ke(e)?document.querySelector(e):e}const Jc={trailing:!0};function qc(e,t=25,n={}){if(n={...Jc,...n},!Number.isFinite(t))throw new TypeError("Expected `wait` to be a finite number");let o,a,r=[],l,s;const i=(m,g)=>(l=Hc(e,m,g),l.finally(()=>{if(l=null,n.trailing&&s&&!a){const p=i(m,s);return s=null,p}}),l),u=function(...m){return n.trailing&&(s=m),l||new Promise(g=>{const p=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const k=n.leading?o:i(this,m);s=null;for(const y of r)y(k);r=[]},t),p?(o=i(this,m),g(o)):r.push(g)})},d=m=>{m&&(clearTimeout(m),a=null)};return u.isPending=()=>!!a,u.cancel=()=>{d(a),r=[],s=null},u.flush=()=>{if(d(a),!s||l)return;const m=s;return s=null,i(this,m)},u}async function Hc(e,t,n){return await e.apply(t,n)}function zc(){const e=X.moment.localeData();return{...e._config,ordinal:e._config.ordinal,meridiem:e._config.meridiem,meridiemParse:e._config.meridiemParse,dayOfMonthOrdinalParse:e._config.dayOfMonthOrdinalParse,isPM:e._config.isPM}}const Jn=X.moment.localeData(),br=new Map([["o",String(Jn._config.dayOfMonthOrdinalParse).replace(String.raw`/\d{1,2}`,"").slice(0,-1)],["M","([1-9]|1[0-2])"],["MM","(0[1-9]|1[0-2])"],["MMM","("+Jn.monthsShort().join("|")+")"],["MMMM","("+Jn.months().join("|")+")"],["Q","[1-4]"],["D","[0-9]{1,2}"],["DD","[0-9]{2}"],["DDD","[1-9]{1,3}"],["DDDD","[1-9]{3}"],["d","[0-6]"],["dd","("+Jn.weekdaysMin().join("|")+")"],["ddd","("+Jn.weekdaysShort().join("|")+")"],["dddd","("+Jn.weekdays().join("|")+")"],["w","[0-9]{1,2}"],["ww","[0-9]{2}"],["W","[0-9]{1,2}"],["WW","[0-9]{2}"],["YY","[0-9]{2}"],["YYYY","[0-9]{4}"]]),Kc=new Set(["o","M","Q","D","d","w","W","Y"]);function Gc(e){const t=[];let n="",o=0,a=!1,r="";for(const l of e)if(a)l==="]"?(t.push(r),a=!1,r=""):r+=l;else if(l==="[")a=!0;else if(Kc.has(l))if(n===l)o++;else{if(o>0){const s=br.get(n.repeat(o));s&&t.push(s)}o=1,n=l}else{if(o>0){const s=br.get(n.repeat(o));s&&t.push(s),o=0,n=""}t.push(l)}if(o>0){const l=br.get(n.repeat(o));l&&t.push(l),o=0,n=""}return new RegExp(t.join(""))}const oo="custom-journal-locale",ao={dow:0,doy:0};function Qc(){const e=X.moment.locale(),t=zc();ao.dow=t.week.dow,ao.doy=t.week.doy,X.moment.locales().includes(oo)||(X.moment.defineLocale(oo,t),X.moment.locale(e))}function Ei(e,t){return 7+e-t}function Pi(e,t){return 7+e-t}const Aa=(e,t,n)=>{const o=X.moment.locale();X.moment.updateLocale(oo,{week:{dow:e,doy:t}}),X.moment.locale(o),n&&X.moment.updateLocale(o,{week:{dow:e,doy:t}})},Ta=e=>{const t=X.moment.locale();X.moment.updateLocale(oo,{week:ao}),X.moment.locale(t),e&&X.moment.updateLocale(t,{week:ao})};function K(e,t){const n=e?X.moment(e,t):X.moment();return n.locale(oo),n}function Oe(){const e=X.moment();return e.locale(oo),e.startOf("day")}function dl(e,t,n){const o=typeof t=="string"?K(t):t,a=typeof n=="string"?K(n):n;return o.isSame(a,e)}const Xc={day:Zc,week:ef,month:tf,quarter:nf,year:of};function Zc(e){const t=K(e);return t.calendar(Oe(),{lastWeek:"[Last] dddd",lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",sameElse:function(){return"["+t.from(Oe())+"]"}})}function ef(e){const t=Oe().startOf("week"),n=K(e).startOf("week").diff(t,"week");switch(n){case 0:return"This week";case-1:return"Last week";case 1:return"Next week"}return n<0?`${Math.abs(n)} weeks ago`:`${n} weeks from now`}function tf(e){const t=Oe().startOf("month"),n=K(e).diff(t,"month");switch(n){case 0:return"This month";case-1:return"Last month";case 1:return"Next month"}return n<0?`${Math.abs(n)} months ago`:`${n} months from now`}function nf(e){const t=Oe().startOf("quarter"),n=K(e).diff(t,"quarter");switch(n){case 0:return"This quarter";case-1:return"Last quarter";case 1:return"Next quarter"}return n<0?`${Math.abs(n)} quarters ago`:`${n} quarters from now`}function of(e){const t=Oe().startOf("year"),n=K(e).diff(t,"year");switch(n){case 0:return"This year";case-1:return"Last year";case 1:return"Next year"}return n<0?`${Math.abs(n)} years ago`:`${n} years from now`}function Ii(e,t){return Xc[e](t)}const Ri=[{name:"ISO 8601",description:`Week starts on Monday.
First week of year includes 1st Thursday (Jan 4th)`,used:"EU (exc. Portugal) and most of other European countries, most of Asia and Oceania",dow:1,doy:4},{name:"Western traditional",description:`Week starts on Sunday.
First week of year includes 1st Saturday (Jan 1st)`,used:"Canada, United States, Iceland, Portugal, Japan, Taiwan, Thailand, Hong Kong, Macau, Israel, Egypt, South Africa, the Philippines, and most of Latin America",dow:0,doy:6},{name:"Middle Eastern",description:`Week starts on Saturday.
First week of year includes 1st Friday (Jan 1st)`,used:"Much of the Middle East",dow:6,doy:12}];function Bi(e){let{dow:t,doy:n}=e;t===-1&&(t=X.moment().localeData().firstDayOfWeek(),n=X.moment().localeData().firstDayOfYear());const o=Ri.find(l=>l.dow===t&&l.doy===n);if(o)return o;const a=X.moment().locale("en").localeData().weekdays()[t],r=Pi(t,n);return{name:"custom",description:`Week starts on ${a}.
First week of year includes Jan ${r}`,used:"",dow:t,doy:n}}const af={key:0,class:"setting-item-info"},rf={class:"setting-item-name"},lf={class:"setting-item-description"},sf={key:1,class:"setting-item-control"},M=I({__name:"ObsidianSetting",props:{name:{},description:{},heading:{type:Boolean},controlsOnly:{type:Boolean},noControls:{type:Boolean}},setup(e){return(t,n)=>(v(),C("div",{class:$t(["setting-item",{"setting-item--heading":t.heading}])},[t.controlsOnly?R("",!0):(v(),C("div",af,[h("div",rf,[ze(t.$slots,"name",{},()=>[_(P(t.name??""),1)])]),h("div",lf,[ze(t.$slots,"description",{},()=>[_(P(t.description??""),1)])])])),t.noControls?R("",!0):(v(),C("div",sf,[ze(t.$slots,"default")]))],2))}}),uf=["disabled"],Ve=I({__name:"ObsidianDropdown",props:Ut({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((v(),C("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),class:"dropdown",disabled:n.disabled},[ze(n.$slots,"default")],8,uf)),[[Ic,t.value]])}}),df=["aria-label"],He=I({__name:"ObsidianToggle",props:Ut({disabled:{type:Boolean},tooltip:{}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>(v(),C("div",{class:$t(["checkbox-container",{"is-enabled":t.value,"is-disabled":n.disabled}]),"aria-label":n.tooltip,onClick:o[0]||(o[0]=a=>t.value=!t.value)},[...o[1]||(o[1]=[h("input",{type:"checkbox",tabindex:"0"},null,-1)])],10,df))}}),cf=["aria-label"],ff=I({__name:"ObsidianIcon",props:{name:{},tooltip:{}},setup(e){const t=e,n=fe();bt(()=>{lt(()=>t.name,a=>o(a),{immediate:!0})});function o(a){if(n.value?.empty(),!a)return;const r=X.getIcon(a);r&&n.value&&n.value.append(r)}return(a,r)=>(v(),C("span",{ref_key:"element",ref:n,"aria-label":a.tooltip},null,8,cf))}}),ye=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},un=ye(ff,[["__scopeId","data-v-37c08292"]]),pf=["disabled","type","aria-label"],mf=I({__name:"ObsidianButton",props:{disabled:{type:Boolean},cta:{type:Boolean},warning:{type:Boolean},type:{},tooltip:{},flat:{type:Boolean}},setup(e){return(t,n)=>(v(),C("button",{class:$t({"mod-cta":t.cta,"mod-warning":t.warning,"clickable-icon":t.flat&&!t.cta}),disabled:t.disabled,type:t.type??"button","aria-label":t.tooltip},[ze(t.$slots,"default",{},void 0,!0)],10,pf))}}),ue=ye(mf,[["__scopeId","data-v-ff188d28"]]),vf=I({__name:"ObsidianIconButton",props:{icon:{},tooltip:{}},setup(e){return(t,n)=>(v(),E(ue,{tooltip:t.tooltip,flat:"",class:"icon-button"},{default:f(()=>[c(un,{name:t.icon},null,8,["name"])]),_:1},8,["tooltip"]))}}),be=ye(vf,[["__scopeId","data-v-3dd8502b"]]),fn="journal-calendar",_e="YYYY-MM-DD",mt="journal",Xa="journal-date",an="journal-start-date",wn="journal-end-date",Za="journal-index",Wn=Symbol(),Yi=Symbol(),hf=1*60*60*1e3,Ui={day:"D",week:"[W]w",month:"MMMM",quarter:"[Q]Q",year:"YYYY",custom:""};class Ne extends X.Modal{constructor(t,n,o,a={},r){super(t.app),this.plugin=t,this.title=n,this.component=o,this.componentProps=a,this.customWidth=r,t.register(()=>{this.close()})}_vueApp;onOpen(){this.titleEl.setText(this.title),this.customWidth&&this.modalEl.setCssProps({"--dialog-width":`${this.customWidth}px`}),this._vueApp=fo(this.component,{onClose:()=>{this.close()},...this.componentProps}),this._vueApp.provide(Wn,this.plugin),this._vueApp.mount(this.contentEl)}onClose(){this._vueApp?.unmount(),this.contentEl.empty()}}const gf=I({__name:"RemoveJournal.modal",emits:["close","remove"],setup(e,{emit:t}){const n=t,o=fe("keep");function a(){n("remove",o.value),n("close")}return(r,l)=>(v(),C(W,null,[c(M,{name:"Journal notes",description:"What to do with notes connected to this journal"},{default:f(()=>[c(Ve,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=s)},{default:f(()=>[...l[2]||(l[2]=[h("option",{value:"keep"},"Keep",-1),h("option",{value:"clear"},"Clear journal data",-1),h("option",{value:"delete"},"Delete",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:l[1]||(l[1]=s=>r.$emit("close"))},{default:f(()=>[...l[3]||(l[3]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",onClick:a},{default:f(()=>[...l[4]||(l[4]=[_("Remove",-1)])]),_:1})]),_:1})],64))}});function pe(){const e=eo(Wn);if(!e)throw new Error("Plugin not provided or composable used outside of vue context");return e}const yf={class:"flair"},cl=I({__name:"JournalSettingsList",props:{journals:{}},emits:["edit","bulk-add"],setup(e){const t=pe();function n(o){new Ne(t,`Remove ${o} journal`,gf,{onRemove(a){t.removeJournal(o,a).catch(console.error)}}).open()}return(o,a)=>o.journals.length===0?(v(),E(M,{key:0},{description:f(()=>[...a[0]||(a[0]=[_(" No journals created yet. ",-1)])]),_:1})):(v(!0),C(W,{key:1},Ce(o.journals,r=>(v(),E(M,{key:r.name},{name:f(()=>[_(P(r.name)+" ",1),h("span",yf,P(r.type),1)]),default:f(()=>[c(be,{icon:"import",tooltip:"Add existing notes to "+r.name,onClick:l=>o.$emit("bulk-add",r.name)},null,8,["tooltip","onClick"]),c(be,{icon:"pencil",tooltip:"Edit "+r.name,onClick:l=>o.$emit("edit",r.name)},null,8,["tooltip","onClick"]),c(be,{icon:"trash-2",tooltip:"Delete "+r.name,onClick:l=>n(r.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))}}),wf=["placeholder","disabled"],Je=I({__name:"ObsidianTextInput",props:Ut({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((v(),C("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"text",placeholder:n.placeholder,disabled:n.disabled,spellcheck:"false"},null,8,wf)),[[Go,t.value]])}});/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */function Jt(e){return typeof e=="function"}function Wi(e){return e==null}const ro=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function fl(e){return Number(e)>=0}function bf(e){return typeof e=="object"&&e!==null}function kf(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function as(e){if(!bf(e)||kf(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Uo(e,t){return Object.keys(t).forEach(n=>{if(as(t[n])&&as(e[n])){e[n]||(e[n]={}),Uo(e[n],t[n]);return}e[n]=t[n]}),e}function ia(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(fl(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}const _f={};function Cf(e){return _f[e]}function rs(e,t,n){typeof n.value=="object"&&(n.value=Ye(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Ye(e){if(typeof e!="object")return e;var t=0,n,o,a,r=Object.prototype.toString.call(e);if(r==="[object Object]"?a=Object.create(e.__proto__||null):r==="[object Array]"?a=Array(e.length):r==="[object Set]"?(a=new Set,e.forEach(function(l){a.add(Ye(l))})):r==="[object Map]"?(a=new Map,e.forEach(function(l,s){a.set(Ye(s),Ye(l))})):r==="[object Date]"?a=new Date(+e):r==="[object RegExp]"?a=new RegExp(e.source,e.flags):r==="[object DataView]"?a=new e.constructor(Ye(e.buffer)):r==="[object ArrayBuffer]"?a=e.slice(0):r.slice(-6)==="Array]"&&(a=new e.constructor(e)),a){for(o=Object.getOwnPropertySymbols(e);t<o.length;t++)rs(a,o[t],Object.getOwnPropertyDescriptor(e,o[t]));for(t=0,o=Object.getOwnPropertyNames(e);t<o.length;t++)Object.hasOwnProperty.call(a,n=o[t])&&a[n]===e[n]||rs(a,n,Object.getOwnPropertyDescriptor(e,n))}return a||e}const Sf=Symbol("vee-validate-form"),xf=Symbol("vee-validate-form-context"),Df=typeof window<"u";function Vf(e){return Jt(e)&&!!e.__locatorRef}function Nn(e){return!!e&&Jt(e.parse)&&e.__type==="VVTypedSchema"}function Li(e){return!!e&&Jt(e.validate)}function jf(e){return e==="checkbox"||e==="radio"}function $f(e){return ro(e)||Array.isArray(e)}function Mf(e){return Array.isArray(e)?e.length===0:ro(e)&&Object.keys(e).length===0}function Qo(e){return/^\[.+\]$/i.test(e)}function Nf(e){return Ji(e)&&e.multiple}function Ji(e){return e.tagName==="SELECT"}function Of(e){return qi(e)&&e.target&&"submit"in e.target}function qi(e){return e?!!(typeof Event<"u"&&Jt(Event)&&e instanceof Event||e&&e.srcElement):!1}function Ao(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,o,a;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(!Ao(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!Ao(o[1],t.get(o[0])))return!1;return!0}if(ss(e)&&ss(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(o=n;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(e=ls(e),t=ls(t),a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=n;o--!==0;){var r=a[o];if(!Ao(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function ls(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}function ss(e){return Df?e instanceof File:!1}function er(e){return Qo(e)?e.replace(/\[|\]/gi,""):e}function gn(e,t,n){return e?Qo(t)?e[er(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((a,r)=>$f(a)&&r in a?a[r]:n,e):n}function pn(e,t,n){if(Qo(t)){e[er(t)]=n;return}const o=t.split(/\.|\[(\d+)\]/).filter(Boolean);let a=e;for(let r=0;r<o.length;r++){if(r===o.length-1){a[o[r]]=n;return}(!(o[r]in a)||Wi(a[o[r]]))&&(a[o[r]]=fl(o[r+1])?[]:{}),a=a[o[r]]}}function kr(e,t){if(Array.isArray(e)&&fl(t)){e.splice(Number(t),1);return}ro(e)&&delete e[t]}function is(e,t){if(Qo(t)){delete e[er(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let o=e;for(let r=0;r<n.length;r++){if(r===n.length-1){kr(o,n[r]);break}if(!(n[r]in o)||Wi(o[n[r]]))break;o=o[n[r]]}const a=n.map((r,l)=>gn(e,n.slice(0,l).join(".")));for(let r=a.length-1;r>=0;r--)if(Mf(a[r])){if(r===0){kr(e,n[0]);continue}kr(a[r-1],n[r-1])}}function Rt(e){return Object.keys(e)}function us(e,t=0){let n=null,o=[];return function(...a){return n&&clearTimeout(n),n=setTimeout(()=>{const r=e(...a);o.forEach(l=>l(r)),o=[]},t),new Promise(r=>o.push(r))}}function Af(e,t){let n;return async function(...a){const r=e(...a);n=r;const l=await r;return r!==n?l:(n=void 0,t(l,a))}}function ds(e){return Array.isArray(e)?e:e?[e]:[]}function ua(e,t){const n={};for(const o in e)t.includes(o)||(n[o]=e[o]);return n}function Tf(e){let t=null,n=[];return function(...o){const a=Nt(()=>{if(t!==a)return;const r=e(...o);n.forEach(l=>l(r)),n=[],t=null});return t=a,new Promise(r=>n.push(r))}}function _r(e){if(Hi(e))return e._value}function Hi(e){return"_value"in e}function Ff(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function cs(e){if(!qi(e))return e;const t=e.target;if(jf(t.type)&&Hi(t))return _r(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(Nf(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(_r);if(Ji(t)){const n=Array.from(t.options).find(o=>o.selected);return n?_r(n):t.value}return Ff(t)}function Ef(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?ro(e)&&e._$$isNormalized?e:ro(e)?Object.keys(e).reduce((n,o)=>{const a=Pf(e[o]);return e[o]!==!1&&(n[o]=fs(a)),n},t):typeof e!="string"?t:e.split("|").reduce((n,o)=>{const a=If(o);return a.name&&(n[a.name]=fs(a.params)),n},t):t}function Pf(e){return e===!0?[]:Array.isArray(e)||ro(e)?e:[e]}function fs(e){const t=n=>typeof n=="string"&&n[0]==="@"?Rf(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,o)=>(n[o]=t(e[o]),n),{})}const If=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function Rf(e){const t=n=>{var o;return(o=gn(n,e))!==null&&o!==void 0?o:n[e]};return t.__locatorRef=e,t}const Bf={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Yf=Object.assign({},Bf);const So=()=>Yf;async function Uf(e,t,n={}){const o=n?.bails,a={name:n?.name||"{field}",rules:t,label:n?.label,bails:o??!0,formData:n?.values||{}},r=await Wf(a,e);return Object.assign(Object.assign({},r),{valid:!r.errors.length})}async function Wf(e,t){const n=e.rules;if(Nn(n)||Li(n))return Jf(t,Object.assign(Object.assign({},e),{rules:n}));if(Jt(n)||Array.isArray(n)){const s={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},i=Array.isArray(n)?n:[n],u=i.length,d=[];for(let m=0;m<u;m++){const g=i[m],p=await g(t,s);if(!(typeof p!="string"&&!Array.isArray(p)&&p)){if(Array.isArray(p))d.push(...p);else{const y=typeof p=="string"?p:Ki(s);d.push(y)}if(e.bails)return{errors:d}}}return{errors:d}}const o=Object.assign(Object.assign({},e),{rules:Ef(n)}),a=[],r=Object.keys(o.rules),l=r.length;for(let s=0;s<l;s++){const i=r[s],u=await qf(o,t,{name:i,params:o.rules[i]});if(u.error&&(a.push(u.error),e.bails))return{errors:a}}return{errors:a}}function Lf(e){return!!e&&e.name==="ValidationError"}function zi(e){return{__type:"VVTypedSchema",async parse(n,o){var a;try{return{output:await e.validate(n,{abortEarly:!1,context:o?.formData||{}}),errors:[]}}catch(r){if(!Lf(r))throw r;if(!(!((a=r.inner)===null||a===void 0)&&a.length)&&r.errors.length)return{errors:[{path:r.path,errors:r.errors}]};const l=r.inner.reduce((s,i)=>{const u=i.path||"";return s[u]||(s[u]={errors:[],path:u}),s[u].errors.push(...i.errors),s},{});return{errors:Object.values(l)}}}}}async function Jf(e,t){const o=await(Nn(t.rules)?t.rules:zi(t.rules)).parse(e,{formData:t.formData}),a=[];for(const r of o.errors)r.errors.length&&a.push(...r.errors);return{value:o.value,errors:a}}async function qf(e,t,n){const o=Cf(n.name);if(!o)throw new Error(`No such validator '${n.name}' exists.`);const a=Hf(n.params,e.formData),r={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:a})},l=await o(t,a,r);return typeof l=="string"?{error:l}:{error:l?void 0:Ki(r)}}function Ki(e){const t=So().generateMessage;return t?t(e):"Field is invalid"}function Hf(e,t){const n=o=>Vf(o)?o(t):o;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((o,a)=>(o[a]=n(e[a]),o),{})}async function zf(e,t){const o=await(Nn(e)?e:zi(e)).parse(Ye(t),{formData:Ye(t)}),a={},r={};for(const l of o.errors){const s=l.errors,i=(l.path||"").replace(/\["(\d+)"\]/g,(u,d)=>`[${d}]`);a[i]={valid:!s.length,errors:s},s.length&&(r[i]=s[0])}return{valid:!o.errors.length,results:a,errors:r,values:o.value,source:"schema"}}async function Kf(e,t,n){const a=Rt(e).map(async u=>{var d,m,g;const p=(d=n?.names)===null||d===void 0?void 0:d[u],k=await Uf(gn(t,u),e[u],{name:p?.name||u,label:p?.label,values:t,bails:(g=(m=n?.bailsMap)===null||m===void 0?void 0:m[u])!==null&&g!==void 0?g:!0});return Object.assign(Object.assign({},k),{path:u})});let r=!0;const l=await Promise.all(a),s={},i={};for(const u of l)s[u.path]={valid:u.valid,errors:u.errors},u.valid||(r=!1,i[u.path]=u.errors[0]);return{valid:r,results:s,errors:i,source:"schema"}}let Gf=0;const da=["bails","fieldsCount","id","multiple","type","validate"];function Gi(e){const t=e?.initialValues||{},n=Object.assign({},je(t)),o=b(e?.validationSchema);return o&&Nn(o)&&Jt(o.cast)?Ye(o.cast(n)||{}):Ye(n)}function xn(e){var t;const n=Gf++,o=e?.name||"Form";let a=0;const r=fe(!1),l=fe(!1),s=fe(0),i=[],u=_n(Gi(e)),d=fe([]),m=fe({}),g=fe({}),p=Tf(()=>{g.value=d.value.reduce(($,j)=>($[ia(je(j.path))]=j,$),{})});function k($,j){const B=ne($);if(!B){typeof $=="string"&&(m.value[ia($)]=ds(j));return}if(typeof $=="string"){const re=ia($);m.value[re]&&delete m.value[re]}B.errors=ds(j),B.valid=!B.errors.length}function y($){Rt($).forEach(j=>{k(j,$[j])})}e?.initialErrors&&y(e.initialErrors);const x=w(()=>{const $=d.value.reduce((j,B)=>(B.errors.length&&(j[je(B.path)]=B.errors),j),{});return Object.assign(Object.assign({},m.value),$)}),A=w(()=>Rt(x.value).reduce(($,j)=>{const B=x.value[j];return B?.length&&($[j]=B[0]),$},{})),T=w(()=>d.value.reduce(($,j)=>($[je(j.path)]={name:je(j.path)||"",label:j.label||""},$),{})),Z=w(()=>d.value.reduce(($,j)=>{var B;return $[je(j.path)]=(B=j.bails)!==null&&B!==void 0?B:!0,$},{})),O=Object.assign({},e?.initialErrors||{}),N=(t=e?.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:le,originalInitialValues:ie,setInitialValues:L}=Xf(d,u,e),me=Qf(d,u,ie,A),Le=w(()=>d.value.reduce(($,j)=>{const B=gn(u,je(j.path));return pn($,je(j.path),B),$},{})),Te=e?.validationSchema;function tt($,j){var B,re;const de=w(()=>gn(le.value,je($))),we=g.value[je($)],he=j?.type==="checkbox"||j?.type==="radio";if(we&&he){we.multiple=!0;const Pt=a++;return Array.isArray(we.id)?we.id.push(Pt):we.id=[we.id,Pt],we.fieldsCount++,we.__flags.pendingUnmount[Pt]=!1,we}const Re=w(()=>gn(u,je($))),Qe=je($),ut=oe.findIndex(Pt=>Pt===Qe);ut!==-1&&oe.splice(ut,1);const We=w(()=>{var Pt,ho,sr,ir;const ur=je(Te);if(Nn(ur))return(ho=(Pt=ur.describe)===null||Pt===void 0?void 0:Pt.call(ur,je($)).required)!==null&&ho!==void 0?ho:!1;const dr=je(j?.schema);return Nn(dr)&&(ir=(sr=dr.describe)===null||sr===void 0?void 0:sr.call(dr).required)!==null&&ir!==void 0?ir:!1}),dt=a++,_t=_n({id:dt,path:$,touched:!1,pending:!1,valid:!0,validated:!!(!((B=O[Qe])===null||B===void 0)&&B.length),required:We,initialValue:de,errors:co([]),bails:(re=j?.bails)!==null&&re!==void 0?re:!1,label:j?.label,type:j?.type||"default",value:Re,multiple:!1,__flags:{pendingUnmount:{[dt]:!1},pendingReset:!1},fieldsCount:1,validate:j?.validate,dirty:w(()=>!Ao(b(Re),b(de)))});return d.value.push(_t),g.value[Qe]=_t,p(),A.value[Qe]&&!O[Qe]&&Nt(()=>{H(Qe,{mode:"silent"})}),ce($)&&lt($,Pt=>{p();const ho=Ye(Re.value);g.value[Pt]=_t,Nt(()=>{pn(u,Pt,ho)})}),_t}const vt=us(ve,5),nt=us(ve,5),qe=Af(async $=>await($==="silent"?vt():nt()),($,[j])=>{const B=Rt(kt.errorBag.value),de=[...new Set([...Rt($.results),...d.value.map(we=>we.path),...B])].sort().reduce((we,he)=>{var Re;const Qe=he,ut=ne(Qe)||z(Qe),We=((Re=$.results[Qe])===null||Re===void 0?void 0:Re.errors)||[],dt=je(ut?.path)||Qe,_t=Zf({errors:We,valid:!We.length},we.results[dt]);return we.results[dt]=_t,_t.valid||(we.errors[dt]=_t.errors[0]),ut&&m.value[dt]&&delete m.value[dt],ut?(ut.valid=_t.valid,j==="silent"||j==="validated-only"&&!ut.validated||k(ut,_t.errors),we):(k(dt,We),we)},{valid:$.valid,results:{},errors:{},source:$.source});return $.values&&(de.values=$.values,de.source=$.source),Rt(de.results).forEach(we=>{var he;const Re=ne(we);Re&&j!=="silent"&&(j==="validated-only"&&!Re.validated||k(Re,(he=de.results[we])===null||he===void 0?void 0:he.errors))}),de});function ee($){d.value.forEach($)}function ne($){const j=typeof $=="string"?ia($):$;return typeof j=="string"?g.value[j]:j}function z($){return d.value.filter(B=>$.startsWith(je(B.path))).reduce((B,re)=>B?re.path.length>B.path.length?re:B:re,void 0)}let oe=[],$e;function se($){return oe.push($),$e||($e=Nt(()=>{[...oe].sort().reverse().forEach(B=>{is(u,B)}),oe=[],$e=null})),$e}function D($){return function(B,re){return function(we){return we instanceof Event&&(we.preventDefault(),we.stopPropagation()),ee(he=>he.touched=!0),r.value=!0,s.value++,Q().then(he=>{const Re=Ye(u);if(he.valid&&typeof B=="function"){const Qe=Ye(Le.value);let ut=$?Qe:Re;return he.values&&(ut=he.source==="schema"?he.values:Object.assign({},ut,he.values)),B(ut,{evt:we,controlledValues:Qe,setErrors:y,setFieldError:k,setTouched:Y,setFieldTouched:S,setValues:dn,setFieldValue:Et,resetForm:te,resetField:U})}!he.valid&&typeof re=="function"&&re({values:Re,evt:we,errors:he.errors,results:he.results})}).then(he=>(r.value=!1,he),he=>{throw r.value=!1,he})}}}const Ge=D(!1);Ge.withControlled=D(!0);function Ft($,j){const B=d.value.findIndex(de=>de.path===$&&(Array.isArray(de.id)?de.id.includes(j):de.id===j)),re=d.value[B];if(!(B===-1||!re)){if(Nt(()=>{H($,{mode:"silent",warn:!1})}),re.multiple&&re.fieldsCount&&re.fieldsCount--,Array.isArray(re.id)){const de=re.id.indexOf(j);de>=0&&re.id.splice(de,1),delete re.__flags.pendingUnmount[j]}(!re.multiple||re.fieldsCount<=0)&&(d.value.splice(B,1),J($),p(),delete g.value[$])}}function Xt($){Rt(g.value).forEach(j=>{j.startsWith($)&&delete g.value[j]}),d.value=d.value.filter(j=>!j.path.startsWith($)),Nt(()=>{p()})}const kt={name:o,formId:n,values:u,controlledValues:Le,errorBag:x,errors:A,schema:Te,submitCount:s,meta:me,isSubmitting:r,isValidating:l,fieldArrays:i,keepValuesOnUnmount:N,validateSchema:b(Te)?qe:void 0,validate:Q,setFieldError:k,validateField:H,setFieldValue:Et,setValues:dn,setErrors:y,setFieldTouched:S,setTouched:Y,resetForm:te,resetField:U,handleSubmit:Ge,useFieldModel:Ie,defineInputBinds:Fe,defineComponentBinds:it,defineField:Me,stageInitialValue:ge,unsetInitialValue:J,setFieldInitialValue:ae,createPathState:tt,getPathState:ne,unsetPathValue:se,removePathState:Ft,initialValues:le,getAllPathStates:()=>d.value,destroyPath:Xt,isFieldTouched:V,isFieldDirty:F,isFieldValid:q};function Et($,j,B=!0){const re=Ye(j),de=typeof $=="string"?$:$.path;ne(de)||tt(de),pn(u,de,re),B&&H(de)}function oa($,j=!0){Rt(u).forEach(B=>{delete u[B]}),Rt($).forEach(B=>{Et(B,$[B],!1)}),j&&Q()}function dn($,j=!0){Uo(u,$),i.forEach(B=>B&&B.reset()),j&&Q()}function aa($,j){const B=ne(je($))||tt($);return w({get(){return B.value},set(re){var de;const we=je($);Et(we,re,(de=je(j))!==null&&de!==void 0?de:!1)}})}function S($,j){const B=ne($);B&&(B.touched=j)}function V($){const j=ne($);return j?j.touched:d.value.filter(B=>B.path.startsWith($)).some(B=>B.touched)}function F($){const j=ne($);return j?j.dirty:d.value.filter(B=>B.path.startsWith($)).some(B=>B.dirty)}function q($){const j=ne($);return j?j.valid:d.value.filter(B=>B.path.startsWith($)).every(B=>B.valid)}function Y($){if(typeof $=="boolean"){ee(j=>{j.touched=$});return}Rt($).forEach(j=>{S(j,!!$[j])})}function U($,j){var B;const re=j&&"value"in j?j.value:gn(le.value,$),de=ne($);de&&(de.__flags.pendingReset=!0),ae($,Ye(re),!0),Et($,re,!1),S($,(B=j?.touched)!==null&&B!==void 0?B:!1),k($,j?.errors||[]),Nt(()=>{de&&(de.__flags.pendingReset=!1)})}function te($,j){let B=Ye($?.values?$.values:ie.value);B=j?.force?B:Uo(ie.value,B),B=Nn(Te)&&Jt(Te.cast)?Te.cast(B):B,L(B,{force:j?.force}),ee(re=>{var de;re.__flags.pendingReset=!0,re.validated=!1,re.touched=((de=$?.touched)===null||de===void 0?void 0:de[je(re.path)])||!1,Et(je(re.path),gn(B,je(re.path)),!1),k(je(re.path),void 0)}),j?.force?oa(B,!1):dn(B,!1),y($?.errors||{}),s.value=$?.submitCount||0,Nt(()=>{Q({mode:"silent"}),ee(re=>{re.__flags.pendingReset=!1})})}async function Q($){const j=$?.mode||"force";if(j==="force"&&ee(he=>he.validated=!0),kt.validateSchema)return kt.validateSchema(j);l.value=!0;const B=await Promise.all(d.value.map(he=>he.validate?he.validate($).then(Re=>({key:je(he.path),valid:Re.valid,errors:Re.errors,value:Re.value})):Promise.resolve({key:je(he.path),valid:!0,errors:[],value:void 0})));l.value=!1;const re={},de={},we={};for(const he of B)re[he.key]={valid:he.valid,errors:he.errors},he.value&&pn(we,he.key,he.value),he.errors.length&&(de[he.key]=he.errors[0]);return{valid:B.every(he=>he.valid),results:re,errors:de,values:we,source:"fields"}}async function H($,j){var B;const re=ne($);if(re&&j?.mode!=="silent"&&(re.validated=!0),Te){const{results:de}=await qe(j?.mode||"validated-only");return de[$]||{errors:[],valid:!0}}return re?.validate?re.validate(j):(!re&&(B=j?.warn),Promise.resolve({errors:[],valid:!0}))}function J($){is(le.value,$)}function ge($,j,B=!1){ae($,j),pn(u,$,j),B&&!e?.initialValues&&pn(ie.value,$,Ye(j))}function ae($,j,B=!1){pn(le.value,$,Ye(j)),B&&pn(ie.value,$,Ye(j))}async function ve(){const $=b(Te);if(!$)return{valid:!0,results:{},errors:{},source:"none"};l.value=!0;const j=Li($)||Nn($)?await zf($,u):await Kf($,u,{names:T.value,bailsMap:Z.value});return l.value=!1,j}const Se=Ge(($,{evt:j})=>{Of(j)&&j.target.submit()});bt(()=>{if(e?.initialErrors&&y(e.initialErrors),e?.initialTouched&&Y(e.initialTouched),e?.validateOnMount){Q();return}kt.validateSchema&&kt.validateSchema("silent")}),ce(Te)&&lt(Te,()=>{var $;($=kt.validateSchema)===null||$===void 0||$.call(kt,"validated-only")}),Ma(Sf,kt);function Me($,j){const B=Jt(j)?void 0:j?.label,re=ne(je($))||tt($,{label:B}),de=()=>Jt(j)?j(ua(re,da)):j||{};function we(){var We;re.touched=!0,((We=de().validateOnBlur)!==null&&We!==void 0?We:So().validateOnBlur)&&H(je(re.path))}function he(){var We;((We=de().validateOnInput)!==null&&We!==void 0?We:So().validateOnInput)&&Nt(()=>{H(je(re.path))})}function Re(){var We;((We=de().validateOnChange)!==null&&We!==void 0?We:So().validateOnChange)&&Nt(()=>{H(je(re.path))})}const Qe=w(()=>{const We={onChange:Re,onInput:he,onBlur:we};return Jt(j)?Object.assign(Object.assign({},We),j(ua(re,da)).props||{}):j?.props?Object.assign(Object.assign({},We),j.props(ua(re,da))):We});return[aa($,()=>{var We,dt,_t;return(_t=(We=de().validateOnModelUpdate)!==null&&We!==void 0?We:(dt=So())===null||dt===void 0?void 0:dt.validateOnModelUpdate)!==null&&_t!==void 0?_t:!0}),Qe]}function Ie($){return Array.isArray($)?$.map(j=>aa(j,!0)):aa($)}function Fe($,j){const[B,re]=Me($,j);function de(){re.value.onBlur()}function we(Re){const Qe=cs(Re);Et(je($),Qe,!1),re.value.onInput()}function he(Re){const Qe=cs(Re);Et(je($),Qe,!1),re.value.onChange()}return w(()=>Object.assign(Object.assign({},re.value),{onBlur:de,onInput:we,onChange:he,value:B.value}))}function it($,j){const[B,re]=Me($,j),de=ne(je($));function we(he){B.value=he}return w(()=>{const he=Jt(j)?j(ua(de,da)):j||{};return Object.assign({[he.model||"modelValue"]:B.value,[`onUpdate:${he.model||"modelValue"}`]:we},re.value)})}const ot=Object.assign(Object.assign({},kt),{values:Zr(u),handleReset:()=>te(),submitForm:Se});return Ma(xf,ot),ot}function Qf(e,t,n,o){const a={touched:"some",pending:"some",valid:"every"},r=w(()=>!Ao(t,b(n)));function l(){const i=e.value;return Rt(a).reduce((u,d)=>{const m=a[d];return u[d]=i[m](g=>g[d]),u},{})}const s=_n(l());return Un(()=>{const i=l();s.touched=i.touched,s.valid=i.valid,s.pending=i.pending}),w(()=>Object.assign(Object.assign({initialValues:b(n)},s),{valid:s.valid&&!Rt(o.value).length,dirty:r.value}))}function Xf(e,t,n){const o=Gi(n),a=fe(o),r=fe(Ye(o));function l(s,i){i?.force?(a.value=Ye(s),r.value=Ye(s)):(a.value=Uo(Ye(a.value)||{},Ye(s)),r.value=Uo(Ye(r.value)||{},Ye(s))),i?.updateFields&&e.value.forEach(u=>{if(u.touched)return;const m=gn(a.value,je(u.path));pn(t,je(u.path),Ye(m))})}return{initialValues:a,originalInitialValues:r,setInitialValues:l}}function Zf(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}var Cr;function pl(e){return{lang:e?.lang??Cr?.lang,message:e?.message,abortEarly:e?.abortEarly??Cr?.abortEarly,abortPipeEarly:e?.abortPipeEarly??Cr?.abortPipeEarly}}var ep;function tp(e){return ep?.get(e)}var np;function op(e){return np?.get(e)}var ap;function rp(e,t){return ap?.get(e)?.get(t)}function ml(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function Wt(e,t,n,o,a){const r=a&&"input"in a?a.input:n.value,l=a?.expected??e.expects??null,s=a?.received??ml(r),i={kind:e.kind,type:e.type,input:r,expected:l,received:s,message:`Invalid ${t}: ${l?`Expected ${l} but r`:"R"}eceived ${s}`,requirement:e.requirement,path:a?.path,issues:a?.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},u=e.kind==="schema",d=a?.message??e.message??rp(e.reference,i.lang)??(u?op(i.lang):null)??o.message??tp(i.lang);d!==void 0&&(i.message=typeof d=="function"?d(i):d),u&&(n.typed=!1),n.issues?n.issues.push(i):n.issues=[i]}function Dn(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},pl())}}}function Qi(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}function lp(e){if(e.path){let t="";for(const n of e.path)if(typeof n.key=="string"||typeof n.key=="number")t?t+=`.${n.key}`:t+=n.key;else return null;return t}return null}function po(e,t){return{kind:"validation",type:"check",reference:po,async:!1,expects:null,requirement:e,message:t,"~run"(n,o){return n.typed&&!this.requirement(n.value)&&Wt(this,"input",n,o),n}}}function Gt(e){return{kind:"validation",type:"non_empty",reference:Gt,async:!1,expects:"!0",message:e,"~run"(t,n){return t.typed&&t.value.length===0&&Wt(this,"length",t,n,{received:"0"}),t}}}function sp(e,t){if(e.issues)for(const n of t)for(const o of e.issues){let a=!1;const r=Math.min(n.length,o.path?.length??0);for(let l=0;l<r;l++)if(n[l]!==o.path[l].key&&(n[l]!=="$"||o.path[l].type!=="array")){a=!0;break}if(!a)return!1}return!0}function mo(e,t,n){return{kind:"validation",type:"partial_check",reference:mo,async:!1,expects:null,paths:e,requirement:t,message:n,"~run"(o,a){return(o.typed||sp(o,e))&&!this.requirement(o.value)&&Wt(this,"input",o,a),o}}}function ip(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Xo(e,t){return{...e,"~run"(n,o){const a=n.issues&&[...n.issues];if(n=e["~run"](n,o),n.issues){for(const r of n.issues)if(!a?.includes(r)){let l=n.value;for(const s of t){const i=l[s],u={type:"unknown",origin:"value",input:l,key:s,value:i};if(r.path?r.path.push(u):r.path=[u],!i)break;l=i}}}return n}}}function vl(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function rn(e){return{kind:"schema",type:"boolean",reference:rn,expects:"boolean",async:!1,message:e,get"~standard"(){return Dn(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:Wt(this,"type",t,n),t}}}function ya(e,t){return{kind:"schema",type:"literal",reference:ya,expects:ml(e),async:!1,literal:e,message:t,get"~standard"(){return Dn(this)},"~run"(n,o){return n.value===this.literal?n.typed=!0:Wt(this,"type",n,o),n}}}function hl(e){return{kind:"schema",type:"number",reference:hl,expects:"number",async:!1,message:e,get"~standard"(){return Dn(this)},"~run"(t,n){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:Wt(this,"type",t,n),t}}}function At(e,t){return{kind:"schema",type:"object",reference:At,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Dn(this)},"~run"(n,o){const a=n.value;if(a&&typeof a=="object"){n.typed=!0,n.value={};for(const r in this.entries){const l=this.entries[r];if(r in a||(l.type==="exact_optional"||l.type==="optional"||l.type==="nullish")&&l.default!==void 0){const s=r in a?a[r]:vl(l),i=l["~run"]({value:s},o);if(i.issues){const u={type:"object",origin:"value",input:a,key:r,value:s};for(const d of i.issues)d.path?d.path.unshift(u):d.path=[u],n.issues?.push(d);if(n.issues||(n.issues=i.issues),o.abortEarly){n.typed=!1;break}}i.typed||(n.typed=!1),n.value[r]=i.value}else if(l.fallback!==void 0)n.value[r]=ip(l);else if(l.type!=="exact_optional"&&l.type!=="optional"&&l.type!=="nullish"&&(Wt(this,"key",n,o,{input:void 0,expected:`"${r}"`,path:[{type:"object",origin:"key",input:a,key:r,value:a[r]}]}),o.abortEarly))break}}else Wt(this,"type",n,o);return n}}}function Xi(e,t){return{kind:"schema",type:"optional",reference:Xi,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Dn(this)},"~run"(n,o){return n.value===void 0&&(this.default!==void 0&&(n.value=vl(this,n,o)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,o)}}}function yt(e,t){return{kind:"schema",type:"picklist",reference:yt,expects:Qi(e.map(ml),"|"),async:!1,options:e,message:t,get"~standard"(){return Dn(this)},"~run"(n,o){return this.options.includes(n.value)?n.typed=!0:Wt(this,"type",n,o),n}}}function Xe(e){return{kind:"schema",type:"string",reference:Xe,expects:"string",async:!1,message:e,get"~standard"(){return Dn(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:Wt(this,"type",t,n),t}}}function Zi(e,t,n){return{kind:"schema",type:"variant",reference:Zi,expects:"Object",async:!1,key:e,options:t,message:n,get"~standard"(){return Dn(this)},"~run"(o,a){const r=o.value;if(r&&typeof r=="object"){let l,s=0,i=this.key,u=[];const d=(m,g)=>{for(const p of m.options){if(p.type==="variant")d(p,new Set(g).add(p.key));else{let k=!0,y=0;for(const x of g){const A=p.entries[x];if(x in r?A["~run"]({typed:!1,value:r[x]},{abortEarly:!0}).issues:A.type!=="exact_optional"&&A.type!=="optional"&&A.type!=="nullish"){k=!1,i!==x&&(s<y||s===y&&x in r&&!(i in r))&&(s=y,i=x,u=[]),i===x&&u.push(p.entries[x].expects);break}y++}if(k){const x=p["~run"]({value:r},a);(!l||!l.typed&&x.typed)&&(l=x)}}if(l&&!l.issues)break}};if(d(this,new Set([this.key])),l)return l;Wt(this,"type",o,a,{input:r[i],expected:Qi(u,"|"),path:[{type:"object",origin:"value",input:r,key:i,value:r[i]}]})}else Wt(this,"type",o,a);return o}}}function wt(...e){return{...e[0],pipe:e,get"~standard"(){return Dn(this)},"~run"(t,n){for(const o of e)if(o.kind!=="metadata"){if(t.issues&&(o.kind==="schema"||o.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=o["~run"](t,n))}return t}}}function up(e,t,n){const o=e["~run"]({value:t},pl(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}async function dp(e,t,n){const o=await e["~run"]({value:t},pl(n));return{typed:o.typed,success:!o.issues,output:o.value,issues:o.issues}}/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */const Fa=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function eu(e){return Number(e)>=0}function cp(e){return typeof e=="object"&&e!==null}function fp(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function ps(e){if(!cp(e)||fp(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function tu(e,t){return Object.keys(t).forEach(n=>{if(ps(t[n])&&ps(e[n])){e[n]||(e[n]={}),tu(e[n],t[n]);return}e[n]=t[n]}),e}function pp(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let o=1;o<t.length;o++){if(eu(t[o])){n+=`[${t[o]}]`;continue}n+=`.${t[o]}`}return n}function Vn(e,t){return{__type:"VVTypedSchema",async parse(o){const a=await dp(e,o,t);if(a.success)return{value:a.output,errors:[]};const r={};return nu(a.issues,r),{errors:Object.values(r)}},cast(o){if(e.async)return o;const a=up(e,o,t);if(a.success)return a.output;const r=vl(Xi(e));return Fa(r)&&Fa(o)?tu(r,o):o},describe(o){try{if(!o)return{required:!ms(e),exists:!0};const a=Br(o,e);return a?{required:!ms(a),exists:!0}:{required:!1,exists:!1}}catch{return{required:!1,exists:!1}}}}}function nu(e,t){e.forEach(n=>{const o=pp(lp(n)||"");n.issues&&(nu(n.issues.flatMap(a=>a.issues||[]),t),!o)||(t[o]||(t[o]={errors:[],path:o}),t[o].errors.push(n.message))})}function Br(e,t){var n,o,a,r;if(vs(t))return(n=t.options.map(i=>Br(e,i)).find(Boolean))!==null&&n!==void 0?n:null;if(hs(t))return(o=t.options.map(i=>Br(e,i)).find(Boolean))!==null&&o!==void 0?o:null;if(!ca(t))return null;if(Qo(e))return t.entries[er(e)];const l=(e||"").split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<=l.length;i++){const u=l[i];if(!u||!s)return s;if(vs(s)&&(s=(a=s.options.find(d=>ca(d)&&d.entries[u]))!==null&&a!==void 0?a:s),hs(s)&&(s=(r=s.options.find(d=>ca(d)&&d.entries[u]))!==null&&r!==void 0?r:s),ca(s)){s=s.entries[u]||null;continue}eu(u)&&mp(s)&&(s=s.item)}return null}function ms(e){return e.type==="optional"}function mp(e){return Fa(e)&&"item"in e}function ca(e){return Fa(e)&&"entries"in e}function vs(e){return e.type==="intersect"}function hs(e){return e.type==="variant"}const vp=["placeholder","disabled","min","max"],hp=I({__name:"ObsidianNumberInput",props:Ut({placeholder:{},disabled:{type:Boolean},min:{},max:{},narrow:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((v(),C("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"number",class:$t({"narrow-input":n.narrow}),placeholder:n.placeholder,disabled:n.disabled,min:n.min,max:n.max,spellcheck:"false"},null,10,vp)),[[Go,t.value]])}}),ln=ye(hp,[["__scopeId","data-v-d49aaf69"]]);function ou(e,t,n){const o=fe([]),a=pe();return Un(()=>{const r=K(e.value);if(!r.isValid())return;a.calendarSettings.dow;const l=Oe(),s=r.clone().startOf("month").startOf("week"),i=r.clone().endOf("month").endOf("week"),u=a.calendarViewSettings.weeks||"left",d=t?.value?K(t.value):null,m=n?.value?K(n.value):null,g=[],p=s.clone();for(;p.isSameOrBefore(i);)u==="left"&&p.isSame(p.clone().startOf("week"),"day")&&g.push({date:p.format("[W]w"),key:p.format(_e),outside:!1,isWeekNumber:!0,disabled:!!d&&p.clone().endOf("week").isBefore(d,"day")||!!m&&p.clone().startOf("week").isAfter(m,"day")}),g.push({date:p.format("D"),key:p.format(_e),today:p.isSame(l,"day"),outside:!r.isSame(p,"month"),isWeekNumber:!1,disabled:!!d&&p.isBefore(d,"day")||!!m&&p.isAfter(m,"day")}),u==="right"&&p.isSame(p.clone().endOf("week"),"day")&&g.push({date:p.clone().startOf("week").format("[W]w"),key:p.clone().startOf("week").format(_e),outside:!1,isWeekNumber:!0,disabled:!!d&&p.clone().endOf("week").isBefore(d,"day")||!!m&&p.clone().startOf("week").isAfter(m,"day")}),p.add(1,"day");o.value=g}),{grid:o}}const lo=I({__name:"FormattedDate",props:{date:{},format:{}},setup(e){const t=w(()=>typeof e.date=="string"?K(e.date):e.date);return(n,o)=>(v(),C("span",null,P(t.value.format(n.format)),1))}}),gs=Zi("type",[At({type:ya("transparent")}),At({type:ya("theme"),name:Xe()}),At({type:ya("custom"),color:Xe()})]);function Vt(e){switch(e.type){case"transparent":return"transparent";case"theme":return`var(--${e.name})`;case"custom":return e.color}}const gp={class:"calendar"},yp={class:"calendar-header"},wp={class:"calendar-grid"},bp=I({__name:"CalendarGrid",props:{columns:{},compactFirstLine:{type:Boolean}},setup(e){Fn(s=>({"01aca16e":s.columns,"526e3e82":l.value,"7ba77d1e":n.value,"635b4840":o.value,"1f290d0e":a.value,baf56b3a:r.value}));const t=pe(),n=w(()=>Vt(t.calendarViewSettings.todayStyle.color)),o=w(()=>Vt(t.calendarViewSettings.todayStyle.background)),a=w(()=>Vt(t.calendarViewSettings.activeStyle.color)),r=w(()=>Vt(t.calendarViewSettings.activeStyle.background)),l=w(()=>e.compactFirstLine?"1.2em repeat(auto-fill, 28px)":"repeat(auto-fill, 28px)");return(s,i)=>(v(),C("div",gp,[h("div",yp,[ze(s.$slots,"header",{},void 0,!0)]),h("div",wp,[ze(s.$slots,"default",{},void 0,!0)])]))}}),vo=ye(bp,[["__scopeId","data-v-063a3437"]]),kp=["disabled"],_p=I({__name:"CalendarButton",props:{disabled:{type:Boolean},clickable:{type:Boolean}},setup(e){return(t,n)=>(v(),C("button",{disabled:t.disabled,class:$t({clickable:t.clickable})},[ze(t.$slots,"default",{},void 0,!0)],10,kp))}}),Zo=ye(_p,[["__scopeId","data-v-8cc1c4aa"]]);function Cp(){const e=fe([]),t=pe();return lt(()=>t.calendarSettings.dow,()=>{const n=Oe().startOf("week"),o=n.clone().endOf("week"),a=[];for(;n.isSameOrBefore(o);)a.push(n.format("ddd")),n.add(1,"day");e.value=a},{immediate:!0}),e}const Sp={key:0},xp={key:1},Dp=I({__name:"CalendarWeekdays",setup(e){const t=pe(),n=Cp();return(o,a)=>(v(),C(W,null,[b(t).calendarViewSettings.weeks==="left"?(v(),C("div",Sp)):R("",!0),(v(!0),C(W,null,Ce(b(n),r=>(v(),C("div",{key:r,class:"week-day"},[h("span",null,P(r),1)]))),128)),b(t).calendarViewSettings.weeks==="right"?(v(),C("div",xp)):R("",!0)],64))}}),gl=ye(Dp,[["__scopeId","data-v-aa55b3de"]]),Vp=I({__name:"CalendarMonthView",props:{refDate:{},selectedDate:{},min:{},max:{}},emits:["select"],setup(e){const t=pe(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{grid:o}=ou(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(a,r)=>(v(),E(vo,{columns:n.value,"compact-first-line":""},{header:f(()=>[ze(a.$slots,"header",{},()=>[c(lo,{date:a.refDate,format:"MMMM YYYY"},null,8,["date"])])]),default:f(()=>[c(gl),(v(!0),C(W,null,Ce(b(o),l=>(v(),E(Zo,{key:l.key+(l.isWeekNumber?"week":"day"),clickable:!l.disabled,disabled:l.disabled,"data-outside":l.outside||null,"data-today":l.today||null,"data-selected":a.selectedDate===l.key||null,onClick:s=>a.$emit("select",l.key,s)},{default:f(()=>[_(P(l.date),1)]),_:2},1032,["clickable","disabled","data-outside","data-today","data-selected","onClick"]))),128))]),_:3},8,["columns"]))}});function jp(e,t,n){const o=fe([]),a=pe(),r=w(()=>K(e.value));return Un(()=>{if(!r.value.isValid())return;a.calendarSettings.dow;const l=[],s=t?.value?K(t.value):null,i=n?.value?K(n.value):null;for(let u=0;u<4;u++){const d=r.value.clone().quarter(u);l.push({date:d.format(Ui.quarter),key:d.format(_e),disabled:!!s&&d.clone().endOf("quarter").isBefore(s)||!!i&&d.isAfter(i)})}o.value=l}),{grid:o}}const $p={class:"calendar-quarter-grid"},Mp=I({__name:"CalendarQuarterView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=jp(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(n,o)=>(v(),E(vo,{columns:2},{header:f(()=>[ze(n.$slots,"header",{},()=>[c(lo,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[h("div",$p,[(v(!0),C(W,null,Ce(b(t),a=>(v(),E(Zo,{key:a.key,clickable:"","data-selected":b(dl)("quarter",a.date,n.refDate)||null,onClick:r=>n.$emit("select",a.key)},{default:f(()=>[_(P(a.date),1)]),_:2},1032,["data-selected","onClick"]))),128))])]),_:3}))}});function Np(e,t,n){const o=fe([]),a=pe();return Un(()=>{const r=K(e.value);if(!r.isValid())return;a.calendarSettings.dow;const l=r.clone().startOf("year"),s=r.clone().endOf("year"),i=t?.value?K(t.value):void 0,u=n?.value?K(n.value):void 0,d=[],m=l.clone();for(;m.isSameOrBefore(s);)d.push({date:m.format("MMMM"),key:m.format(_e),disabled:!!i&&m.clone().endOf("year").isBefore(i)||!!u&&m.clone().startOf("year").isAfter(u)}),m.add(1,"month");o.value=d}),{grid:o}}const Op=I({__name:"CalendarYearView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t}=Np(w(()=>e.refDate),w(()=>e.min),w(()=>e.max));return(n,o)=>(v(),E(vo,{columns:3},{header:f(()=>[ze(n.$slots,"header",{},()=>[c(lo,{date:n.refDate,format:"YYYY"},null,8,["date"])])]),default:f(()=>[(v(!0),C(W,null,Ce(b(t),a=>(v(),E(Zo,{key:a.key,clickable:"","data-selected":b(dl)("month",a.date,n.refDate)||null,onClick:r=>n.$emit("select",a.key)},{default:f(()=>[_(P(a.date),1)]),_:2},1032,["data-selected","onClick"]))),128))]),_:3}))}});function Ap(e,t,n){const o=fe([]),a=w(()=>K(e.value)),r=w(()=>a.value.year()-a.value.year()%10),l=w(()=>r.value+9);return Un(()=>{if(!a.value.isValid())return;const s=[];for(let i=r.value-1;i<=l.value+1;i++){const u=a.value.clone().year(i);s.push({date:u.format("YYYY"),key:u.format(_e),outside:i<r.value||i>l.value,disabled:!1})}o.value=s}),{grid:o,startYear:r,endYear:l}}const Tp=I({__name:"CalendarDecadeView",props:{refDate:{},min:{},max:{}},emits:["select"],setup(e){const{grid:t,startYear:n,endYear:o}=Ap(w(()=>e.refDate));return(a,r)=>(v(),E(vo,{columns:4},{header:f(()=>[ze(a.$slots,"header",{startYear:b(n),endYear:b(o)},()=>[h("div",null,P(b(n))+" - "+P(b(o)),1)])]),default:f(()=>[(v(!0),C(W,null,Ce(b(t),l=>(v(),E(Zo,{key:l.key,clickable:"","data-selected":b(dl)("year",l.date,a.refDate)||null,"data-outside":l.outside||null,onClick:s=>a.$emit("select",l.key)},{default:f(()=>[_(P(l.date),1)]),_:2},1032,["data-selected","data-outside","onClick"]))),128))]),_:3}))}}),au=I({__name:"DatePicker.modal",props:{selectedDate:{},picking:{},min:{},max:{}},emits:["select","close"],setup(e,{emit:t}){const n=e,o=t,a=fe("month");switch(n.picking){case"day":{a.value="month";break}case"week":{a.value="month";break}case"month":{a.value="month";break}case"quarter":{a.value="quarter";break}case"year":{a.value="decade";break}}const r=fe(n.selectedDate??Oe().format("YYYY-MM-DD")),l=w(()=>K(r.value).startOf("month"));function s(y="month"){r.value=y==="decade"?l.value.subtract(10,"year").format("YYYY-MM-DD"):l.value.subtract(1,y).format("YYYY-MM-DD")}function i(y="month"){if(!n.min)return!0;const x=K(n.min);return y==="decade"?l.value.clone().subtract(10,"year").isAfter(x,"year"):l.value.clone().subtract(1,y).endOf(y).isAfter(x)}function u(y="month"){r.value=y==="decade"?l.value.add(10,"year").format("YYYY-MM-DD"):l.value.add(1,y).format("YYYY-MM-DD")}function d(y="month"){if(!n.max)return!0;const x=K(n.max);return y==="decade"?l.value.clone().add(10,"year").isBefore(x,"year"):l.value.clone().add(1,y).startOf(y).isBefore(x)}function m(y){n.picking==="week"?o("select",K(r.value).startOf("week").format("YYYY-MM-DD")):o("select",y),o("close")}function g(y){n.picking==="month"?(o("select",y),o("close")):(r.value=y,a.value="month")}function p(y){n.picking==="quarter"?(o("select",y),o("close")):(r.value=y,a.value="month")}function k(y){n.picking==="year"?(o("select",y),o("close")):(r.value=y,a.value=n.picking==="quarter"?"quarter":"year")}return(y,x)=>a.value==="decade"?(v(),E(Tp,{key:0,"ref-date":r.value,min:y.min,max:y.max,onSelect:k},{header:f(({startYear:A,endYear:T})=>[c(be,{icon:"arrow-left",tooltip:"Previous decade",onClick:x[0]||(x[0]=Z=>s("decade"))}),_(" "+P(A)+" - "+P(T)+" ",1),c(be,{icon:"arrow-right",tooltip:"Next decade",onClick:x[1]||(x[1]=Z=>u("decade"))})]),_:1},8,["ref-date","min","max"])):a.value==="year"?(v(),E(Op,{key:1,"ref-date":r.value,min:y.min,max:y.max,onSelect:g},{header:f(()=>[i("year")?(v(),E(be,{key:0,icon:"arrow-left",tooltip:"Previous year",onClick:x[2]||(x[2]=A=>s("year"))})):R("",!0),c(ue,{onClick:x[3]||(x[3]=A=>a.value="decade")},{default:f(()=>[_(P(l.value.format("YYYY")),1)]),_:1}),d("year")?(v(),E(be,{key:1,icon:"arrow-right",tooltip:"Next year",onClick:x[4]||(x[4]=A=>u("year"))})):R("",!0)]),_:1},8,["ref-date","min","max"])):a.value==="quarter"?(v(),E(Mp,{key:2,"ref-date":r.value,min:y.min,max:y.max,onSelect:p},{header:f(()=>[i("quarter")?(v(),E(be,{key:0,icon:"arrow-left",tooltip:"Previous quarter",onClick:x[5]||(x[5]=A=>s("quarter"))})):R("",!0),c(ue,{onClick:x[6]||(x[6]=A=>a.value="year")},{default:f(()=>[c(lo,{date:r.value,format:"YYYY"},null,8,["date"])]),_:1}),d("quarter")?(v(),E(be,{key:1,icon:"arrow-right",tooltip:"Next quarter",onClick:x[7]||(x[7]=A=>u("quarter"))})):R("",!0)]),_:1},8,["ref-date","min","max"])):(v(),E(Vp,{key:3,"ref-date":r.value,"selected-date":y.selectedDate,min:y.min,max:y.max,onSelect:m},{header:f(()=>[i("month")?(v(),E(be,{key:0,icon:"arrow-left",tooltip:"Previous month",onClick:x[8]||(x[8]=A=>s("month"))})):R("",!0),c(ue,{onClick:x[9]||(x[9]=A=>a.value="year")},{default:f(()=>[c(lo,{date:r.value,format:"MMMM YYYY"},null,8,["date"])]),_:1}),d("month")?(v(),E(be,{key:1,icon:"arrow-right",tooltip:"Next month",onClick:x[10]||(x[10]=A=>u("month"))})):R("",!0)]),_:1},8,["ref-date","selected-date","min","max"]))}}),Fp=I({__name:"DatePicker",props:Ut({picking:{default:"day"},placeholder:{default:"Pick a date"},previewFormat:{default:"YYYY-MM-DD"},disabled:{type:Boolean},tooltip:{default:"Pick a date"},min:{default:""},max:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,n=pe(),o=Lt(e,"modelValue"),a=w(()=>o.value?K(o.value):null),r=w(()=>a.value?a.value.format(t.previewFormat):t.placeholder);function l(){new Ne(n,"Pick a date",au,{selectedDate:o.value,picking:t.picking,min:t.min,max:t.max,onSelect(s){o.value=s}},400).open()}return(s,i)=>(v(),E(ue,{class:"date-picker",disabled:s.disabled,tooltip:s.tooltip,onClick:l},{default:f(()=>[c(un,{name:"calendar"}),i[0]||(i[0]=_()),h("span",null,P(r.value),1)]),_:1},8,["disabled","tooltip"]))}}),To=ye(Fp,[["__scopeId","data-v-a9348bd1"]]),Ep={key:0,class:"journal-errors"},Pp=I({__name:"FormErrors",props:{errors:{}},setup(e){return(t,n)=>t.errors?(v(),C("ul",Ep,[(v(!0),C(W,null,Ce(t.errors,o=>(v(),C("li",{key:o},P(o),1))),128))])):R("",!0)}}),et=ye(Pp,[["__scopeId","data-v-c3a13f6e"]]);const yl=I({__name:"CreateJournal.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=pe();function a(Z){return!o.hasJournal(Z)}const{defineField:r,errorBag:l,handleSubmit:s}=xn({initialValues:{journalName:"",write:"day",every:"day",duration:1,anchorDate:""},validationSchema:Vn(wt(At({journalName:wt(Xe(),Gt("Journal name is required"),po(a,"Journal name should be unique")),write:yt(["day","week","month","quarter","year","custom"]),every:yt(["day","week","month","quarter","year"]),duration:hl(),anchorDate:Xe()}),Xo(mo([["write"],["anchorDate"]],Z=>Z.write==="custom"?!!Z.anchorDate:!0,"Please select an anchor date."),["anchorDate"])))}),[i,u]=r("journalName"),[d,m]=r("write"),[g,p]=r("every"),[k,y]=r("duration"),[x,A]=r("anchorDate"),T=s(Z=>{n("create",Z.journalName,Z.write==="custom"?{type:"custom",every:Z.every,duration:Z.duration,anchorDate:Z.anchorDate}:{type:Z.write}),n("close")});return(Z,O)=>(v(),C("form",{onSubmit:O[6]||(O[6]=Qt((...N)=>b(T)&&b(T)(...N),["prevent"]))},[c(M,{name:"Journal name"},{description:f(()=>[c(et,{errors:b(l).journalName},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(i),"onUpdate:modelValue":O[0]||(O[0]=N=>ce(i)?i.value=N:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),c(M,{name:"I'll be writing"},{default:f(()=>[c(Ve,De({modelValue:b(d),"onUpdate:modelValue":O[1]||(O[1]=N=>ce(d)?d.value=N:null)},b(m)),{default:f(()=>[...O[7]||(O[7]=[h("option",{value:"day"},"Daily",-1),h("option",{value:"week"},"Weekly",-1),h("option",{value:"month"},"Monthly",-1),h("option",{value:"quarter"},"Quarterly",-1),h("option",{value:"year"},"Annually",-1),h("option",{value:"custom"},"In custom intervals",-1)])]),_:1},16,["modelValue"])]),_:1}),b(d)==="custom"?(v(),E(M,{key:0,name:"Every"},{default:f(()=>[c(ln,De({modelValue:b(k),"onUpdate:modelValue":O[2]||(O[2]=N=>ce(k)?k.value=N:null)},b(y),{min:1}),null,16,["modelValue"]),c(Ve,De({modelValue:b(g),"onUpdate:modelValue":O[3]||(O[3]=N=>ce(g)?g.value=N:null)},b(p)),{default:f(()=>[...O[8]||(O[8]=[h("option",{value:"day"},"days",-1),h("option",{value:"week"},"weeks",-1),h("option",{value:"month"},"months",-1),h("option",{value:"quarter"},"quarters",-1),h("option",{value:"year"},"years",-1)])]),_:1},16,["modelValue"])]),_:1})):R("",!0),b(d)==="custom"?(v(),E(M,{key:1,name:"Start date"},{description:f(()=>[O[9]||(O[9]=_(" This date will be used to start counting intervals. It cannot be changed after creating journal. ",-1)),c(et,{errors:b(l).anchorDate},null,8,["errors"])]),default:f(()=>[c(To,De({modelValue:b(x),"onUpdate:modelValue":O[4]||(O[4]=N=>ce(x)?x.value=N:null)},b(A)),null,16,["modelValue"])]),_:1})):R("",!0),c(M,null,{default:f(()=>[c(ue,{onClick:O[5]||(O[5]=N=>n("close"))},{default:f(()=>[...O[10]||(O[10]=[_("Close",-1)])]),_:1}),c(ue,{cta:"",type:"submit",onClick:b(T)},{default:f(()=>[...O[11]||(O[11]=[_("Add",-1)])]),_:1},8,["onClick"])]),_:1})],32))}}),Ip=["data-open"],Rp={class:"collapsible-trigger-text"},Bp=I({__name:"CollapsibleBlock",props:Ut({defaultExpanded:{type:Boolean}},{expanded:{type:Boolean},expandedModifiers:{}}),emits:["update:expanded"],setup(e){const t=Lt(e,"expanded");e.defaultExpanded&&(t.value=!0);const o=w(()=>t.value?"chevron-down":"chevron-right");function a(){t.value=!t.value}return(r,l)=>(v(),C("div",{class:"collapsible-root","data-open":t.value||null},[h("div",{class:"collapsible-trigger",onClick:a},[c(un,{name:o.value},null,8,["name"]),h("span",Rp,[ze(r.$slots,"trigger",{},void 0,!0)]),h("span",{class:"collapsible-trigger-controls",onClick:l[0]||(l[0]=Qt(()=>{},["stop"]))},[ze(r.$slots,"controls",{},void 0,!0)])]),t.value?ze(r.$slots,"default",{key:0},void 0,!0):R("",!0)],8,Ip))}}),xt=ye(Bp,[["__scopeId","data-v-d5749829"]]),Yp={class:"iconed-row"},Up=I({__name:"IconedRow",props:{icon:{}},setup(e){return(t,n)=>(v(),C("div",Yp,[c(un,{name:t.icon},null,8,["name"]),h("div",null,[ze(t.$slots,"default",{},void 0,!0)])]))}}),Dt=ye(Up,[["__scopeId","data-v-faf0e4b0"]]),Wp={class:"flair"},Lp=I({__name:"JournalSettingsWithoutShelves",emits:["edit","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.journals);function r(){new Ne(o,"Add Journal",yl,{onCreate(l,s){o.createJournal(l,s),n("edit",l)}}).open()}return(l,s)=>(v(),E(xt,{"default-expanded":a.value.length>0},{trigger:f(()=>[c(Dt,{icon:"book-open"},{default:f(()=>[s[2]||(s[2]=_(" Journals ",-1)),h("span",Wp,P(a.value.length),1)]),_:1})]),controls:f(()=>[c(be,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:r})]),default:f(()=>[c(cl,{journals:a.value,onEdit:s[0]||(s[0]=i=>l.$emit("edit",i)),onBulkAdd:s[1]||(s[1]=i=>l.$emit("bulk-add",i))},null,8,["journals"])]),_:1},8,["default-expanded"]))}}),Jp=I({__name:"CreateShelf.modal",emits:["create","close"],setup(e,{emit:t}){const n=t,o=pe();function a(m){return!o.hasShelf(m)}const{defineField:r,errorBag:l,handleSubmit:s}=xn({initialValues:{name:""},validationSchema:Vn(At({name:wt(Xe(),Gt("Shelf name is required"),po(a,"Shelf name should be unique"))}))}),[i,u]=r("name"),d=s(m=>{n("create",m.name),n("close")});return(m,g)=>(v(),C("form",{onSubmit:g[2]||(g[2]=Qt((...p)=>b(d)&&b(d)(...p),["prevent"]))},[c(M,{name:"Shelf name"},{description:f(()=>[c(et,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(i),"onUpdate:modelValue":g[0]||(g[0]=p=>ce(i)?i.value=p:null),placeholder:"ex. Work"},b(u)),null,16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:g[1]||(g[1]=p=>n("close"))},{default:f(()=>[...g[3]||(g[3]=[_("Close",-1)])]),_:1}),c(ue,{cta:"",type:"submit",onClick:b(d)},{default:f(()=>[...g[4]||(g[4]=[_("Add",-1)])]),_:1},8,["onClick"])]),_:1})],32))}}),qp=["value"],Hp={key:1},zp=I({__name:"RemoveShelf.modal",props:{shelfName:{}},emits:["close","remove"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(""),r=w(()=>Object.values(o.shelves).filter(s=>s.name!==e.shelfName));function l(){n("remove",a.value),n("close")}return(s,i)=>(v(),C(W,null,[r.value.length>0?(v(),E(M,{key:0,name:"Move journals to"},{default:f(()=>[c(Ve,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=u=>a.value=u)},{default:f(()=>[i[2]||(i[2]=h("option",{value:""},"None",-1)),(v(!0),C(W,null,Ce(r.value,u=>(v(),C("option",{key:u.name,value:u.name},P(u.name),9,qp))),128))]),_:1},8,["modelValue"])]),_:1})):(v(),C("p",Hp,"Journals will be moved out")),c(M,null,{default:f(()=>[c(ue,{onClick:i[1]||(i[1]=u=>s.$emit("close"))},{default:f(()=>[...i[3]||(i[3]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",onClick:l},{default:f(()=>[...i[4]||(i[4]=[_("Remove",-1)])]),_:1})]),_:1})],64))}}),Kp={class:"flair"},Gp={class:"flair"},Qp=I({__name:"JournalSettingsWithShelves",emits:["organize","edit","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.journals.filter(i=>!i.isOnShelf));function r(){new Ne(o,"Add Journal Shelf",Jp,{onCreate(i){o.createShelf(i),n("organize",i)}}).open()}function l(i){new Ne(o,`Remove ${i} shelf`,zp,{shelfName:i,onRemove(u){o.removeShelf(i,u)}}).open()}function s(){new Ne(o,"Add Journal",yl,{onCreate(i,u){o.createJournal(i,u),n("edit",i)}}).open()}return(i,u)=>(v(),C(W,null,[c(xt,{"default-expanded":b(o).shelves.length>0},{trigger:f(()=>[c(Dt,{icon:"library"},{default:f(()=>[u[2]||(u[2]=_(" Journal shelves ",-1)),h("span",Kp,P(b(o).shelves.length),1)]),_:1})]),controls:f(()=>[c(be,{icon:"plus",cta:"",tooltip:"Create new shelf",onClick:r})]),default:f(()=>[b(o).shelves.length===0?(v(),E(M,{key:0},{description:f(()=>[...u[3]||(u[3]=[_(" No shelves configured yet. ",-1)])]),_:1})):(v(!0),C(W,{key:1},Ce(b(o).shelves,d=>(v(),E(M,{key:d.name},{name:f(()=>[h("b",null,P(d.name),1),u[4]||(u[4]=h("br",null,null,-1)),_(" "+P(d.journals.length)+" journals ",1)]),default:f(()=>[c(be,{icon:"library",tooltip:"Organize "+d.name,onClick:m=>i.$emit("organize",d.name)},null,8,["tooltip","onClick"]),c(be,{icon:"trash-2",tooltip:"Delete "+d.name,onClick:m=>l(d.name)},null,8,["tooltip","onClick"])]),_:2},1024))),128))]),_:1},8,["default-expanded"]),c(xt,{"default-expanded":a.value.length>0},{trigger:f(()=>[c(Dt,{icon:"book-open"},{default:f(()=>[u[5]||(u[5]=_(" Journals not on shelf ",-1)),h("span",Gp,P(a.value.length),1)]),_:1})]),controls:f(()=>[c(be,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:s})]),default:f(()=>[c(cl,{journals:a.value,onEdit:u[0]||(u[0]=d=>i.$emit("edit",d)),onBulkAdd:u[1]||(u[1]=d=>i.$emit("bulk-add",d))},null,8,["journals"])]),_:1},8,["default-expanded"])],64))}}),Xp=["disabled"],Zp=I({__name:"ObsidianColorPicker",props:Ut({disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue");return(n,o)=>Yn((v(),C("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a),type:"color",disabled:n.disabled,spellcheck:"false"},null,8,Xp)),[[Go,t.value]])}}),em={title:"Check title",tag:"Check tags",property:"Check frontmatter property",date:"Check date",weekday:"Check weekday",offset:"Check interval offset","has-note":"Check if note exists","has-open-task":"Check if note has open tasks","all-tasks-completed":"Check if all tasks are completed"},tm={"background-primary":"Primary background","background-primary-alt":"Background for surfaces on top of primary background","background-secondary":"Secondary background","background-secondary-alt":"Background for surfaces on top of secondary background","background-modifier-hover":"Hovered elements","background-modifier-active-hover":"Active hovered elements","background-modifier-border":"Border color","background-modifier-border-hover":"Border color (hover)","background-modifier-border-focus":"Border color (focus)","background-modifier-error-rgb":"Error background, RGB value","background-modifier-error":"Error background","background-modifier-error-hover":"Error background (hover)","background-modifier-success-rgb":"Success background, RGB value","background-modifier-success":"Success background","background-modifier-message":"Messages background","interactive-normal":"Background for standard interactive elements","interactive-hover":"Background for standard interactive elements (hover)","interactive-accent":"Background for accented interactive elements","interactive-accent-hover":"Background for accented interactive elements (hover)","text-normal":"Normal text","text-muted":"Muted text","text-faint":"Faint text","text-on-accent":"Text on accent background when accent is dark","text-on-accent-inverted":"Text on accent background when accent is light","text-success":"Success text","text-warning":"Warning text","text-error":"Error text","text-accent":"Accent text","text-accent-hover":"Accent text (hover)","text-selection":"Selected text background","text-highlight-bg":"Highlighted text background","caret-color":"Caret color"},nm={class:"color-picker"},om=["value"],am=I({__name:"ColorPicker",props:{modelValue:{default:()=>({type:"transparent"})},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue"),n=w({get:()=>t.value.type,set(l){switch(l){case"transparent":{t.value={type:"transparent"};break}case"custom":{t.value={type:"custom",color:"#000000"};break}case"theme":{t.value={type:"theme",name:"text-normal"};break}}}}),o=w({get:()=>t.value.type==="theme"?t.value.name:"",set(l){t.value.type==="theme"&&(t.value={type:"theme",name:l})}}),a=w({get:()=>t.value.type==="custom"?t.value.color:"",set(l){t.value.type==="custom"&&(t.value={type:"custom",color:l})}}),r=w(()=>t.value.type==="theme"?{background:`var(--${t.value.name})`}:{});return(l,s)=>(v(),C("div",nm,[c(Ve,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i)},{default:f(()=>[...s[3]||(s[3]=[h("option",{value:"transparent"},"Transparent",-1),h("option",{value:"theme"},"Theme",-1),h("option",{value:"custom"},"Custom",-1)])]),_:1},8,["modelValue"]),n.value==="theme"?(v(),E(Ve,{key:0,modelValue:o.value,"onUpdate:modelValue":s[1]||(s[1]=i=>o.value=i),class:"theme-dropdown"},{default:f(()=>[(v(!0),C(W,null,Ce(b(tm),(i,u)=>(v(),C("option",{key:u,value:u},P(i),9,om))),128))]),_:1},8,["modelValue"])):R("",!0),n.value==="theme"?(v(),C("div",{key:1,class:"theme-preview",style:uo(r.value)},null,4)):R("",!0),n.value==="custom"?(v(),E(Zp,{key:2,modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=i=>a.value=i)},null,8,["modelValue"])):R("",!0)]))}}),Bt=ye(am,[["__scopeId","data-v-67b2b8ef"]]);function jt(e){return JSON.parse(JSON.stringify(e))}function rm(e){return new Promise(t=>setTimeout(t,e))}function tr(e){throw new Error("Unexpected value")}function lm(e){if(e.type==="custom")return`every ${e.duration} ${e.every}s`;switch(e.type){case"day":return"daily";case"week":return"weekly";case"month":return"monthly";case"quarter":return"quarterly";case"year":return"annually"}return""}function sm(e){switch(e.type){case"title":return`title ${e.condition} ${e.value}`;case"tag":return`tag ${e.condition} ${e.value}`;case"property":return`property ${e.name} ${e.condition} ${e.value}`;case"date":return`date is ${e.day}-${e.month}-${e.year??"any year"}`;case"weekday":return`weekday is any of ${e.weekdays.map(t=>X.moment().localeData().weekdaysShort()[t]).join(", ")}`;case"offset":return`date is ${e.offset<0?-e.offset:e.offset} days away from interval ${e.offset<0?"end":"start"}`;case"has-note":return"there is a note connected to a date";case"has-open-task":return"note connected to a date has an open task";case"all-tasks-completed":return"all tasks in note connected to date are completed";default:return tr(),""}}async function im(e,t){for(const[n,o]of t){const a=e.getJournal(n);if(a)for(const{year:r,weeks:l,path:s}of o){const i=Oe().year(r).week(l).format("YYYY-MM-DD"),u=a.resolveAnchorDate(i);u&&await e.notesManager.updateNoteFrontmatter(s,d=>{d[a.frontmatterDate]=u,a.config.value.frontmatter.addStartDate&&(d[a.frontmatterStartDate]=a.resolveStartDate(u)),a.config.value.frontmatter.addEndDate&&(d[a.frontmatterEndDate]=a.resolveEndDate(u))})}}}const um={key:0},dm={class:"whitespace"},cm={key:0},fm=I({__name:"CalendarWeekSettings.modal",emits:["close"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(),r=fe("0"),l=fe(1),s=Bi(o.calendarSettings),i=w(()=>a.value&&(a.value.dow!==s.dow||a.value.doy!==s.doy||a.value.name!==s.name));bt(()=>{u(s)});function u(g){a.value=jt(g),r.value=String(g.dow),l.value=Pi(g.dow,g.doy)}function d(){a.value&&(a.value.name="custom")}async function m(){if(!a.value)return;const g=o.journals.filter(T=>T.type==="week"),p=new Map;for(const T of g){const Z=[];for(const[O,N]of o.index.getJournalIndex(T.name)){const le=K(O);Z.push({year:le.year(),weeks:le.week(),path:N})}p.set(T.name,Z)}a.value.name==="custom"&&(a.value.dow=Number.parseInt(r.value,10),a.value.doy=Ei(a.value.dow,l.value));const{dow:k,doy:y}=a.value,x=o.calendarSettings.global?ao.dow:X.moment().localeData().firstDayOfWeek(),A=o.calendarSettings.global?ao.doy:X.moment().localeData().firstDayOfYear();k===x&&y===A?(o.calendarSettings.dow=-1,Ta(o.calendarSettings.global)):(o.calendarSettings.dow=k,o.calendarSettings.doy=y,Aa(k,y,o.calendarSettings.global)),await im(o,p),n("close")}return(g,p)=>a.value?(v(),C("div",um,[(v(!0),C(W,null,Ce(b(Ri),k=>(v(),E(M,{key:k.name},{name:f(()=>[_(P(k.name),1)]),description:f(()=>[h("div",dm,P(k.description),1),h("div",null,"Used in: "+P(k.used),1)]),default:f(()=>[k.name===b(s).name?(v(),C("div",cm,"Currently used")):R("",!0),k.name===a.value.name?(v(),E(un,{key:1,name:"lucide-check"})):(v(),E(ue,{key:2,onClick:y=>u(k)},{default:f(()=>[...p[3]||(p[3]=[_("Use",-1)])]),_:2},1032,["onClick"]))]),_:2},1024))),128)),c(M,{name:"Custom settings"},{description:f(()=>[...p[4]||(p[4]=[h("div",null,[_(" Here you can define what day of week should be used"),h("br"),_(" as first and how first week of year should be defined"),h("br"),_(" if none of standard presets suits your needs. ")],-1)])]),default:f(()=>[a.value.name!=="custom"?(v(),E(ue,{key:0,onClick:p[0]||(p[0]=k=>d())},{default:f(()=>[...p[5]||(p[5]=[_("Use",-1)])]),_:1})):R("",!0)]),_:1}),a.value.name==="custom"?(v(),C(W,{key:0},[c(M,{name:"Start week on",description:"Which day to consider as first day of week."},{default:f(()=>[c(Ve,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=k=>r.value=k)},{default:f(()=>[...p[6]||(p[6]=[h("option",{value:"0"},"Sunday",-1),h("option",{value:"1"},"Monday",-1),h("option",{value:"2"},"Tuesday",-1),h("option",{value:"3"},"Wednesday",-1),h("option",{value:"4"},"Thursday",-1),h("option",{value:"5"},"Friday",-1),h("option",{value:"6"},"Saturday",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"First week of year",description:"Define what date in January a week should contain to be considered first week of a year."},{default:f(()=>[c(ln,{modelValue:l.value,"onUpdate:modelValue":p[2]||(p[2]=k=>l.value=k)},null,8,["modelValue"])]),_:1})],64)):R("",!0),i.value?(v(),E(M,{key:1},{description:f(()=>[...p[7]||(p[7]=[_(" This will update all weekly notes to use current settings - week number of notes will be kept but dates will be updated. ",-1)])]),default:f(()=>[c(ue,{cta:"",onClick:m},{default:f(()=>[...p[8]||(p[8]=[_("Update",-1)])]),_:1})]),_:1})):R("",!0)])):R("",!0)}}),pm={class:"column"},mm={class:"whitespace"},vm=I({__name:"CalendarWeekSettings",setup(e){const t=pe(),n=w(()=>Bi(t.calendarSettings));lt(()=>t.calendarSettings.global,a=>{a?t.calendarSettings.dow===-1?Ta(!0):Aa(t.calendarSettings.dow,t.calendarSettings.doy,!0):(Ta(!0),t.calendarSettings.dow!==-1&&Aa(t.calendarSettings.dow,t.calendarSettings.doy,!1))});function o(){new Ne(t,"Week configuration",fm,{}).open()}return(a,r)=>(v(),C(W,null,[c(M,{heading:"",name:"Week configuration"},{description:f(()=>[...r[1]||(r[1]=[_(" Here you can define what day of week should be used",-1),h("br",null,null,-1),_(" as first and how first week of year should be defined",-1),h("br",null,null,-1),_(" (influences week numbers). ",-1)])]),default:f(()=>[h("div",pm,[h("div",mm,P(n.value.description),1),c(ue,{class:"self-end",onClick:o},{default:f(()=>[...r[2]||(r[2]=[_("Change",-1)])]),_:1})])]),_:1}),c(M,{name:"Apply week configuration for all dates in vault?"},{description:f(()=>[...r[3]||(r[3]=[h("div",null," If disabled weak configuration settings are apply only to date within current journals and does not affect any dates created by other plugins or obsidian itself. ",-1),h("div",{class:"journal-hint"},"You might need to restart Obsidian for changes to take effect.",-1)])]),default:f(()=>[c(He,{modelValue:b(t).calendarSettings.global,"onUpdate:modelValue":r[0]||(r[0]=l=>b(t).calendarSettings.global=l)},null,8,["modelValue"])]),_:1})],64))}}),hm=ye(vm,[["__scopeId","data-v-1e68a6d9"]]),gm=I({__name:"ShelfDecision",emits:["next"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(!1);function r(){a.value&&(o.usesShelves=!0),n("next")}return(l,s)=>(v(),C("div",null,[c(M,{heading:"",name:"Use shelves?"}),c(M,{"no-controls":""},{description:f(()=>[...s[1]||(s[1]=[_(" Shelves can be used to organize several journals into one logical group (like work or personal).",-1),h("br",null,null,-1),_(" Enabling shelves before migration will convert all calendar journals that have more than one section enabled into a shelf.",-1),h("br",null,null,-1),_(" You can always change this decision later. ",-1)])]),_:1}),c(M,{name:"Enable shelves?"},{default:f(()=>[c(He,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},null,8,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:r},{default:f(()=>[...s[2]||(s[2]=[_("Next",-1)])]),_:1})]),_:1})]))}}),ru=3,wl={version:ru,ui:{calendarShelf:null},pendingMigrations:[],dismissedNotifications:[],useShelves:!1,showReloadHint:!1,openOnStartup:"",journals:{},shelves:{},commands:[{name:"Open today's note",writeType:"day",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open weekly note",writeType:"week",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open monthly note",writeType:"month",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open quarterly note",writeType:"quarter",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open yearly note",writeType:"year",type:"same",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open tomorrow's note",writeType:"day",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next week note",writeType:"week",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next month note",writeType:"month",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next quarter note",writeType:"quarter",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open next year note",writeType:"year",type:"next",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open yesterday's note",writeType:"day",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last week note",writeType:"week",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last month note",writeType:"month",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last quarter note",writeType:"quarter",type:"previous",openMode:"tab",showInRibbon:!1,icon:""},{name:"Open last year note",writeType:"year",type:"previous",openMode:"tab",showInRibbon:!1,icon:""}],calendar:{dow:-1,doy:1,global:!1},calendarView:{display:"month",leaf:"right",weeks:"left",todayMode:"navigate",pickMode:"create",todayStyle:{color:{type:"theme",name:"text-accent"},background:{type:"transparent"}},activeStyle:{color:{type:"theme",name:"text-on-accent"},background:{type:"theme",name:"interactive-accent"}}}},bl={name:"",shelves:[],write:{type:"day"},confirmCreation:!1,nameTemplate:"",dateFormat:"",folder:"",templates:[],start:"",end:{type:"never"},index:{enabled:!1,anchorDate:"",anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:2},autoCreate:!1,commands:[],decorations:[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"shape",size:.4,shape:"circle",color:{type:"theme",name:"interactive-accent"},placement_x:"center",placement_y:"bottom"}]}],navBlock:{type:"create",rows:[],decorateWholeBlock:!1},calendarViewBlock:{rows:[],decorateWholeBlock:!1},frontmatter:{dateField:"",addStartDate:!1,startDateField:"",addEndDate:!1,endDateField:"",indexField:""}},ym={dateField:Xa,indexField:Za,startDateField:an,endDateField:wn},wm={icon:"",name:"",writeType:"day",type:"same",showInRibbon:!1,openMode:"active"},bm={icon:"",name:"",type:"same",context:"today",showInRibbon:!1,openMode:"active"},lu={date:{type:"date",day:-1,month:-1,year:null},title:{type:"title",condition:"contains",value:""},tag:{type:"tag",condition:"contains",value:""},property:{type:"property",name:"",condition:"contains",value:""},weekday:{type:"weekday",weekdays:[]},offset:{type:"offset",offset:0},"has-note":{type:"has-note"},"has-open-task":{type:"has-open-task"},"all-tasks-completed":{type:"all-tasks-completed"}},km={background:{type:"background",color:{type:"transparent"}},color:{type:"color",color:{type:"theme",name:"text-normal"}},border:{type:"border",border:"uniform",left:{show:!0,width:1,color:{type:"transparent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}},shape:{type:"shape",size:.4,shape:"circle",color:{type:"transparent"},placement_x:"center",placement_y:"bottom"},corner:{type:"corner",placement:"top-left",color:{type:"transparent"}},icon:{type:"icon",icon:"",size:.5,color:{type:"transparent"},placement_x:"center",placement_y:"top"}},su={day:"{{date}}",week:"{{date}}",month:"{{date}}",quarter:"{{date}}",year:"{{date}}",custom:"{{journal_name}} {{index}}"},iu={day:"YYYY-MM-DD",week:"YYYY-[W]w",month:"YYYY-MM",quarter:"YYYY-[Q]Q",year:"YYYY",custom:"YYYY-MM-DD"},Ze={template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},ys={...Ze,template:"{{date:[W]w}}",link:"week"},Sr={...Ze,template:"{{date:MMMM}}",link:"month"},wo={...Ze,template:"{{date:YYYY}}",link:"year"},bo={...Ze,template:"{{relative_date}}",fontSize:.7},_m={day:{type:"create",decorateWholeBlock:!1,rows:[{...Ze,template:"{{date:ddd}}"},{...Ze,template:"{{date:D}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},bo,ys,Sr,wo]},week:{type:"create",decorateWholeBlock:!1,rows:[{...ys,fontSize:3,bold:!0,link:"self",addDecorations:!0},bo,Sr,wo]},month:{type:"create",decorateWholeBlock:!1,rows:[{...Sr,fontSize:3,bold:!0,link:"self",addDecorations:!0},bo,wo]},quarter:{type:"create",decorateWholeBlock:!1,rows:[{...Ze,template:"{{date:[Q]Q}}",fontSize:3,bold:!0,link:"self",addDecorations:!0},bo,wo]},year:{type:"create",decorateWholeBlock:!1,rows:[{...wo,fontSize:3,bold:!0,link:"self",addDecorations:!0},bo]},custom:{type:"create",decorateWholeBlock:!1,rows:[{...Ze,template:"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0},{...Ze,template:"{{start_date}}"},{...Ze,template:"to"},{...Ze,template:"{{end_date}}"}]}};function kl(e){const t={nameTemplate:su[e.type],dateFormat:iu[e.type],navBlock:_m[e.type]};return e.type==="custom"&&(t.start=e.anchorDate,t.index={enabled:!0,anchorDate:e.anchorDate,anchorIndex:1,allowBefore:!1,type:"increment",resetAfter:1},t.calendarViewBlock={decorateWholeBlock:!0,rows:[{...Ze,template:"{{journal_name}} {{index}}",link:"self",fontSize:1.2,bold:!0},{...Ze,template:"{{start_date}} to {{end_date}}"}]},t.decorations=[{mode:"and",conditions:[{type:"has-note"}],styles:[{type:"border",border:"different",left:{show:!0,width:2,color:{type:"theme",name:"interactive-accent"},style:"solid"},right:{show:!1,width:1,color:{type:"transparent"},style:"solid"},top:{show:!1,width:1,color:{type:"transparent"},style:"solid"},bottom:{show:!1,width:1,color:{type:"transparent"},style:"solid"}}]}]),t}const xr="journal-section",wa="journal-interval-index",Cm={day:"Open today's note",week:"Open this week's note",month:"Open this month's note",quarter:"Open this quarter's note",year:"Open this year's note"};function uu(e){let t=0;return e.day.enabled&&t++,e.week.enabled&&t++,e.month.enabled&&t++,e.quarter.enabled&&t++,e.year.enabled&&t++,t}function Sm(e){const t=jt(wl);return t.calendar.dow=e.calendar.firstDayOfWeek,t.calendar.doy=e.calendar.firstDayOfWeek===-1?1:Ei(e.calendar.firstDayOfWeek,e.calendar.firstWeekOfYear),t.calendarView.leaf=e.calendar_view.leaf,t.calendarView.weeks=e.calendar_view.weeks,t.pendingMigrations.push({type:"v1-v2",shelfDecided:!1,frontmatterDecided:!1,journals:Object.values(e.journals)}),t}function xm(e,t){const n={type:"custom",anchorDate:e.start_date,every:e.granularity,duration:e.duration},o=jt({...bl,...kl(n),write:n});if(o.name=e.name,o.autoCreate=e.createOnStartup,o.nameTemplate=e.nameTemplate||"{{journal_name}} {{index}}",o.dateFormat=e.dateFormat||"YYYY-MM-DD",o.folder=e.folder,e.template&&o.templates.push(e.template),o.start=e.start_date,e.end_type==="date"?o.end={type:"date",date:e.end_date}:e.end_type==="repeats"&&(o.end={type:"repeats",repeats:e.repeats}),o.index={enabled:!0,anchorDate:e.start_date,anchorIndex:e.start_index,allowBefore:!1,type:"increment",resetAfter:0},e.numeration_type==="year"){o.index.type="reset_after";const a=e.duration;switch(e.granularity){case"month":{o.index.resetAfter=Math.floor(12/a);break}case"week":{o.index.resetAfter=Math.floor(52/a);break}case"day":{o.index.resetAfter=Math.floor(365/a);break}}}if(e.navNameTemplate||e.navDatesTemplate)if(o.navBlock.rows=[{...Ze,template:e.navNameTemplate||"{{journal_name}} {{index}}",link:"self",fontSize:3,bold:!0,addDecorations:!0}],e.navDatesTemplate)for(const a of e.navDatesTemplate.split("|"))o.navBlock.rows.push({...Ze,template:a});else o.navBlock.rows.push({...Ze,template:"{{start_date}}"},{...Ze,template:"to"},{...Ze,template:"{{end_date}}"});return t&&(o.frontmatter.addStartDate=!0,o.frontmatter.addEndDate=!0),e.ribbon.show&&o.commands.push({icon:e.ribbon.icon||"calendar-range",name:e.ribbon.tooltip||`Open current ${e.name} note`,type:"same",context:"today",showInRibbon:!0,openMode:e.openMode}),o}async function Dm(e,t,n){const o=xm(t,n),a=e.registerJournal(o);await Vm(e.notesManager,a,t)}async function Vm(e,t,n){const o=e.getMarkdownFiles();for(const a of o){const r=e.getNoteMetadata(a.path);if(!r)continue;const{frontmatter:l}=r;!l||!(mt in l)||l[mt]!==n.id||await e.updateNoteFrontmatter(a.path,i=>{const u=i[an],d=i[wn],m=t.resolveAnchorDate(u);m?(i[mt]=t.name,i[t.frontmatterDate]=u,t.config.value.frontmatter.addStartDate?i[t.frontmatterStartDate]=t.resolveStartDate(m):delete i[an],t.config.value.frontmatter.addEndDate||d!==t.resolveEndDate(m)?i[t.frontmatterEndDate]=d:delete i[wn],i[t.frontmatterIndex]=i[wa],delete i[wa]):(delete i[mt],delete i[an],delete i[wn],delete i[wa])})}}async function jm(e,t,n,o){t.day.enabled&&await ko(e,t,"day",n,o),t.week.enabled&&await ko(e,t,"week",n,o),t.month.enabled&&await ko(e,t,"month",n,o),t.quarter.enabled&&await ko(e,t,"quarter",n,o),t.year.enabled&&await ko(e,t,"year",n,o)}function $m(e,t,n,o,a){const r={type:t},l=jt({...bl,...kl(r),write:r}),s=e[t];return l.name=n[t],l.autoCreate=s.createOnStartup,o&&n.shelf&&(l.shelves=[n.shelf]),l.nameTemplate=s.nameTemplate||"{{date}}",l.dateFormat=s.dateFormat||iu[t],l.folder=e.rootFolder?e.rootFolder+"/"+s.folder:s.folder,s.template&&l.templates.push(s.template),s.ribbon.show&&l.commands.push({icon:s.ribbon.icon||"calendar-days",name:s.ribbon.tooltip||Cm[t],type:"same",context:"today",showInRibbon:!0,openMode:s.openMode}),a&&(l.frontmatter.addStartDate=!0,l.frontmatter.addEndDate=!0),l}async function ko(e,t,n,o,a){const r=$m(t,n,o,e.usesShelves,a),l=e.registerJournal(r);await Mm(e.notesManager,l,n,t)}async function Mm(e,t,n,o){const a=e.getMarkdownFiles();for(const r of a){const l=e.getNoteMetadata(r.path);if(!l)continue;const{frontmatter:s}=l;!s||!(mt in s)||s[mt]!==o.id||s[xr]!==n||await e.updateNoteFrontmatter(r.path,d=>{const m=d[an],g=t.resolveAnchorDate(m);g?(d[mt]=t.name,d[t.frontmatterDate]=m,t.config.value.frontmatter.addStartDate?d[t.frontmatterStartDate]=t.resolveStartDate(g):delete d[an],t.config.value.frontmatter.addEndDate?d[t.frontmatterEndDate]=t.resolveEndDate(g):delete d[wn],delete d[xr]):(delete d[mt],delete d[xr],delete d[an],delete d[wn],delete d[wa])})}}const Nm={key:1,class:"loader-container"},Om=I({__name:"MigrateCalendar",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=pe(),a=fe("names"),r=uu(e.journal),l=fe(""),s=fe(""),i=fe(""),u=fe(""),d=fe(""),m=fe("");async function g(){a.value="processing",o.usesShelves&&l.value&&!o.hasShelf(l.value)&&o.createShelf(l.value),await jm(o,e.journal,{shelf:l.value,day:s.value,week:u.value,month:i.value,quarter:d.value,year:m.value},e.keepFrontmatter),o.reprocessNotes(),n("finished"),a.value="done"}return bt(async()=>{if(r===0){n("finished"),Nt(()=>{n("next")});return}r===1?(s.value=e.journal.name,u.value=e.journal.name,i.value=e.journal.name,d.value=e.journal.name,m.value=e.journal.name,await g()):(a.value="names",l.value=e.journal.name,s.value=`${e.journal.name} daily`,u.value=`${e.journal.name} weekly`,i.value=`${e.journal.name} monthly`,d.value=`${e.journal.name} quarterly`,m.value=`${e.journal.name} yearly`)}),(p,k)=>(v(),C("div",null,[c(M,{heading:""},{name:f(()=>[_("Migrating "+P(p.journal.name),1)]),_:1}),a.value==="names"?(v(),C(W,{key:0},[b(o).usesShelves?(v(),E(M,{key:0,name:"Shelf name"},{default:f(()=>[c(Je,{modelValue:l.value,"onUpdate:modelValue":k[0]||(k[0]=y=>l.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.day.enabled?(v(),E(M,{key:1,name:"Daily journal name"},{default:f(()=>[c(Je,{modelValue:s.value,"onUpdate:modelValue":k[1]||(k[1]=y=>s.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.week.enabled?(v(),E(M,{key:2,name:"Weekly journal name"},{default:f(()=>[c(Je,{modelValue:u.value,"onUpdate:modelValue":k[2]||(k[2]=y=>u.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.month.enabled?(v(),E(M,{key:3,name:"Monthly journal name"},{default:f(()=>[c(Je,{modelValue:i.value,"onUpdate:modelValue":k[3]||(k[3]=y=>i.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.quarter.enabled?(v(),E(M,{key:4,name:"Quarterly journal name"},{default:f(()=>[c(Je,{modelValue:d.value,"onUpdate:modelValue":k[4]||(k[4]=y=>d.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),p.journal.year.enabled?(v(),E(M,{key:5,name:"Yearly journal name"},{default:f(()=>[c(Je,{modelValue:m.value,"onUpdate:modelValue":k[5]||(k[5]=y=>m.value=y)},null,8,["modelValue"])]),_:1})):R("",!0),c(M,null,{default:f(()=>[c(ue,{cta:"",onClick:g},{default:f(()=>[...k[7]||(k[7]=[_("Migrate",-1)])]),_:1})]),_:1})],64)):a.value==="processing"?(v(),C("div",Nm,[c(un,{name:"loader"})])):(v(),E(M,{key:2,name:"Done!"},{default:f(()=>[c(ue,{cta:"",onClick:k[6]||(k[6]=y=>p.$emit("next"))},{default:f(()=>[...k[8]||(k[8]=[_("Next",-1)])]),_:1})]),_:1}))]))}}),Am=ye(Om,[["__scopeId","data-v-7e294ea2"]]),Tm={key:0,class:"loader-container"},Fm=I({__name:"MigrateInterval",props:{journal:{},keepFrontmatter:{type:Boolean}},emits:["next","finished"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(!0);return bt(async()=>{a.value=!0,await Dm(o,e.journal,e.keepFrontmatter),o.reprocessNotes(),n("finished"),a.value=!1}),(r,l)=>(v(),C("div",null,[c(M,{heading:""},{name:f(()=>[_(" Migrating "+P(r.journal.name),1)]),_:1}),a.value?(v(),C("div",Tm,[c(un,{name:"loader"})])):(v(),E(M,{key:1,name:"Done!"},{default:f(()=>[c(ue,{cta:"",onClick:l[0]||(l[0]=s=>r.$emit("next"))},{default:f(()=>[...l[1]||(l[1]=[_("Next",-1)])]),_:1})]),_:1}))]))}}),Em=ye(Fm,[["__scopeId","data-v-c1f36a5c"]]),Pm=I({__name:"FrontMatterDecision",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:Ut(["next"],["update:modelValue"]),setup(e){const t=Lt(e,"modelValue");return(n,o)=>(v(),C("div",null,[c(M,{name:"Frontmatter data",heading:""}),c(M,{"no-controls":""},{description:f(()=>[...o[2]||(o[2]=[_(" New plugin version by default reduces frontmatter data.",-1),h("br",null,null,-1),_(" Instead of having start and end dates in frontmatter there is only 1 date (usually first day of month or year for example).",-1),h("br",null,null,-1),_(" If you used start or end dates from frontmatter in some other plugins (like Dataview) you can configure plugin to keep start and end dates in frontmatter.",-1),h("br",null,null,-1),_(" You can always change this decision later. ",-1)])]),_:1}),c(M,{name:"Keep start and end dates in frontmatter?"},{default:f(()=>[c(He,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a)},null,8,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:o[1]||(o[1]=a=>n.$emit("next"))},{default:f(()=>[...o[3]||(o[3]=[_("Next",-1)])]),_:1})]),_:1})]))}}),Im={key:2},Rm=I({__name:"v2-migration",props:{migration:{}},emits:["finished"],setup(e,{emit:t}){const n=t;let o=fe(!1),a=fe("decideFrontmatter"),r=fe();bt(()=>{e.migration.journals.length===0?n("finished"):e.migration.frontmatterDecided&&(e.migration.shelfDecided?(a.value="journal",r.value=e.migration.journals[0]):a.value="decideShelf")});function l(){if(r.value){const{journals:i}=e.migration;i.shift()}}function s(){if(a.value==="decideFrontmatter"&&(e.migration.frontmatterDecided=!0),a.value==="decideShelf"&&(e.migration.shelfDecided=!0),!e.migration.shelfDecided)if(e.migration.journals.some(u=>u.type==="calendar"?uu(u)>1:!1)){a.value="decideShelf";return}else e.migration.shelfDecided=!0;r.value&&(r.value=null),e.migration.journals.length>0?(a.value="journal",r.value=e.migration.journals[0]):n("finished")}return(i,u)=>(v(),C("div",null,[b(a)==="decideFrontmatter"?(v(),E(Pm,{key:0,modelValue:b(o),"onUpdate:modelValue":u[0]||(u[0]=d=>ce(o)?o.value=d:o=d),onNext:s},null,8,["modelValue"])):R("",!0),b(a)==="decideShelf"?(v(),E(gm,{key:1,onNext:s})):b(a)==="journal"&&b(r)?(v(),C("div",Im,[b(r).type==="calendar"?(v(),E(Am,{key:b(r).id+"calendar",journal:b(r),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):b(r).type==="interval"?(v(),E(Em,{key:b(r).id+"interval",journal:b(r),"keep-frontmatter":b(o),onFinished:l,onNext:s},null,8,["journal","keep-frontmatter"])):R("",!0)])):R("",!0)]))}}),Bm={key:0},du=I({__name:"MigrationModal",emits:["close"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(null),r=w(()=>{if(!a.value)return null;switch(a.value.type){case"v1-v2":return Rm}return null});function l(){a.value=null,o.pendingMigrations.shift();const s=o.pendingMigrations[0];s?a.value=s:n("close")}return bt(()=>{const s=o.pendingMigrations[0];s?a.value=s:n("close")}),(s,i)=>a.value?(v(),C("div",Bm,[(v(),E(zo(r.value),{migration:a.value,onFinished:l},null,40,["migration"]))])):R("",!0)}}),Ym={day:["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"],week:["same","next","previous"],month:["same","next","previous","same_next_year","same_previous_year"],quarter:["same","next","previous","same_next_year","same_previous_year"],year:["same","next","previous"],custom:["same","next","previous"]},Um=e=>Ym[e],nr=(e,t,n)=>{switch(t){case"same":return e==="day"?"Open today's note":`Open current ${e}'s note`;case"previous":return e==="day"&&n==="today"?"Open yesterday's note":`Open last ${e}'s note`;case"next":return e==="day"&&n==="today"?"Open tomorrow's note":`Open next ${e}'s note`;case"same_next_week":return`Open same ${e} next week`;case"same_previous_week":return`Open same ${e} last week`;case"same_next_month":return`Open same ${e} next month`;case"same_previous_month":return`Open same ${e} last month`;case"same_next_year":return`Open same ${e} next year`;case"same_previous_year":return`Open same ${e} last year`}};function Wm(e,t,n){return t==="same"?"":n==="only_open_note"?"(using date of currently opened note)":n==="open_note"?"(using date of currently opened note or today's date)":""}class Lm extends X.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=X.getIconIds(),o=t.toLocaleLowerCase();return n.filter(a=>a.toLocaleLowerCase().includes(o)).sort()}renderSuggestion(t,n){const o=X.getIcon(t);if(o){o.classList.add("suggestion-icon"),n.classList.add("mod-complex","journal-suggestion-icon"),n.append(o);const a=n.createSpan();a.classList.add("journal-suggestion-name"),a.style.marginLeft="8px",a.appendText(t)}}selectSuggestion(t){this.textInputElement.value=t,this.textInputElement.trigger("input"),this.close()}}function _l(){return pe().app}const Jm={class:"icon-selector"},qm=I({__name:"IconSelector",props:Ut({placeholder:{}},{modelValue:{},modelModifiers:{}}),emits:Ut(["blur","change"],["update:modelValue"]),setup(e){const t=Lt(e,"modelValue"),n=fe(),o=_l();return bt(()=>{n.value&&new Lm(o,n.value.$el)}),(a,r)=>(v(),C("div",Jm,[c(un,{name:t.value??""},null,8,["name"]),c(Je,{ref_key:"inputCmp",ref:n,modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value=l),placeholder:a.placeholder,onBlur:r[1]||(r[1]=l=>a.$emit("blur")),onChange:r[2]||(r[2]=l=>a.$emit("change",l))},null,8,["modelValue","placeholder"])]))}}),Cl=ye(qm,[["__scopeId","data-v-6d210595"]]),Hm={value:"same"},zm={value:"next"},Km={value:"previous"},Ea=I({__name:"EditPluginCommand.modal",props:{index:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(X.getIconIds());function a(ie){return ie?!e.commands.some((L,me)=>L.name===ie&&me!==e.index):!0}const{defineField:r,errorBag:l,handleSubmit:s}=xn({initialValues:e.command?{...e.command}:{...wm},validationSchema:Vn(wt(At({icon:Xe(),name:wt(Xe(),Gt("Command name is required"),po(a,"Command name should be unique")),type:yt(["same","next","previous"]),writeType:yt(["day","week","month","quarter","year"]),showInRibbon:rn(),openMode:yt(["active","tab","split","window"])}),Xo(mo([["showInRibbon"],["icon"]],ie=>ie.showInRibbon?o.has(ie.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[i,u]=r("name"),[d,m]=r("icon"),[g,p]=r("writeType"),[k,y]=r("type"),[x,A]=r("showInRibbon"),[T,Z]=r("openMode"),O={day:"Today's note",week:"This week's note",month:"This month's note",quarter:"This quarter's note",year:"This year's note"},N=w(()=>O[g.value??"day"]),le=s(ie=>{n("submit",ie,e.index),n("close")});return(ie,L)=>(v(),C("form",{onSubmit:L[7]||(L[7]=(...me)=>b(le)&&b(le)(...me))},[c(M,{name:"Name"},{description:f(()=>[L[8]||(L[8]=_(" Journal name will be added to command name automatically. ",-1)),c(et,{errors:b(l).name},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(i),"onUpdate:modelValue":L[0]||(L[0]=me=>ce(i)?i.value=me:null)},b(u)),null,16,["modelValue"])]),_:1}),c(M,{name:"Show in ribbon?"},{default:f(()=>[c(He,De({modelValue:b(x),"onUpdate:modelValue":L[1]||(L[1]=me=>ce(x)?x.value=me:null)},b(A)),null,16,["modelValue"])]),_:1}),b(x)?(v(),E(M,{key:0,name:"Icon"},{description:f(()=>[c(et,{errors:b(l).icon},null,8,["errors"])]),default:f(()=>[c(Cl,De({modelValue:b(d),"onUpdate:modelValue":L[2]||(L[2]=me=>ce(d)?d.value=me:null)},b(m)),null,16,["modelValue"])]),_:1})):R("",!0),c(M,{name:"Note type"},{default:f(()=>[c(Ve,De({modelValue:b(g),"onUpdate:modelValue":L[3]||(L[3]=me=>ce(g)?g.value=me:null)},b(p)),{default:f(()=>[...L[9]||(L[9]=[h("option",{value:"day"},"Daily note",-1),h("option",{value:"week"},"Weekly note",-1),h("option",{value:"month"},"Monthly note",-1),h("option",{value:"quarter"},"Quarterly note",-1),h("option",{value:"year"},"Yearly note",-1)])]),_:1},16,["modelValue"])]),_:1}),c(M,{name:"Open"},{default:f(()=>[c(Ve,De({modelValue:b(k),"onUpdate:modelValue":L[4]||(L[4]=me=>ce(k)?k.value=me:null)},b(y)),{default:f(()=>[h("option",Hm,P(N.value),1),h("option",zm,"Next "+P(N.value)+" note",1),h("option",Km,"Last "+P(N.value)+" note",1)]),_:1},16,["modelValue"])]),_:1}),c(M,{name:"Open note"},{default:f(()=>[c(Ve,De({modelValue:b(T),"onUpdate:modelValue":L[5]||(L[5]=me=>ce(T)?T.value=me:null)},b(Z)),{default:f(()=>[...L[10]||(L[10]=[h("option",{value:"active"},"Replacing active note",-1),h("option",{value:"tab"},"In new tab",-1),h("option",{value:"split"},"Adjacent to active note",-1),h("option",{value:"window"},"In popout window",-1)])]),_:1},16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:L[6]||(L[6]=me=>ie.$emit("close"))},{default:f(()=>[...L[11]||(L[11]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",type:"submit"},{default:f(()=>[...L[12]||(L[12]=[_("Save",-1)])]),_:1})]),_:1})],32))}});class cu extends X.SuggestModal{constructor(t,n,o){super(t),this.journals=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),this.journals.filter(n=>n.toLocaleLowerCase().contains(t))}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t)}}async function Wo(e,t,n,o=!1,a,r){const l=n.filter(s=>{const i=e.getJournal(s);if(!i)return!1;const u=i.get(t);return!(!u||o&&!("path"in u))});if(l.length!==0){if(l.length===1){const[s]=l;if(!s)return;await On(e,t,s,a);return}if(r){const s=new X.Menu;for(const i of l)s.addItem(u=>{u.setTitle(i).onClick(()=>{On(e,t,i,a).catch(console.error)})});s.showAtMouseEvent(r)}else new cu(e.app,l,s=>{On(e,t,s,a).catch(console.error)}).open()}}async function On(e,t,n,o){const a=e.getJournal(n);if(!a)return;const r=a.get(t);r&&await a.open(r,o)}function Dr(e,t){let n=null;const o=Oe().format(_e);switch(t){case"same":{n=e.get(o);break}case"next":{n=e.next(o);break}case"previous":{n=e.previous(o);break}}return n?.date??null}function so(e,t,n,o){const a=r=>{const l=o().filter(s=>Dr(s,t.type)!==null);if(r)return l.length>0;if(l.length===0)return!1;if(l.length===1){const[s]=l;if(!s)return!1;const i=Dr(s,t.type);if(!i)return!1;On(e,i,s.name,t.openMode).catch(console.error)}else new cu(e.app,l.map(s=>s.name),s=>{const i=e.getJournal(s);if(!i)return;const u=Dr(i,t.type);u&&On(e,u,s,t.openMode).catch(console.error)}).open();return!0};e.appManager.addCommand(n,t,a),t.showInRibbon&&e.appManager.addRibbonIcon(n,t.icon,t.name,()=>a(!1))}function Pa(e,t,n){e.appManager.removeCommand(n,t),e.appManager.removeRibbonIcon(n,t.name)}const Gm=[{id:"v2-commands-change",icon:"lucide-alert-triangle",message:`Commands were considerably changed in v2 resulting in them having different ids compared to v1. 
        So if you have used command ids in other plugins, you may need to adjust them.`}],Qm={key:0,class:"journal-warning"},Xm={key:1,class:"journal-warning"},Zm=["value"],ev={class:"flair"},tv=I({__name:"JournalSettingsDashboard",emits:["edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=_n({commands:!1}),r=w(()=>Gm.filter(m=>!o.dismissedNotifications.includes(m.id))),l=w(()=>{const m=new Map;for(const g of o.journals){const p=`${g.config.value.nameTemplate.replaceAll("{{journal_name}}",g.name)}-${g.config.value.folder}-${g.config.value.dateFormat}`,k=m.get(p)??[];k.push(g),m.set(p,k)}return[...m.values()].filter(g=>g.length>1)});function s(){new Ne(o,"Migrate plugin data",du).open()}function i(){new Ne(o,"Add command",Ea,{index:o.commands.length,commands:o.commands,onSubmit:m=>{o.commands.push(m),so(o,m,"global",()=>o.journals.filter(g=>g.type===m.writeType)),a.commands||(a.commands=!0)}}).open()}function u(m,g){new Ne(o,"Edit command",Ea,{index:g,command:m,commands:o.commands,onSubmit:p=>{o.commands[g]=p,Pa(o,m,""),so(o,p,"",()=>o.journals.filter(k=>k.type===p.writeType))}}).open()}function d(m){const[g]=o.commands.splice(m,1);g&&Pa(o,g,"")}return(m,g)=>(v(),C(W,null,[b(o).hasMigrations?(v(),C("div",Qm,[c(M,{name:"Some data is pending migration",heading:""},{default:f(()=>[c(ue,{cta:"",onClick:s},{default:f(()=>[...g[16]||(g[16]=[_("Migrate",-1)])]),_:1})]),_:1})])):R("",!0),(v(!0),C(W,null,Ce(r.value,p=>(v(),C("div",{key:p.id,class:"journal-notification"},[c(un,{name:p.icon},null,8,["name"]),_(" "+P(p.message)+" ",1),c(be,{icon:"cross",tooltip:"Dismiss",onClick:k=>b(o).dismissNotification(p.id)},null,8,["onClick"])]))),128)),c(M,{name:"Use shelves?"},{description:f(()=>[...g[17]||(g[17]=[_(" Shelves can be used to organize several journals into one logical group (like work or personal).",-1),h("br",null,null,-1),_(" With shelves enabled: ",-1),h("br",null,null,-1),h("ul",null,[h("li",null,"Calendar View can be limited to display just one shelf"),h("li",null,"Navigation code block will show decorations from journals on current shelf only")],-1)])]),default:f(()=>[c(He,{modelValue:b(o).usesShelves,"onUpdate:modelValue":g[0]||(g[0]=p=>b(o).usesShelves=p)},null,8,["modelValue"])]),_:1}),l.value.length>0?(v(),C("div",Xm,[c(M,{name:"Colliding journal settings",heading:""}),(v(!0),C(W,null,Ce(l.value,(p,k)=>(v(),C("div",{key:k}," Journals "+P(p.map(y=>y.name).join(" and "))+" has colliding configurations so that notes will be overriding each other. Consider changing folder or name template in one of that journals. ",1))),128))])):R("",!0),b(o).usesShelves?(v(),E(Qp,{key:2,onOrganize:g[1]||(g[1]=p=>n("organize",p)),onEdit:g[2]||(g[2]=p=>n("edit",p)),onBulkAdd:g[3]||(g[3]=p=>n("bulk-add",p))})):(v(),E(Lp,{key:3,onEdit:g[4]||(g[4]=p=>n("edit",p)),onBulkAdd:g[5]||(g[5]=p=>n("bulk-add",p))})),c(M,{name:"Open on startup",description:"Open a note whenever you open this vault?"},{default:f(()=>[c(Ve,{modelValue:b(o).openOnStartup,"onUpdate:modelValue":g[6]||(g[6]=p=>b(o).openOnStartup=p)},{default:f(()=>[g[18]||(g[18]=h("option",{value:""},"Don't open",-1)),(v(!0),C(W,null,Ce(b(o).journals,p=>(v(),C("option",{key:p.name,value:p.name},P(p.name),9,Zm))),128))]),_:1},8,["modelValue"])]),_:1}),c(xt,{expanded:a.commands,"onUpdate:expanded":g[7]||(g[7]=p=>a.commands=p)},{trigger:f(()=>[c(Dt,{icon:"terminal"},{default:f(()=>[g[19]||(g[19]=_(" Commands ",-1)),h("span",ev,P(b(o).commands.length),1)]),_:1})]),controls:f(()=>[c(ue,{onClick:i},{default:f(()=>[...g[20]||(g[20]=[_("Add command",-1)])]),_:1})]),default:f(()=>[b(o).commands.length===0?(v(),E(M,{key:0},{description:f(()=>[...g[21]||(g[21]=[_(" No commands configured yet. ",-1)])]),_:1})):(v(!0),C(W,{key:1},Ce(b(o).commands,(p,k)=>(v(),E(M,{key:k},{name:f(()=>[_(P(p.name),1)]),description:f(()=>[_(P(b(nr)(p.writeType,p.type)),1)]),default:f(()=>[c(be,{icon:"pencil",tooltip:"Edit",onClick:y=>u(p,k)},null,8,["onClick"]),c(be,{icon:"trash-2",tooltip:"Delete",onClick:y=>d(k)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),c(xt,null,{trigger:f(()=>[c(Dt,{icon:"calendar"},{default:f(()=>[...g[22]||(g[22]=[_(" Calendar view ",-1)])]),_:1})]),default:f(()=>[c(hm),c(M,{name:"Show calendar in"},{default:f(()=>[c(Ve,{modelValue:b(o).calendarViewSettings.leaf,"onUpdate:modelValue":g[8]||(g[8]=p=>b(o).calendarViewSettings.leaf=p)},{default:f(()=>[...g[23]||(g[23]=[h("option",{value:"left"},"Left sidebar",-1),h("option",{value:"right"},"Right sidebar",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Show weeks"},{default:f(()=>[c(Ve,{modelValue:b(o).calendarViewSettings.weeks,"onUpdate:modelValue":g[9]||(g[9]=p=>b(o).calendarViewSettings.weeks=p)},{default:f(()=>[...g[24]||(g[24]=[h("option",{value:"none"},"Don't show",-1),h("option",{value:"left"},"Before weekdays",-1),h("option",{value:"right"},"After weekdays",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Today button"},{default:f(()=>[c(Ve,{modelValue:b(o).calendarViewSettings.todayMode,"onUpdate:modelValue":g[10]||(g[10]=p=>b(o).calendarViewSettings.todayMode=p)},{default:f(()=>[...g[25]||(g[25]=[h("option",{value:"create"},"Creates today's note if doesn't exist",-1),h("option",{value:"navigate"},"Opens today's note if it exists",-1),h("option",{value:"switch_date"},"Just switch calendar view to current month",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Pick date button"},{default:f(()=>[c(Ve,{modelValue:b(o).calendarViewSettings.pickMode,"onUpdate:modelValue":g[11]||(g[11]=p=>b(o).calendarViewSettings.pickMode=p)},{default:f(()=>[...g[26]||(g[26]=[h("option",{value:"create"},"Creates note for picked date if doesn't exist",-1),h("option",{value:"navigate"},"Opens note for picked date if it exists",-1),h("option",{value:"switch_date"},"Just switch calendar view to month containing corresponding date",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Highlighting today",header:""}),c(M,{name:"Text color"},{default:f(()=>[c(Bt,{modelValue:b(o).calendarViewSettings.todayStyle.color,"onUpdate:modelValue":g[12]||(g[12]=p=>b(o).calendarViewSettings.todayStyle.color=p)},null,8,["modelValue"])]),_:1}),c(M,{name:"Background color"},{default:f(()=>[c(Bt,{modelValue:b(o).calendarViewSettings.todayStyle.background,"onUpdate:modelValue":g[13]||(g[13]=p=>b(o).calendarViewSettings.todayStyle.background=p)},null,8,["modelValue"])]),_:1}),c(M,{name:"Highlighting active note",header:""}),c(M,{name:"Text color"},{default:f(()=>[c(Bt,{modelValue:b(o).calendarViewSettings.activeStyle.color,"onUpdate:modelValue":g[14]||(g[14]=p=>b(o).calendarViewSettings.activeStyle.color=p)},null,8,["modelValue"])]),_:1}),c(M,{name:"Background color"},{default:f(()=>[c(Bt,{modelValue:b(o).calendarViewSettings.activeStyle.background,"onUpdate:modelValue":g[15]||(g[15]=p=>b(o).calendarViewSettings.activeStyle.background=p)},null,8,["modelValue"])]),_:1})]),_:1})],64))}}),nv=ye(tv,[["__scopeId","data-v-6d5026af"]]);class ov extends X.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=this.app.vault.getAllLoadedFiles(),o=t.toLocaleLowerCase();return n.filter(a=>{if(!(a instanceof X.TFolder))return!1;const r=a.path.toLocaleLowerCase();return r==="/"?!1:r.includes(o)})}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const av=["placeholder","disabled"],fu=I({__name:"FolderInput",props:Ut({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue"),n=fe(),o=_l();let a;return bt(()=>{n.value&&(a=new ov(o,n.value))}),al(()=>{a&&a.close()}),(r,l)=>Yn((v(),C("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:r.placeholder,disabled:r.disabled,spellcheck:"false"},null,8,av)),[[Go,t.value]])}}),rv={},lv={class:"warn"};function sv(e,t){return v(),C("div",lv,[...t[0]||(t[0]=[_(" You use `W` to format weeks which does not respect custom week settings. This might show week number different from what is displayed in Calendar view.",-1),h("br",null,null,-1),_(" It is recommended to use `w` instead (and change start of week using plugin settings if needed). ",-1)])])}const or=ye(rv,[["render",sv],["__scopeId","data-v-c2fb32d2"]]),iv={class:"u-pop"},pu=I({__name:"DateFormatPreview",props:{format:{}},setup(e){const t=e,n=w(()=>Oe().format(t.format)),o=w(()=>t.format.replaceAll(/\[.*?\]/gi,"").includes("W"));return(a,r)=>(v(),C("div",null,[r[0]||(r[0]=_(" Your current syntax looks like this: ",-1)),h("b",iv,P(n.value),1),o.value?(v(),E(or,{key:0})):R("",!0)]))}}),uv=I({__name:"DisplayVariable",props:{name:{}},setup(e){const t=e,n=w(()=>`{{${t.name}}}`);async function o(a){const r=a.target.textContent;if(r)try{await navigator.clipboard.writeText(r),new X.Notice("Copied to clipboard")}catch(l){console.error(l)}}return(a,r)=>(v(),C("span",{class:"variable",onClick:o},P(n.value),1))}}),Ct=ye(uv,[["__scopeId","data-v-bca8a59a"]]),dv=I({__name:"DateVariableReference.modal",setup(e){return(t,n)=>(v(),C(W,null,[n[9]||(n[9]=h("div",null,"Date variables support additional modifications.",-1)),n[10]||(n[10]=h("h4",null,"Changing date format",-1)),n[11]||(n[11]=h("p",null," By default date variables are formatted using Default date format defined in journal settings. However you can override it on variable level by adding colon and putting format definition after it. ",-1)),h("p",null,[n[0]||(n[0]=_("For example ",-1)),c(Ct,{name:"date:YYYY"}),n[1]||(n[1]=_(" will output only year.",-1))]),n[12]||(n[12]=h("p",null,[h("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Formatting reference.")],-1)),n[13]||(n[13]=h("h4",null,"Date manipulation",-1)),n[14]||(n[14]=h("p",null,[_(" You can add or subtract some number of days, weeks, months, quarters or years to date variable by adding "),h("code",null,"+"),_(" or "),h("code",null,"-"),_(" and unit after name variable. ")],-1)),h("p",null,[n[2]||(n[2]=_("For example ",-1)),c(Ct,{name:"date+1w"}),n[3]||(n[3]=_(" will add 1 week to date.",-1))]),n[15]||(n[15]=il("<p>Supported units are:</p><ul><li><code>d</code>: days</li><li><code>w</code>: weeks</li><li><code>m</code>: month</li><li><code>q</code>: quarters</li><li><code>y</code>: years</li></ul><h4>Changing date to start or end of period</h4><p> Date can be changed to start or end of period by using <code>&lt;startOf=period&gt;</code> or <code>&lt;endOf=period&gt;</code></p>",4)),h("p",null,[n[4]||(n[4]=_("For example ",-1)),c(Ct,{name:"date<startOf=year>"}),n[5]||(n[5]=_(" will change date to January 1st",-1))]),n[16]||(n[16]=h("p",null,"Supported periods are:",-1)),n[17]||(n[17]=h("ul",null,[h("li",null,"week"),h("li",null,"month"),h("li",null,"quarter"),h("li",null,"year"),h("li",null,"decade")],-1)),n[18]||(n[18]=h("hr",null,null,-1)),n[19]||(n[19]=h("p",null,"All modifications can be used simultaneously",-1)),h("p",null,[n[6]||(n[6]=_(" For example ",-1)),c(Ct,{name:"date+1w<startOf=week>:MMM DD, YYYY"}),n[7]||(n[7]=_(" will modify date to first date of next week and format it using ",-1)),n[8]||(n[8]=h("code",null,"MMM DD, YYYY",-1))])],64))}}),cv={class:"grid"},fv=I({__name:"VariableReference.modal",props:{type:{},dateFormat:{}},emits:["close"],setup(e){const t=pe(),n=w(()=>e.type==="custom"?"interval":e.type);function o(){new Ne(t,"Date variable modifications",dv,{}).open()}return(a,r)=>(v(),C(W,null,[r[27]||(r[27]=h("p",{class:"hint"},"Clicking on variable will copy it to clipboard.",-1)),h("div",cv,[h("div",null,[c(Ct,{name:"journal_name"})]),r[24]||(r[24]=h("div",null,"Name of corresponding journal",-1)),h("div",null,[c(Ct,{name:"note_name"})]),r[25]||(r[25]=h("div",null,"Name of current note",-1)),h("div",null,[c(Ct,{name:"title"})]),r[26]||(r[26]=h("div",null,"Name of current note (to support core template variable)",-1)),h("div",null,[c(Ct,{name:"date"})]),h("div",null,[_(" Note reference date formatted using default format settings ("+P(a.dateFormat)+").",1),r[3]||(r[3]=h("br",null,null,-1)),a.type==="week"?(v(),C(W,{key:0},[r[0]||(r[0]=_(" Is usually the first day of the week. But for weeks that are considered part of next year but have several day of previous year it will be the last day of week",-1)),r[1]||(r[1]=h("br",null,null,-1))],64)):a.type!=="day"?(v(),C(W,{key:1},[_(" Is same as first day of "+P(n.value)+". ",1),r[2]||(r[2]=h("br",null,null,-1))],64)):R("",!0),r[4]||(r[4]=_(" Variable supports ",-1)),h("a",{href:"#",onClick:o},"additional modifications"),r[5]||(r[5]=_(". ",-1))]),a.type!=="day"?(v(),C(W,{key:0},[h("div",null,[c(Ct,{name:"start_date"})]),h("div",null,[_(" First day of "+P(n.value)+" formatted using default format settings ("+P(a.dateFormat)+").",1),r[6]||(r[6]=h("br",null,null,-1)),r[7]||(r[7]=_(" Variable supports ",-1)),h("a",{href:"#",onClick:o},"additional modifications"),r[8]||(r[8]=_(". ",-1))]),h("div",null,[c(Ct,{name:"end_date"})]),h("div",null,[_(" Last day of "+P(n.value)+" formatted using default format settings ("+P(a.dateFormat)+").",1),r[9]||(r[9]=h("br",null,null,-1)),r[10]||(r[10]=_(" Variable supports ",-1)),h("a",{href:"#",onClick:o},"additional modifications"),r[11]||(r[11]=_(". ",-1))])],64)):R("",!0),h("div",null,[c(Ct,{name:"index"})]),h("div",null,"Index of current "+P(a.type==="custom"?"interval":a.type)+" if enabled.",1),h("div",null,[c(Ct,{name:"current_date"})]),h("div",null,[r[12]||(r[12]=_(" Current date (in YYYY-MM-DD format)",-1)),r[13]||(r[13]=h("br",null,null,-1)),r[14]||(r[14]=_(" Variable supports ",-1)),h("a",{href:"#",onClick:o},"additional modifications"),r[15]||(r[15]=_(". ",-1))]),h("div",null,[c(Ct,{name:"time"})]),h("div",null,[r[16]||(r[16]=_(" Current time (in HH:mm format) ",-1)),r[17]||(r[17]=h("br",null,null,-1)),r[18]||(r[18]=_(" Variable supports ",-1)),h("a",{href:"#",onClick:o},"additional modifications"),r[19]||(r[19]=_(". ",-1))]),h("div",null,[c(Ct,{name:"current_time"})]),h("div",null,[r[20]||(r[20]=_(" Current time (in HH:mm format) ",-1)),r[21]||(r[21]=h("br",null,null,-1)),r[22]||(r[22]=_(" Variable supports ",-1)),h("a",{href:"#",onClick:o},"additional modifications"),r[23]||(r[23]=_(". ",-1))])])],64))}}),pv=ye(fv,[["__scopeId","data-v-aaa55dd0"]]),ba=I({__name:"VariableReferenceHint",props:{type:{},dateFormat:{}},setup(e){const t=e,n=pe();function o(){new Ne(n,"Variable reference",pv,{type:t.type,dateFormat:t.dateFormat}).open()}return(a,r)=>(v(),C("a",{href:"#",onClick:Qt(o,["prevent"])},"Supported variables."))}}),mv=["value"],vv={key:0},hv={key:1},ws=I({__name:"EditCommand.modal",props:{index:{},writeType:{},command:{},commands:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=new Set(X.getIconIds()),a=w(()=>Um(e.writeType));function r(ie){return ie?!e.commands.some((L,me)=>L.name===ie&&me!==e.index):!0}const{defineField:l,errorBag:s,handleSubmit:i}=xn({initialValues:e.command?{...e.command}:{...bm},validationSchema:Vn(wt(At({icon:Xe(),name:wt(Xe(),Gt("Command name is required"),po(r,"Command name should be unique in journal")),type:yt(["same","next","previous","same_next_week","same_previous_week","same_next_month","same_previous_month","same_next_year","same_previous_year"]),context:yt(["today","open_note","only_open_note"]),showInRibbon:rn(),openMode:yt(["active","tab","split","window"])}),Xo(mo([["showInRibbon"],["icon"]],ie=>ie.showInRibbon?o.has(ie.icon):!0,"Icon is required if command is added to ribbon."),["icon"])))}),[u,d]=l("name"),[m,g]=l("icon"),[p,k]=l("type"),[y,x]=l("context"),[A,T]=l("showInRibbon"),[Z,O]=l("openMode"),N=w(()=>a.value.map(ie=>({value:ie,label:nr(e.writeType,ie,y.value)}))),le=i(ie=>{n("submit",ie,e.index),n("close")});return(ie,L)=>(v(),C("form",{onSubmit:L[7]||(L[7]=(...me)=>b(le)&&b(le)(...me))},[c(M,{name:"Name"},{description:f(()=>[L[8]||(L[8]=_(" Journal name will be added to command name automatically. ",-1)),c(et,{errors:b(s).name},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(u),"onUpdate:modelValue":L[0]||(L[0]=me=>ce(u)?u.value=me:null)},b(d)),null,16,["modelValue"])]),_:1}),c(M,{name:"Show in ribbon?"},{default:f(()=>[c(He,De({modelValue:b(A),"onUpdate:modelValue":L[1]||(L[1]=me=>ce(A)?A.value=me:null)},b(T)),null,16,["modelValue"])]),_:1}),b(A)?(v(),E(M,{key:0,name:"Icon"},{description:f(()=>[c(et,{errors:b(s).icon},null,8,["errors"])]),default:f(()=>[c(Cl,De({modelValue:b(m),"onUpdate:modelValue":L[2]||(L[2]=me=>ce(m)?m.value=me:null)},b(g)),null,16,["modelValue"])]),_:1})):R("",!0),c(M,{name:"When command runs"},{default:f(()=>[c(Ve,De({modelValue:b(p),"onUpdate:modelValue":L[3]||(L[3]=me=>ce(p)?p.value=me:null)},b(k)),{default:f(()=>[(v(!0),C(W,null,Ce(N.value,me=>(v(),C("option",{key:me.value,value:me.value},P(me.label),9,mv))),128))]),_:1},16,["modelValue"])]),_:1}),b(p)!=="same"?(v(),E(M,{key:1,name:"Context"},{description:f(()=>[L[9]||(L[9]=_(" Allows to run command only in specific context.",-1)),L[10]||(L[10]=h("br",null,null,-1)),b(y)=="open_note"?(v(),C("div",vv," If there is an open journal note - its date will be takes as current, otherwise command will run relative to today. ")):R("",!0),b(y)=="only_open_note"?(v(),C("div",hv," Will only run when there is an open journal note using its date as current. ")):R("",!0)]),default:f(()=>[c(Ve,De({modelValue:b(y),"onUpdate:modelValue":L[4]||(L[4]=me=>ce(y)?y.value=me:null)},b(x)),{default:f(()=>[...L[11]||(L[11]=[h("option",{value:"today"},"Today",-1),h("option",{value:"open_note"},"Currently opened note",-1),h("option",{value:"only_open_note"},"Only currently opened note",-1)])]),_:1},16,["modelValue"])]),_:1})):R("",!0),c(M,{name:"Open note"},{default:f(()=>[c(Ve,De({modelValue:b(Z),"onUpdate:modelValue":L[5]||(L[5]=me=>ce(Z)?Z.value=me:null)},b(O)),{default:f(()=>[...L[12]||(L[12]=[h("option",{value:"active"},"Replacing active note",-1),h("option",{value:"tab"},"In new tab",-1),h("option",{value:"split"},"Adjacent to active note",-1),h("option",{value:"window"},"In popout window",-1)])]),_:1},16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:L[6]||(L[6]=me=>ie.$emit("close"))},{default:f(()=>[...L[13]||(L[13]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",type:"submit"},{default:f(()=>[...L[14]||(L[14]=[_("Save",-1)])]),_:1})]),_:1})],32))}}),gv=I({__name:"DecorationShape",props:{decoration:{}},setup(e){Fn(a=>({"2bb4d278":o.value,"4a068bcc":n.value}));const t=e,n=w(()=>Vt(t.decoration.color)),o=w(()=>`${t.decoration.size??.4}em`);return(a,r)=>(v(),C("div",{class:$t(["shape-decoration",[`shape-${a.decoration.shape}`]])},null,2))}}),yv=ye(gv,[["__scopeId","data-v-19bc1d49"]]),wv=I({__name:"DecorationCorner",props:{decoration:{}},setup(e){Fn(o=>({"2da80fea":n.value}));const t=e,n=w(()=>Vt(t.decoration.color));return(o,a)=>(v(),C("div",{class:$t(["decoration-corner",[o.decoration.placement]])},null,2))}}),bv=ye(wv,[["__scopeId","data-v-a31b2a0a"]]),kv=I({__name:"DecorationIcon",props:{decoration:{}},setup(e){Fn(a=>({"3aca967e":n.value,"7dcba986":o.value}));const t=e,n=w(()=>Vt(t.decoration.color)),o=w(()=>`${t.decoration.size??.5}em`);return(a,r)=>(v(),E(un,{name:a.decoration.icon,class:"icon-decoration"},null,8,["name"]))}}),_v=ye(kv,[["__scopeId","data-v-365c9744"]]),Cv={class:"calendar-decoration"},Sv={class:"decoration-holder"},xv={class:"decoration-content"},Dv=I({__name:"CalendarDecoration",props:{styles:{}},setup(e){Fn(d=>({"78a061e3":i.value,"1b19861c":n.value,"044db0f0":o.value}));const t=e,n=w(()=>{const d=t.styles.find(m=>m.type==="background");return d?Vt(d.color):"inherit"}),o=w(()=>{const d=t.styles.find(m=>m.type==="color");return d?Vt(d.color):"inherit"}),a=w(()=>t.styles.filter(d=>d.type==="corner")),r=w(()=>{const d={left_top:[],left_middle:[],left_bottom:[],center_top:[],center_middle:[],center_bottom:[],right_top:[],right_middle:[],right_bottom:[]};for(const m of t.styles)(m.type==="shape"||m.type==="icon")&&d[`${m.placement_x}_${m.placement_y}`]?.push(m);return d}),l=w(()=>t.styles.filter(d=>d.type==="border")),s=w(()=>{const d={borderTop:"none",borderBottom:"none",borderLeft:"none",borderRight:"none"};for(const m of l.value)if(m.border==="uniform"){const g=u(m.left);g!=="none"&&(d.borderTop=g,d.borderBottom=g,d.borderLeft=g,d.borderRight=g)}else{const g=u(m.left);g!=="none"&&(d.borderLeft=g);const p=u(m.right);p!=="none"&&(d.borderRight=p);const k=u(m.top);k!=="none"&&(d.borderTop=k);const y=u(m.bottom);y!=="none"&&(d.borderBottom=y)}return d}),i=w(()=>{let d=0,m=0,g=0,p=0,k=0,y=0,x=0,A=0;for(const T of t.styles)if(!(T.type==="background"||T.type==="color")){if(T.type==="border")T.border==="uniform"?(k=Math.max(k,T.left.width),y=Math.max(y,T.left.width),x=Math.max(x,T.right.width),A=Math.max(A,T.bottom.width)):(k=Math.max(k,T.top.width),y=Math.max(y,T.left.width),x=Math.max(x,T.right.width),A=Math.max(A,T.bottom.width));else if(T.type==="shape"||T.type==="icon"){const Z=T.type==="shape"?.4:.5;switch(T.placement_y){case"top":{d=Math.max(d,T.size??Z);break}case"bottom":{p=Math.max(p,T.size??Z);break}}switch(T.placement_x){case"left":{m=Math.max(m,T.size??Z);break}case"right":{g=Math.max(g,T.size??Z);break}}}}return`max(${d+.1}em, ${k+2}px) max(${g+.1}em, ${x+2}px) max(${p+.1}em, ${A+2}px) max(${m+.1}em, ${y+2}px)`});function u(d){return d.show?`${d.width}px ${d.style} ${Vt(d.color)}`:"none"}return(d,m)=>(v(),C("span",Cv,[h("span",{class:"decoration-border",style:uo(s.value)},null,4),(v(!0),C(W,null,Ce(a.value,(g,p)=>(v(),E(bv,{key:p,decoration:g},null,8,["decoration"]))),128)),h("span",Sv,[(v(!0),C(W,null,Ce(r.value,(g,p)=>(v(),C(W,{key:p},[g.length>0?(v(),C("span",{key:0,class:$t(`place place-${p}`)},[(v(!0),C(W,null,Ce(g,(k,y)=>(v(),C(W,{key:y},[k.type==="icon"?(v(),E(_v,{key:0,decoration:k},null,8,["decoration"])):k.type==="shape"?(v(),E(yv,{key:1,decoration:k},null,8,["decoration"])):R("",!0)],64))),128))],2)):R("",!0)],64))),128))]),h("span",xv,[ze(d.$slots,"default",{},void 0,!0)])]))}}),ea=ye(Dv,[["__scopeId","data-v-21382faa"]]);function Vv(e){return Ts()?(Pu(e),!0):!1}const Sl=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const jv=Object.prototype.toString,$v=e=>jv.call(e)==="[object Object]",qn=()=>{},Mv=Nv();function Nv(){var e,t;return Sl&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Vr(e){return Array.isArray(e)?e:[e]}function Ov(e,t,n){return lt(e,t,{...n,immediate:!0})}const mu=Sl?window:void 0,Av=Sl?window.document:void 0;function xo(e){var t;const n=je(e);return(t=n?.$el)!=null?t:n}function Fo(...e){const t=[],n=()=>{t.forEach(s=>s()),t.length=0},o=(s,i,u,d)=>(s.addEventListener(i,u,d),()=>s.removeEventListener(i,u,d)),a=w(()=>{const s=Vr(je(e[0])).filter(i=>i!=null);return s.every(i=>typeof i!="string")?s:void 0}),r=Ov(()=>{var s,i;return[(i=(s=a.value)==null?void 0:s.map(u=>xo(u)))!=null?i:[mu].filter(u=>u!=null),Vr(je(a.value?e[1]:e[0])),Vr(b(a.value?e[2]:e[1])),je(a.value?e[3]:e[2])]},([s,i,u,d])=>{if(n(),!s?.length||!i?.length||!u?.length)return;const m=$v(d)?{...d}:d;t.push(...s.flatMap(g=>i.flatMap(p=>u.map(k=>o(g,p,k,m)))))},{flush:"post"}),l=()=>{r(),n()};return Vv(n),l}let bs=!1;function Tv(e,t,n={}){const{window:o=mu,ignore:a=[],capture:r=!0,detectIframe:l=!1,controls:s=!1}=n;if(!o)return s?{stop:qn,cancel:qn,trigger:qn}:qn;if(Mv&&!bs){bs=!0;const x={passive:!0};Array.from(o.document.body.children).forEach(A=>A.addEventListener("click",qn,x)),o.document.documentElement.addEventListener("click",qn,x)}let i=!0;const u=x=>je(a).some(A=>{if(typeof A=="string")return Array.from(o.document.querySelectorAll(A)).some(T=>T===x.target||x.composedPath().includes(T));{const T=xo(A);return T&&(x.target===T||x.composedPath().includes(T))}});function d(x){const A=je(x);return A&&A.$.subTree.shapeFlag===16}function m(x,A){const T=je(x),Z=T.$.subTree&&T.$.subTree.children;return Z==null||!Array.isArray(Z)?!1:Z.some(O=>O.el===A.target||A.composedPath().includes(O.el))}const g=x=>{const A=xo(e);if(x.target!=null&&!(!(A instanceof Element)&&d(e)&&m(e,x))&&!(!A||A===x.target||x.composedPath().includes(A))){if("detail"in x&&x.detail===0&&(i=!u(x)),!i){i=!0;return}t(x)}};let p=!1;const k=[Fo(o,"click",x=>{p||(p=!0,setTimeout(()=>{p=!1},0),g(x))},{passive:!0,capture:r}),Fo(o,"pointerdown",x=>{const A=xo(e);i=!u(x)&&!!(A&&!x.composedPath().includes(A))},{passive:!0}),l&&Fo(o,"blur",x=>{setTimeout(()=>{var A;const T=xo(e);((A=o.document.activeElement)==null?void 0:A.tagName)==="IFRAME"&&!T?.contains(o.document.activeElement)&&t(x)},0)},{passive:!0})].filter(Boolean),y=()=>k.forEach(x=>x());return s?{stop:y,cancel:()=>{i=!1},trigger:x=>{i=!0,g(x),i=!1}}:y}const Fv=["mousedown","mouseup","keydown","keyup"];function Ev(e,t={}){const{events:n=Fv,document:o=Av,initial:a=null}=t,r=co(a);return o&&n.forEach(l=>{Fo(o,l,s=>{typeof s.getModifierState=="function"&&(r.value=s.getModifierState(e))},{passive:!0})}),r}const Pv={class:"button-dropdown"},Iv=I({__name:"ButtonDropdown",props:{options:{}},emits:["select"],setup(e,{emit:t}){const n=t,o=fe(!1),a=fe(),r=fe(),l=fe({});Tv(r,()=>{o.value=!1});function s(){o.value=!0}function i(u){o.value=!1,n("select",u)}return(u,d)=>(v(),C("div",Pv,[c(ue,{ref_key:"buttonRef",ref:a,onClick:s},{default:f(()=>[ze(u.$slots,"default",{},void 0,!0)]),_:3},512),o.value?(v(),C("div",{key:0,ref_key:"popoutRef",ref:r,class:"button-dropdown-popout",style:uo(l.value)},[(v(!0),C(W,null,Ce(u.options,m=>(v(),E(ue,{key:m.value,flat:"",class:"button-dropdown-option",onClick:g=>i(m.value)},{default:f(()=>[_(P(m.label),1)]),_:2},1032,["onClick"]))),128))],4)):R("",!0)]))}}),Yr=ye(Iv,[["__scopeId","data-v-0f02a50d"]]),Rv={class:"condition-type"},Bv=I({__name:"ConditionNoteName",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),r=w({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(v(),C(W,null,[h("span",Rv,P(l.condition.type),1),c(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[...s[2]||(s[2]=[h("option",{value:"contains"},"contains",-1),h("option",{value:"starts-with"},"starts with",-1),h("option",{value:"ends-with"},"ends with",-1)])]),_:1},8,["modelValue"]),c(Je,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])],64))}}),vu=ye(Bv,[["__scopeId","data-v-2b66f529"]]),Yv={class:"condition-type"},Uv=I({__name:"ConditionTag",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.condition},set(l){o("change",{prop:"condition",value:l})}}),r=w({get(){return n.condition.value},set(l){o("change",{prop:"value",value:l})}});return(l,s)=>(v(),C(W,null,[h("span",Yv,P(l.condition.type),1),c(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[...s[2]||(s[2]=[h("option",{value:"contains"},"contains",-1),h("option",{value:"starts-with"},"starts with",-1),h("option",{value:"ends-with"},"ends with",-1)])]),_:1},8,["modelValue"]),c(Je,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])],64))}}),hu=ye(Uv,[["__scopeId","data-v-bb471cda"]]),gu=I({__name:"ConditionProperty",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.name},set(i){o("change",{prop:"name",value:i})}}),r=w({get(){return n.condition.condition},set(i){o("change",{prop:"condition",value:i})}}),l=w({get(){return n.condition.value},set(i){o("change",{prop:"value",value:i})}}),s=w(()=>n.condition.condition!=="exists"&&n.condition.condition!=="does-not-exist");return(i,u)=>(v(),C(W,null,[u[4]||(u[4]=_(" Property ",-1)),c(Je,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=d=>a.value=d)},null,8,["modelValue"]),c(Ve,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=d=>r.value=d)},{default:f(()=>[...u[3]||(u[3]=[h("option",{value:"exists"},"exists",-1),h("option",{value:"does-not-exist"},"does not exist",-1),h("option",{value:"eq"},"equals",-1),h("option",{value:"neq"},"does not equal",-1),h("option",{value:"contains"},"contains",-1),h("option",{value:"does-not-contain"},"does not contain",-1),h("option",{value:"starts-with"},"starts with",-1),h("option",{value:"ends-with"},"ends with",-1)])]),_:1},8,["modelValue"]),s.value?(v(),E(Je,{key:0,modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=d=>l.value=d)},null,8,["modelValue"])):R("",!0)],64))}}),Wv=["value"],Lv=["value"],Jv=I({__name:"ConditionDate",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return String(n.condition.day)},set(i){o("change",{prop:"day",value:Number.parseInt(i,10)})}}),r=w({get(){return String(n.condition.month)},set(i){o("change",{prop:"month",value:Number.parseInt(i,10)})}}),l=w({get(){return n.condition.year??void 0},set(i){o("change",{prop:"year",value:i??null})}}),s=X.moment().localeData().months();return(i,u)=>(v(),C(W,null,[c(Ve,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=d=>a.value=d)},{default:f(()=>[u[3]||(u[3]=h("option",{value:-1},"Any day",-1)),(v(),C(W,null,Ce(31,d=>h("option",{key:d,value:d},P(d),9,Wv)),64))]),_:1},8,["modelValue"]),c(Ve,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=d=>r.value=d)},{default:f(()=>[u[4]||(u[4]=h("option",{value:-1},"Any month",-1)),(v(!0),C(W,null,Ce(b(s),(d,m)=>(v(),C("option",{key:m,value:m},P(d),9,Lv))),128))]),_:1},8,["modelValue"]),c(ln,{modelValue:l.value,"onUpdate:modelValue":u[2]||(u[2]=d=>l.value=d),placeholder:"Any year"},null,8,["modelValue"])],64))}}),qv={class:"wrapper"},Hv=["value"],zv=I({__name:"ConditionWeekday",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=pe(),r=a.calendarSettings.dow===-1?X.moment().localeData().firstDayOfWeek():a.calendarSettings.dow,l=[];for(let u=r;u<7;++u)l.push(u);for(let u=0;u<r;++u)l.push(u);const s=l.map(u=>({label:X.moment().localeData().weekdaysShort()[u],value:u})),i=fe([...n.condition.weekdays]);return lt(()=>i.value.length,()=>{o("change",{prop:"weekdays",value:[...i.value]})}),(u,d)=>(v(),C("div",qv,[(v(!0),C(W,null,Ce(b(s),({label:m,value:g})=>(v(),C("label",{key:g},[_(P(m)+" ",1),Yn(h("input",{"onUpdate:modelValue":d[0]||(d[0]=p=>i.value=p),type:"checkbox",value:g},null,8,Hv),[[Pc,i.value]])]))),128))]))}}),Kv=ye(zv,[["__scopeId","data-v-250c50b8"]]),Gv=I({__name:"ConditionOffset",props:{condition:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.condition.offset},set(r){o("change",{prop:"offset",value:r})}});return(r,l)=>(v(),C("div",null,[c(ln,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"]),_(" days from interval "+P(a.value>=0?"start":"end"),1)]))}}),Qv=I({__name:"ConditionTypeOnly",props:{condition:{}},setup(e){const t={"has-note":"There is a note connected to date","has-open-task":"There is no completed task in a note connected to date","all-tasks-completed":"All tasks in the note connected to date have been completed"};return(n,o)=>(v(),C("div",null,P(t[n.condition.type]),1))}}),Xv=I({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.condition.type){case"title":return vu;case"tag":return hu;case"property":return gu;case"date":return Jv;case"weekday":return Kv;case"offset":return Gv;case"all-tasks-completed":case"has-note":case"has-open-task":return Qv}return null});return(n,o)=>t.value?(v(),E(zo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["condition"])):R("",!0)}}),Zv=I({__name:"DecorationBackground",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.color},set(r){o("change",{prop:"color",value:r})}});return(r,l)=>(v(),E(M,{name:"Background color"},{default:f(()=>[c(Bt,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"])]),_:1}))}}),eh=I({__name:"DecorationColor",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.color},set(r){o("change",{prop:"color",value:r})}});return(r,l)=>(v(),E(M,{name:"Text color"},{default:f(()=>[c(Bt,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"])]),_:1}))}}),th=I({__name:"DecorationShape",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.shape},set(u){o("change",{prop:"shape",value:u})}}),r=w({get(){return n.decoration.color},set(u){o("change",{prop:"color",value:u})}}),l=w({get(){return n.decoration.placement_x},set(u){o("change",{prop:"placement_x",value:u})}}),s=w({get(){return n.decoration.placement_y},set(u){o("change",{prop:"placement_y",value:u})}}),i=w({get(){return n.decoration.size??.4},set(u){o("change",{prop:"size",value:u})}});return(u,d)=>{const m=Md("ObsidianNumberInput");return v(),C(W,null,[c(M,{name:"Shape"},{default:f(()=>[c(Ve,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=g=>a.value=g)},{default:f(()=>[...d[5]||(d[5]=[h("option",{value:"circle"},"Circle",-1),h("option",{value:"square"},"Square",-1),h("option",{value:"triangle-up"},"Triangle Up",-1),h("option",{value:"triangle-down"},"Triangle Down",-1),h("option",{value:"triangle-left"},"Triangle Left",-1),h("option",{value:"triangle-right"},"Triangle Right",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Color"},{default:f(()=>[c(Bt,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=g=>r.value=g)},null,8,["modelValue"])]),_:1}),c(M,{name:"Size"},{description:f(()=>[...d[6]||(d[6]=[_(" Shape size is relative to font size where 1 means that a figure is same size as a letter ",-1)])]),default:f(()=>[c(m,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=g=>i.value=g),min:.1,step:.1},null,8,["modelValue"])]),_:1}),c(M,{name:"Placement"},{default:f(()=>[c(Ve,{modelValue:l.value,"onUpdate:modelValue":d[3]||(d[3]=g=>l.value=g)},{default:f(()=>[...d[7]||(d[7]=[h("option",{value:"left"},"Left",-1),h("option",{value:"center"},"Center",-1),h("option",{value:"right"},"Right",-1)])]),_:1},8,["modelValue"]),c(Ve,{modelValue:s.value,"onUpdate:modelValue":d[4]||(d[4]=g=>s.value=g)},{default:f(()=>[...d[8]||(d[8]=[h("option",{value:"top"},"Top",-1),h("option",{value:"middle"},"Middle",-1),h("option",{value:"bottom"},"Bottom",-1)])]),_:1},8,["modelValue"])]),_:1})],64)}}}),nh=I({__name:"DecorationCorner",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.placement},set(l){o("change",{prop:"placement",value:l})}}),r=w({get(){return n.decoration.color},set(l){o("change",{prop:"color",value:l})}});return(l,s)=>(v(),C(W,null,[c(M,{name:"Placement"},{default:f(()=>[c(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[...s[2]||(s[2]=[h("option",{value:"top-left"},"Top Left",-1),h("option",{value:"top-right"},"Top Right",-1),h("option",{value:"bottom-left"},"Bottom Left",-1),h("option",{value:"bottom-right"},"Bottom Right",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Color"},{default:f(()=>[c(Bt,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])]),_:1})],64))}}),oh=I({__name:"DecorationIcon",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.icon},set(u){o("change",{prop:"icon",value:u})}}),r=w({get(){return n.decoration.color},set(u){o("change",{prop:"color",value:u})}}),l=w({get(){return n.decoration.placement_x},set(u){o("change",{prop:"placement_x",value:u})}}),s=w({get(){return n.decoration.placement_y},set(u){o("change",{prop:"placement_y",value:u})}}),i=w({get(){return n.decoration.size??.5},set(u){o("change",{prop:"size",value:u})}});return(u,d)=>(v(),C(W,null,[c(M,{name:"Icon"},{default:f(()=>[c(Cl,{modelValue:a.value,"onUpdate:modelValue":d[0]||(d[0]=m=>a.value=m)},null,8,["modelValue"])]),_:1}),c(M,{name:"Color"},{default:f(()=>[c(Bt,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=m=>r.value=m)},null,8,["modelValue"])]),_:1}),c(M,{name:"Size"},{description:f(()=>[...d[5]||(d[5]=[_(" Icon size is relative to font size where 1 means that an icon is same size as a letter ",-1)])]),default:f(()=>[c(ln,{modelValue:i.value,"onUpdate:modelValue":d[2]||(d[2]=m=>i.value=m),min:.1,step:.1},null,8,["modelValue"])]),_:1}),c(M,{name:"Placement"},{default:f(()=>[c(Ve,{modelValue:l.value,"onUpdate:modelValue":d[3]||(d[3]=m=>l.value=m)},{default:f(()=>[...d[6]||(d[6]=[h("option",{value:"left"},"Left",-1),h("option",{value:"center"},"Center",-1),h("option",{value:"right"},"Right",-1)])]),_:1},8,["modelValue"]),c(Ve,{modelValue:s.value,"onUpdate:modelValue":d[4]||(d[4]=m=>s.value=m)},{default:f(()=>[...d[7]||(d[7]=[h("option",{value:"top"},"Top",-1),h("option",{value:"middle"},"Middle",-1),h("option",{value:"bottom"},"Bottom",-1)])]),_:1},8,["modelValue"])]),_:1})],64))}}),fa=I({__name:"DecorationBorderSide",props:{border:{},label:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.border.show},set(i){o("change",{prop:"show",value:i})}}),r=w({get(){return n.border.width},set(i){o("change",{prop:"width",value:i})}}),l=w({get(){return n.border.color},set(i){o("change",{prop:"color",value:i})}}),s=w({get(){return n.border.style},set(i){o("change",{prop:"style",value:i})}});return(i,u)=>(v(),E(M,{name:i.label},{default:f(()=>[c(He,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=d=>a.value=d)},null,8,["modelValue"]),a.value?(v(),C(W,{key:0},[c(ln,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=d=>r.value=d),narrow:"",min:1},null,8,["modelValue"]),c(Ve,{modelValue:s.value,"onUpdate:modelValue":u[2]||(u[2]=d=>s.value=d)},{default:f(()=>[...u[4]||(u[4]=[h("option",{value:"solid"},"Solid",-1),h("option",{value:"dotted"},"Dotted",-1),h("option",{value:"dashed"},"Dashed",-1),h("option",{value:"groove"},"groove",-1),h("option",{value:"groove"},"ridge",-1)])]),_:1},8,["modelValue"]),c(Bt,{modelValue:l.value,"onUpdate:modelValue":u[3]||(u[3]=d=>l.value=d)},null,8,["modelValue"])],64)):R("",!0)]),_:1},8,["name"]))}}),ah=I({__name:"DecorationBorder",props:{decoration:{}},emits:["change"],setup(e,{emit:t}){const n=e,o=t,a=w({get(){return n.decoration.border},set(l){o("change",{prop:"border",value:l})}});function r(l,s){o("change",{prop:l,value:{...n.decoration[l],[s.prop]:s.value}})}return(l,s)=>(v(),C(W,null,[c(M,{name:"Border appearance"},{default:f(()=>[c(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[...s[5]||(s[5]=[h("option",{value:"uniform"},"Uniform",-1),h("option",{value:"different"},"Per side setup",-1)])]),_:1},8,["modelValue"])]),_:1}),c(fa,{label:a.value==="uniform"?"":"Left",border:l.decoration.left,onChange:s[1]||(s[1]=i=>r("left",i))},null,8,["label","border"]),a.value!=="uniform"?(v(),C(W,{key:0},[c(fa,{label:"Top",border:l.decoration.top,onChange:s[2]||(s[2]=i=>r("top",i))},null,8,["border"]),c(fa,{label:"Right",border:l.decoration.right,onChange:s[3]||(s[3]=i=>r("right",i))},null,8,["border"]),c(fa,{label:"Bottom",border:l.decoration.bottom,onChange:s[4]||(s[4]=i=>r("bottom",i))},null,8,["border"])],64)):R("",!0)],64))}}),rh=I({__name:"DecorationItem",props:{decoration:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.decoration.type){case"background":return Zv;case"color":return eh;case"shape":return th;case"corner":return nh;case"icon":return oh;case"border":return ah}return null});return(n,o)=>(v(),E(zo(t.value),{decoration:n.decoration,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["decoration"]))}}),lh={key:0,class:"mode-hint"},sh={key:0,class:"journal-hint"},ih={class:"preview-container"},uh={class:"preview-decoration-block"},dh={key:0,class:"journal-hint"},ch={key:0,class:"separator"},fh=I({__name:"EditDecoration.modal",props:{index:{},writeType:{},decoration:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,o=t,a=Oe().day(),r=fe(n.decoration?.mode??"and"),l=w(()=>{const O=["title","tag","property","has-note","has-open-task","all-tasks-completed"];return n.writeType==="day"?[...O,"date","weekday"]:n.writeType==="custom"?[...O,"offset"]:O}),s=fe(n.decoration?jt(n.decoration.conditions):[]),i=w(()=>{const O=new Set(s.value.map(({type:N})=>N));return l.value.filter(N=>!O.has(N)).map(N=>({value:N,label:em[N]}))});function u(O){s.value.push(jt(lu[O]))}function d(O){s.value.splice(O,1)}function m(O,N){O[N.prop]=N.value}const g=["background","color","shape","corner","icon","border"],p=fe(n.decoration?jt(n.decoration.styles):[]),k=w(()=>{const O=new Set(p.value.map(({type:N})=>N));return g.filter(N=>!O.has(N)).map(N=>({value:N,label:N}))});function y(O){p.value.push(jt(km[O]))}function x(O){p.value.splice(O,1)}function A(O,N){O[N.prop]=N.value}const T=w(()=>p.value.length>0&&s.value.length>0);function Z(){o("submit",{mode:r.value,conditions:s.value,styles:p.value}),o("close")}return(O,N)=>(v(),C("div",null,[c(M,null,{default:f(()=>[N[3]||(N[3]=_(" Decorate elements in calendar when ",-1)),c(Ve,{modelValue:r.value,"onUpdate:modelValue":N[0]||(N[0]=le=>r.value=le)},{default:f(()=>[...N[2]||(N[2]=[h("option",{value:"and"},"all conditions are",-1),h("option",{value:"or"},"any conditions is",-1)])]),_:1},8,["modelValue"]),N[4]||(N[4]=_(" fulfilled ",-1))]),_:1}),c(M,null,{default:f(()=>[c(Yr,{options:i.value,onSelect:u},{default:f(()=>[...N[5]||(N[5]=[_("Add condition",-1)])]),_:1},8,["options"])]),_:1}),(v(!0),C(W,null,Ce(s.value,(le,ie)=>(v(),E(M,{key:ie,class:"condition-wrapper"},{default:f(()=>[ie>0?(v(),C("span",lh,P(r.value),1)):R("",!0),c(Xv,{condition:le,onChange:L=>m(le,L)},null,8,["condition","onChange"]),c(be,{icon:"trash",onClick:L=>d(ie)},null,8,["onClick"])]),_:2},1024))),128)),s.value.length===0?(v(),C("p",sh,"No conditions defined yet")):R("",!0),N[9]||(N[9]=h("div",{class:"separator"},null,-1)),h("div",ih,[h("div",null,[h("div",uh,[c(ea,{class:"preview-decoration",styles:p.value},{default:f(()=>[h("span",null,P(b(a)),1)]),_:1},8,["styles"])])]),h("div",null,[c(M,null,{default:f(()=>[c(Yr,{options:k.value,onSelect:y},{default:f(()=>[...N[6]||(N[6]=[_("Add style",-1)])]),_:1},8,["options"])]),_:1}),p.value.length===0?(v(),C("p",dh,"No styles defined yet")):R("",!0),(v(!0),C(W,null,Ce(p.value,(le,ie)=>(v(),C("div",{key:ie},[ie>0?(v(),C("div",ch)):R("",!0),c(M,null,{name:f(()=>[_("Decorating "+P(le.type),1)]),default:f(()=>[c(be,{icon:"trash",onClick:L=>x(ie)},null,8,["onClick"])]),_:2},1024),c(rh,{decoration:le,onChange:L=>A(le,L)},null,8,["decoration","onChange"])]))),128))])]),c(M,{heading:""},{default:f(()=>[c(ue,{onClick:N[1]||(N[1]=le=>O.$emit("close"))},{default:f(()=>[...N[7]||(N[7]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",disabled:!T.value,onClick:Z},{default:f(()=>[...N[8]||(N[8]=[_("Save",-1)])]),_:1},8,["disabled"])]),_:1})]))}}),ks=ye(fh,[["__scopeId","data-v-8284eb68"]]),ph=I({__name:"RenameJournal.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,a=pe();function r(g){return g===n.name||g!==n.name&&!a.hasJournal(g)}const{defineField:l,errorBag:s,handleSubmit:i}=xn({initialValues:{journalName:n.name},validationSchema:Vn(At({journalName:wt(Xe(),Gt("Journal name is required"),po(r,"Journal name should be unique"))}))}),[u,d]=l("journalName"),m=i(g=>{g.journalName!==n.name&&o("save",g.journalName),o("close")});return(g,p)=>(v(),C("form",{onSubmit:p[2]||(p[2]=Qt((...k)=>b(m)&&b(m)(...k),["prevent"]))},[c(M,{name:"New name"},{description:f(()=>[p[3]||(p[3]=_(" Renaming journal will require restart if you have ribbon icons and/or commands configured. ",-1)),c(et,{errors:b(s).journalName},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(u),"onUpdate:modelValue":p[0]||(p[0]=k=>ce(u)?u.value=k:null)},b(d)),null,16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:p[1]||(p[1]=k=>g.$emit("close"))},{default:f(()=>[...p[4]||(p[4]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",type:"submit"},{default:f(()=>[...p[5]||(p[5]=[_("Save",-1)])]),_:1})]),_:1})],32))}}),mh={d:"day",m:"month",q:"quarter",w:"week",y:"year",h:"hour"};function xl(e){return new RegExp(`{{\\s*(${e})\\s*((?<math>[+-]\\d+)(?<unit>[yqmwd]))?\\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\\s*(:(?<format>.*?))?}}`,"gi")}function jr(e,t,n){if(t.math&&t.unit&&e.add(Number.parseInt(t.math,10),mh[t.unit]),t.shift&&t.shiftTo)if(t.shiftTo==="decade"){const o=t.shift==="start"?e.year()-e.year()%10:e.year()+(9-e.year()%10);e.year(o),t.shift==="start"?e.startOf("year"):e.endOf("year")}else e[t.shift==="start"?"startOf":"endOf"](t.shiftTo);return e.format(t.format??n)}function It(e,t){let n=e??"";for(const[l,s]of Object.entries(t))switch(s.type){case"string":case"number":{n=n.replaceAll(`{{${l}}}`,(s.value??"").toString());break}case"date":{const i=xl(l);n=n.replaceAll(i,(...u)=>{const d=u.at(-1),m=K(s.value);return jr(m,d,s.defaultFormat)});break}}const o=X.moment(),a="HH:mm";n=n.replaceAll(/{{\s*(time|current_time)\s*((?<math>[+-]\d+)(?<unit>[yqmwd]))?\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\s*(:(?<format>.*?))?}}/gi,(...l)=>{const s=l.at(-1),i=o.clone();return jr(i,s,a)});const r="YYYY-MM-DD";return n=n.replaceAll(/{{\s*(current_date)\s*((?<math>[+-]\d+)(?<unit>[yqmwd]))?\s*(<(?<shift>start|end)Of=(?<shiftTo>.*?)>)?\s*(:(?<format>.*?))?}}/gi,(...l)=>{const s=l.at(-1),i=o.clone();return jr(i,s,r)}),n}function yu(e,t){if(!t.includes("<%")&&!t.includes("%>"))return!1;const n=e.plugins.getPlugin("templater-obsidian");return!(!n||!("templater"in n)||!("create_running_config"in n.templater)||!("parse_template"in n.templater))}function vh(e){const t=e.plugins.getPlugin("templater-obsidian");return!(!t||!("editor_handler"in t)||!("jump_to_next_cursor_location"in t.editor_handler))}async function hh(e,t){if(!vh(e))return!1;const n=e.plugins.getPlugin("templater-obsidian");return n?(await n.editor_handler.jump_to_next_cursor_location(t,!0),!0):!1}async function gh(e,t,n,o){if(!yu(e,o))return o;const a=e.plugins.getPlugin("templater-obsidian");if(!a)return o;try{const r=a.templater.create_running_config(t,n,0);return await a.templater.parse_template(r,o)}catch(r){console.error("Error applying templater",r)}return o}function ta(e){const t=on(e),n=pe(),o=w(()=>{const A=t.value;return n.usesShelves&&A?n.journals.filter(T=>T.shelfName===A):n.journals}),a=w(()=>o.value.filter(A=>A.type==="day")),r=w(()=>o.value.filter(A=>A.type==="week")),l=w(()=>o.value.filter(A=>A.type==="month")),s=w(()=>o.value.filter(A=>A.type==="quarter")),i=w(()=>o.value.filter(A=>A.type==="year")),u=w(()=>o.value.filter(A=>A.type==="custom")),d=w(()=>[...In(a.value),...In(u.value,A=>A.conditions.some(T=>T.type==="offset"))]),m=w(()=>In(r.value)),g=w(()=>In(l.value)),p=w(()=>In(s.value)),k=w(()=>In(i.value)),y=w(()=>In(u.value,A=>!A.conditions.some(T=>T.type==="offset"))),x={journals:{all:o,day:a,week:r,month:l,quarter:s,year:i,custom:u},decorations:{day:d,week:m,month:g,quarter:p,year:k,custom:y}};return Ma(Yi,x),x}function In(e,t=()=>!0){return e.flatMap(n=>n.decorations.filter(o=>t(o)).map(o=>({journalName:n.name,decoration:o})))}function na(){const e=eo(Yi);if(!e)throw new Error("Shelf data not provided or composable used outside of vue context");return e}function wu(e,t){const n=on(t);return w(()=>e.getJournal(n.value))}function yh(e,t,n){const o=on(t),a=on(n),r=wu(e,a),l=w(()=>o.value&&r.value?r.value.resolveAnchorDate(o.value):null);return{anchorDate:l,noteData:w(()=>!r.value||!l.value?null:e.index.get(r.value.name,l.value))}}function Dl(e,t,n){const o=on(n);return w(()=>{const a=b(t);return a?o.value.flatMap(({journalName:r,decoration:l})=>wh(e,a,r,l).value):[]})}function wh(e,t,n,o){const a=on(t),r=on(n),l=on(o);return w(()=>{if(!a.value)return[];const{noteData:s}=yh(e,a,r);return bh(e,a.value,r.value,s.value,l.value.mode,l.value.conditions)?l.value.styles:[]})}function bh(e,t,n,o,a,r){return r.length===0?!1:a==="or"?r.some(l=>_s(e,t,n,o,l)):r.every(l=>_s(e,t,n,o,l))}function _s(e,t,n,o,a){switch(a.type){case"title":return kh(o,a);case"tag":return _h(o,a);case"date":return Ch(t,a);case"property":return Sh(o,a);case"weekday":return xh(t,a);case"offset":return Dh(e,t,n,a);case"all-tasks-completed":return Vh(o);case"has-note":return $h(o);case"has-open-task":return jh(o)}return!1}function kh(e,t){if(!e)return!1;const n=e.title.toLowerCase(),o=t.value.toLowerCase();switch(t.condition){case"contains":return n.includes(o);case"starts-with":return n.startsWith(o);case"ends-with":return n.endsWith(o)}return!1}function _h(e,t){if(!e)return!1;const n=e.tags;if(n.length===0)return!1;const o=t.value.toLowerCase();switch(t.condition){case"contains":return n.some(a=>a.toLowerCase().includes(o));case"starts-with":return n.some(a=>a.toLowerCase().startsWith(o));case"ends-with":return n.some(a=>a.toLowerCase().endsWith(o))}}function Ch(e,t){const n=K(e);return!(t.day!==-1&&n.date()!==t.day||t.month!==-1&&n.month()!==t.month||t.year&&n.year()!==t.year)}function Sh(e,t){if(!e)return!1;const n=e.properties,o=t.name;switch(t.condition){case"exists":return o in n;case"does-not-exist":return!(o in n);case"eq":return n[o]==t.value;case"neq":return n[o]!=t.value;case"contains":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"does-not-contain":return Array.isArray(n[o])?!n[o].some(a=>typeof a=="string"&&a.toLowerCase().includes(t.value.toLowerCase())):typeof n[o]=="string"?!n[o].toLowerCase().includes(t.value.toLowerCase()):!1;case"starts-with":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().startsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().startsWith(t.value.toLowerCase()):!1;case"ends-with":return Array.isArray(n[o])?n[o].some(a=>typeof a=="string"&&a.toLowerCase().endsWith(t.value.toLowerCase())):typeof n[o]=="string"?n[o].toLowerCase().endsWith(t.value.toLowerCase()):!1}return!1}function xh(e,t){const n=K(e);return t.weekdays.includes(n.day())}function Dh(e,t,n,o){const[a,r]=wu(e,n).value?.calculateOffset(t)??[0,0];return o.offset<0?r===o.offset:a===o.offset}function Vh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.every(n=>n.completed)}function jh(e){if(!e)return!1;const t=e.tasks;return t.length===0?!1:t.filter(o=>!o.completed).length>0}function $h(e){return!!e}const bu=(e,t)=>{const n=co(),o=Ev(X.Platform.isMacOS?"Meta":"Control");Fo(e,"mouseenter",a=>n.value=a,{passive:!0}),Un(()=>{n.value&&o.value&&(t(n.value),n.value=void 0)})},Mh=I({__name:"NavigationBlockRow",props:{row:{},refDate:{},defaultFormat:{},journal:{}},emits:["navigate","contextmenu","preview"],setup(e,{emit:t}){Fn(N=>({"6c73dd27":s.value,"25848e1e":i.value,"220cc54b":u.value,"86021d66":x.value,a98192e8:d.value,"01e35fa5":m.value}));const n=t,o=ai("row");bu(o,O);const a=w(()=>e.journal.resolveAnchorDate(e.refDate)),r=w(()=>e.journal.get(e.refDate)),l=w(()=>It(e.row.template,{date:{type:"date",value:e.refDate,defaultFormat:e.defaultFormat},start_date:{type:"date",value:a.value?e.journal.resolveStartDate(a.value):"",defaultFormat:e.defaultFormat},end_date:{type:"date",value:a.value?e.journal.resolveEndDate(a.value):"",defaultFormat:e.defaultFormat},relative_date:{type:"string",value:a.value?e.journal.resolveRelativeDate(a.value):""},journal_name:{type:"string",value:e.journal.name},index:{type:"number",value:r.value?.index}})),s=w(()=>`${e.row.fontSize}em`),i=w(()=>e.row.bold?"bold":"normal"),u=w(()=>e.row.italic?"italic":"normal"),d=w(()=>Vt(e.row.color)),m=w(()=>Vt(e.row.background)),g=pe(),{journals:p,decorations:k}=na(),y=w(()=>e.row.link==="none"?!1:e.row.link==="self"?!0:e.row.link==="journal"?!!e.row.journal:p[e.row.link].value.length>0),x=w(()=>y.value?"pointer":"default"),A=Dl(g,a,k[e.journal.type]);function T(N){e.row.link!=="none"&&(e.row.link==="journal"?n("navigate","journal",e.refDate,N,e.journal.name):n("navigate",e.row.link,e.refDate,N))}function Z(N){e.row.link!=="none"&&(e.row.link==="journal"?n("contextmenu","journal",e.refDate,N,e.journal.name):n("contextmenu",e.row.link,e.refDate,N))}function O(N){e.row.link!=="none"&&(e.row.link==="journal"?n("preview","journal",e.refDate,N,e.journal.name):n("preview",e.row.link,e.refDate,N))}return(N,le)=>a.value?(v(),C("div",{key:0,ref:"row",class:"row",onClick:Qt(T,["prevent"]),onContextmenu:Z},[N.row.addDecorations?(v(),E(ea,{key:0,styles:b(A)},{default:f(()=>[_(P(l.value),1)]),_:1},8,["styles"])):(v(),C(W,{key:1},[_(P(l.value),1)],64))],544)):R("",!0)}}),Ur=ye(Mh,[["__scopeId","data-v-ac900525"]]),Nh={key:0},Oh={class:"nav-row-wrapper"},Ah={class:"controls"},Th=I({__name:"NavigationBlockEditPreview",props:{refDate:{},journalName:{},rows:{}},emits:["move-up","move-down","edit","remove"],setup(e){const t=e,n=pe(),o=w(()=>n.getJournal(t.journalName)),a=w(()=>o.value?.shelfName??null);return ta(a),(r,l)=>o.value?(v(),C("div",Nh,[l[0]||(l[0]=h("div",{class:"setting-item-description"},"Hover a row to see controls",-1)),(v(!0),C(W,null,Ce(r.rows,(s,i)=>(v(),C("div",{key:i,class:"nav-row"},[h("div",Oh,[c(Ur,{journal:o.value,row:s,"ref-date":r.refDate,"default-format":o.value.dateFormat},null,8,["journal","row","ref-date","default-format"])]),h("div",Ah,[i>0?(v(),E(be,{key:0,icon:"arrow-up",tooltip:"Move up",onClick:u=>r.$emit("move-up",i)},null,8,["onClick"])):R("",!0),i<r.rows.length-1?(v(),E(be,{key:1,icon:"arrow-down",tooltip:"Move down",onClick:u=>r.$emit("move-down",i)},null,8,["onClick"])):R("",!0),c(be,{icon:"pencil",tooltip:"Edit",onClick:u=>r.$emit("edit",i)},null,8,["onClick"]),c(be,{icon:"trash-2",tooltip:"Delete",onClick:u=>r.$emit("remove",i)},null,8,["onClick"])])]))),128))])):R("",!0)}}),Cs=ye(Th,[["__scopeId","data-v-eca349a0"]]),Fh={class:"u-pop"},Eh=["value"],pa=I({__name:"EditNavBlockRow.modal",props:{row:{},currentJournal:{}},emits:["close","submit"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.getJournal(e.currentJournal)),r=w(()=>a.value?.shelfName??null),{journals:l}=ta(r),s=w(()=>l.all.value.map(({name:z})=>z).filter(z=>z!==e.currentJournal)),{defineField:i,errorBag:u,handleSubmit:d}=xn({initialValues:e.row?{template:e.row.template,fontSize:e.row.fontSize,bold:e.row.bold,italic:e.row.italic,link:e.row.link,journal:e.row.journal,color:jt(e.row.color),background:jt(e.row.background),addDecorations:e.row.addDecorations}:{template:"",fontSize:1,bold:!1,italic:!1,link:"none",journal:"",color:{type:"theme",name:"text-normal"},background:{type:"transparent"},addDecorations:!1},validationSchema:Vn(wt(At({template:wt(Xe(),Gt("Template is required")),fontSize:hl(),bold:rn(),italic:rn(),color:gs,background:gs,link:yt(["none","self","journal","day","week","month","quarter","year"]),journal:Xe(),addDecorations:rn()}),Xo(mo([["link"],["journal"]],z=>z.link==="journal"?!!z.journal:!0,"Please select a journal."),["journal"])))}),[m,g]=i("template"),[p,k]=i("fontSize"),[y,x]=i("bold"),[A,T]=i("italic"),[Z,O]=i("color"),[N,le]=i("background"),[ie,L]=i("link"),[me,Le]=i("journal"),[Te,tt]=i("addDecorations"),vt=w({get(){return Z.value??{type:"transparent"}},set(z){Z.value=z}}),nt=w({get(){return N.value??{type:"transparent"}},set(z){N.value=z}}),qe=w(()=>{if(!a.value)return"";const z=Oe().format(_e),oe=a.value.resolveAnchorDate(z),$e=a.value?.dateFormat??_e;return It(m.value??"",{date:{type:"date",value:z,defaultFormat:$e},start_date:{type:"date",value:oe?a.value.resolveStartDate(oe):"",defaultFormat:$e},end_date:{type:"date",value:oe?a.value.resolveEndDate(oe):"",defaultFormat:$e},relative_date:{type:"string",value:oe?a.value.resolveRelativeDate(oe):""},journal_name:{type:"string",value:a.value?.name??""},index:{type:"number",value:a.value?.config.value.index.enabled?1:void 0}})}),ee=w(()=>m.value?[...m.value.matchAll(/{{(.*?):(.*?)}}/gi)].some(([,,oe])=>oe?.replaceAll(/\[.*?\]/gi,"").includes("W")):!1),ne=d(z=>{n("submit",z),n("close")});return(z,oe)=>(v(),C("form",{onSubmit:oe[10]||(oe[10]=(...$e)=>b(ne)&&b(ne)(...$e))},[c(M,{name:"Row template"},{description:f(()=>[h("div",null,[a.value?(v(),E(ba,{key:0,type:a.value.type,"date-format":a.value.dateFormat},null,8,["type","date-format"])):R("",!0),oe[11]||(oe[11]=h("br",null,null,-1)),oe[12]||(oe[12]=_(" With resolved variables: ",-1)),h("b",Fh,P(qe.value),1)]),ee.value?(v(),E(or,{key:0})):R("",!0),c(et,{errors:b(u).template},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(m),"onUpdate:modelValue":oe[0]||(oe[0]=$e=>ce(m)?m.value=$e:null)},b(g)),null,16,["modelValue"])]),_:1}),c(M,{name:"Font size"},{description:f(()=>[c(et,{errors:b(u).fontSize},null,8,["errors"])]),default:f(()=>[c(ln,De({modelValue:b(p),"onUpdate:modelValue":oe[1]||(oe[1]=$e=>ce(p)?p.value=$e:null)},b(k),{min:.5,step:.1}),null,16,["modelValue"])]),_:1}),c(M,{name:"Bold"},{default:f(()=>[c(He,De({modelValue:b(y),"onUpdate:modelValue":oe[2]||(oe[2]=$e=>ce(y)?y.value=$e:null)},b(x)),null,16,["modelValue"])]),_:1}),c(M,{name:"Italic"},{default:f(()=>[c(He,De({modelValue:b(A),"onUpdate:modelValue":oe[3]||(oe[3]=$e=>ce(A)?A.value=$e:null)},b(T)),null,16,["modelValue"])]),_:1}),c(M,{name:"Text color"},{description:f(()=>[c(et,{errors:b(u).color},null,8,["errors"])]),default:f(()=>[c(Bt,De({modelValue:vt.value,"onUpdate:modelValue":oe[4]||(oe[4]=$e=>vt.value=$e)},b(O)),null,16,["modelValue"])]),_:1}),c(M,{name:"Background color"},{default:f(()=>[c(Bt,De({modelValue:nt.value,"onUpdate:modelValue":oe[5]||(oe[5]=$e=>nt.value=$e)},b(le)),null,16,["modelValue"])]),_:1}),c(M,{name:"Link"},{default:f(()=>[c(Ve,De({modelValue:b(ie),"onUpdate:modelValue":oe[6]||(oe[6]=$e=>ce(ie)?ie.value=$e:null)},b(L)),{default:f(()=>[...oe[13]||(oe[13]=[h("option",{value:"none"},"None",-1),h("option",{value:"self"},"Self",-1),h("option",{value:"journal"},"Journal",-1),h("option",{value:"day"},"Day",-1),h("option",{value:"week"},"Week",-1),h("option",{value:"month"},"Month",-1),h("option",{value:"quarter"},"Quarter",-1),h("option",{value:"year"},"Year",-1)])]),_:1},16,["modelValue"])]),_:1}),b(ie)==="journal"?(v(),E(M,{key:0,name:"Journal"},{description:f(()=>[c(et,{errors:b(u).journal},null,8,["errors"])]),default:f(()=>[c(Ve,De({modelValue:b(me),"onUpdate:modelValue":oe[7]||(oe[7]=$e=>ce(me)?me.value=$e:null)},b(Le)),{default:f(()=>[(v(!0),C(W,null,Ce(s.value,$e=>(v(),C("option",{key:$e,value:$e},P($e),9,Eh))),128))]),_:1},16,["modelValue"])]),_:1})):R("",!0),c(M,{name:"Add decorations"},{default:f(()=>[c(He,De({modelValue:b(Te),"onUpdate:modelValue":oe[8]||(oe[8]=$e=>ce(Te)?Te.value=$e:null)},b(tt)),null,16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:oe[9]||(oe[9]=$e=>z.$emit("close"))},{default:f(()=>[...oe[14]||(oe[14]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",type:"submit"},{default:f(()=>[...oe[15]||(oe[15]=[_("Save",-1)])]),_:1})]),_:1})],32))}}),Ph=["value"],Ih=I({__name:"JournalShelf.modal",props:{currentShelf:{}},emits:["close","save"],setup(e,{emit:t}){const n=t,o=pe(),a=fe(e.currentShelf);function r(){a.value!==e.currentShelf&&n("save",a.value),n("close")}return(l,s)=>(v(),C(W,null,[c(M,{name:"Shelf"},{default:f(()=>[c(Ve,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=i=>a.value=i)},{default:f(()=>[s[2]||(s[2]=h("option",{value:""},"Not on a shelf",-1)),(v(!0),C(W,null,Ce(b(o).shelves,i=>(v(),C("option",{key:i.name,value:i.name},P(i.name),9,Ph))),128))]),_:1},8,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:s[1]||(s[1]=i=>l.$emit("close"))},{default:f(()=>[...s[3]||(s[3]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",onClick:r},{default:f(()=>[...s[4]||(s[4]=[_("Save",-1)])]),_:1})]),_:1})],64))}}),Rh={class:"u-pop path-preview"},Bh=I({__name:"PathPreview",props:{journalName:{}},setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Oe().format("YYYY-MM-DD")})),a=w(()=>n.value?n.value.getConfiguredPathData(o.value)[0]+"/":""),r=w(()=>{const l=n.value?.config.value.folder;if(!l)return!1;const s=xl("(.*?)");return[...l.matchAll(s)].some(i=>i.groups?.format?.replaceAll(/\[.*?\]/gi,"").includes("W"))});return(l,s)=>(v(),C("div",null,[s[0]||(s[0]=_(" Folder with resolved variables: ",-1)),h("b",Rh,P(a.value),1),r.value?(v(),E(or,{key:0})):R("",!0)]))}}),Yh=ye(Bh,[["__scopeId","data-v-d4817209"]]),Uh=I({__name:"DisplayCodeBlock",props:{name:{}},setup(e){async function t(n){const o=n.target.innerText;if(o)try{await navigator.clipboard.writeText(o),new X.Notice("Copied to clipboard")}catch(a){console.error(a)}}return(n,o)=>(v(),C("div",{class:"code-block-sample",onClick:t},[_(" ```"+P(n.name),1),o[1]||(o[1]=h("br",null,null,-1)),n.$slots.default?(v(),C(W,{key:0},[ze(n.$slots,"default",{},void 0,!0),o[0]||(o[0]=h("br",null,null,-1))],64)):R("",!0),o[2]||(o[2]=_("``` ",-1))]))}}),_o=ye(Uh,[["__scopeId","data-v-2c805b7f"]]);function ar(e){const t=on(e),n=pe();return w(()=>{const o=t.value;return o?n.index.getForPathComputed(o).value:null})}function Lo(e){return X.Keymap.isModifier(e,"Mod")||e.button===1?"tab":"active"}const Wh={key:0,class:"nav-block"},Lh=I({__name:"NavigationBlock",props:{refDate:{},journalName:{},rows:{},preventNavigation:{type:Boolean},decorateBlock:{type:Boolean}},emits:["move-up","move-down","edit","remove"],setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>n.value?.shelfName??null),{journals:a,decorations:r}=ta(o),l=w(()=>n.value?r[n.value.type].value.filter(m=>m.journalName===e.journalName):[]),s=Dl(t,e.refDate,l);async function i(m,g,p,k){if(!e.preventNavigation&&m!=="none")if(m==="self"){const y=n.value?.get(e.refDate);y&&await n.value?.open(y)}else if(m==="journal"){if(!k)return;await On(t,g,k)}else{const y=a[m].value.map(x=>x.name);await Wo(t,g,y,!1,p&&Lo(p),p)}}function u(m,g,p,k){if(!e.preventNavigation&&m!=="none")if(m==="self"){const y=n.value?.get(e.refDate);y&&"path"in y&&t.appManager.showContextMenu(y.path,p)}else if(m==="journal"){if(!k)return;const y=t.getJournal(k);if(!y)return;const x=y.get(g);x&&"path"in x&&t.appManager.showContextMenu(x.path,p)}else{const y=a[m].value.map(x=>x.get(g)).filter(x=>!!x&&"path"in x);if(y.length===0)return;if(y.length===1){if(!y[0])return;t.appManager.showContextMenu(y[0].path,p)}else{const x=new X.Menu;for(const A of y)x.addItem(T=>{T.setTitle(A.path).onClick(()=>{t.appManager.showContextMenu(A.path,p)})});x.showAtMouseEvent(p)}}}function d(m,g,p,k){if(!e.preventNavigation&&m!=="none")if(m==="self"){const y=n.value?.get(e.refDate);y&&"path"in y&&t.appManager.showPreview(y.path,p)}else if(m==="journal"){if(!k)return;const y=t.getJournal(k);if(!y)return;const x=y.get(g);x&&"path"in x&&t.appManager.showPreview(x.path,p)}else{const y=a[m].value.map(x=>x.get(g)).find(x=>!!x&&"path"in x);if(!y)return;t.appManager.showPreview(y.path,p)}}return(m,g)=>n.value?(v(),C("div",Wh,[m.decorateBlock?(v(),E(ea,{key:0,styles:b(s),class:"nav-block"},{default:f(()=>[(v(!0),C(W,null,Ce(m.rows,(p,k)=>(v(),C("div",{key:k},[c(Ur,{journal:n.value,row:p,"ref-date":m.refDate,"default-format":n.value.dateFormat,onNavigate:i,onContextmenu:u,onPreview:d},null,8,["journal","row","ref-date","default-format"])]))),128))]),_:1},8,["styles"])):(v(!0),C(W,{key:1},Ce(m.rows,(p,k)=>(v(),C("div",{key:k},[c(Ur,{journal:n.value,row:p,"ref-date":m.refDate,"default-format":n.value.dateFormat,onNavigate:i,onContextmenu:u,onPreview:d},null,8,["journal","row","ref-date","default-format"])]))),128))])):R("",!0)}}),ka=ye(Lh,[["__scopeId","data-v-04d38ce8"]]),Jh={key:0,class:"nav-view"},qh={key:0,class:"nav-block-relative"},Hh={key:1,class:"nav-block-relative"},zh={key:2,class:"nav-block-relative"},Kh={key:3,class:"nav-block-relative"},Gh={key:1},Qh=I({__name:"NavigationCodeBlock",props:{path:{},preventNavigation:{type:Boolean}},setup(e){const t=e,n=pe(),o=ar(t.path),a=w(()=>o.value?n.getJournal(o.value.journal):null),r=w(()=>{if(!o.value||!a.value)return null;const i=a.value.navBlock.type==="existing";return a.value.next(o.value.date,i)}),l=w(()=>{if(!o.value||!a.value)return null;const i=a.value.navBlock.type==="existing";return a.value.previous(o.value.date,i)});function s(i){t.preventNavigation||On(n,i.date,i.journal).catch(console.error)}return(i,u)=>b(o)&&a.value?(v(),C("div",Jh,[l.value?(v(),C("div",qh,[c(ka,{rows:a.value.navBlock.rows,"ref-date":l.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),c(be,{icon:"arrow-left",class:"nav-prev",onClick:u[0]||(u[0]=d=>s(l.value))})])):(v(),C("div",Hh)),c(ka,{rows:a.value.navBlock.rows,class:"nav-block","ref-date":b(o).date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"]),r.value?(v(),C("div",zh,[c(be,{icon:"arrow-right",class:"nav-next",onClick:u[1]||(u[1]=d=>s(r.value))}),c(ka,{rows:a.value.navBlock.rows,"ref-date":r.value.date,"journal-name":b(o).journal,"prevent-navigation":i.preventNavigation,"decorate-block":a.value.navBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","prevent-navigation","decorate-block"])])):(v(),C("div",Kh))])):(v(),C("div",Gh,"Note is not connected to a journal"))}}),ku=ye(Qh,[["__scopeId","data-v-3fb7392e"]]),_u=["week","month","quarter","calendar"];function Xh(e){const t=fe([]),n=pe();return Un(()=>{const o=K(e.value);if(!o.isValid())return;n.calendarSettings.dow;const a=Oe(),r=o.clone().startOf("week"),l=o.clone().endOf("week"),s=n.calendarViewSettings.weeks||"left",i=[];s==="left"&&i.push({date:r.format("[W]w"),key:r.format(_e),outside:!1,isWeekNumber:!0,disabled:!1});const u=r.clone();for(;u.isSameOrBefore(l);)i.push({date:u.format("D"),key:u.format(_e),today:u.isSame(a,"day"),outside:!o.isSame(u,"month"),isWeekNumber:!1,disabled:!1}),u.add(1,"day");s==="right"&&i.push({date:r.format("[W]w"),key:r.format(_e),outside:!1,isWeekNumber:!0,disabled:!1}),t.value=i}),{grid:t}}function rr(e){return w(()=>e.activeNote?e.index.getForPathComputed(e.activeNote).value:null)}const Zh=I({__name:"NotesCalendarButton",props:{date:{},type:{},inactive:{type:Boolean}},setup(e){const t=ai("button"),n=pe(),{journals:o,decorations:a}=na(),r=w(()=>!e.inactive&&o[e.type].value.length>0),l=w(()=>Ui[e.type]),s=w(()=>e.date),i=Dl(n,s,a[e.type]);bu(t,m);function u(g){r.value&&Wo(n,e.date,o[e.type].value.map(p=>p.name),!1,Lo(g),g).catch(console.error)}function d(g){const p=[];for(const k of o[e.type].value){const y=k.get(e.date);y&&"path"in y&&p.push(y)}if(p.length!==0)if(p.length===1){const[k]=p;if(!k)return;n.appManager.showContextMenu(k.path,g)}else{const k=new X.Menu;for(const y of p)k.addItem(x=>{x.setTitle(y.path).onClick(()=>{n.appManager.showContextMenu(y.path,g)})});k.showAtMouseEvent(g)}}function m(g){if(!r.value)return;const p=[];for(const y of o[e.type].value){const x=y.get(e.date);x&&"path"in x&&p.push(x)}const[k]=p;k&&n.appManager.showPreview(k.path,g)}return(g,p)=>(v(),E(Zo,{ref:"button",class:"calendar-button",clickable:r.value,onClick:u,onContextmenu:d},{default:f(()=>[g.inactive?R("",!0):(v(),E(ea,{key:0,styles:b(i)},{default:f(()=>[c(lo,{date:g.date,format:l.value},null,8,["date","format"])]),_:1},8,["styles"]))]),_:1},8,["clickable"]))}}),qt=ye(Zh,[["__scopeId","data-v-57636ff7"]]),eg=I({__name:"NotesWeekView",props:{refDate:{}},setup(e){const t=pe(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=na(),a=w(()=>o.quarter.value.length>0),{grid:r}=Xh(w(()=>e.refDate)),l=w(()=>K(e.refDate).startOf("month").format(_e)),s=w(()=>K(e.refDate).startOf("quarter").format(_e)),i=w(()=>K(e.refDate).startOf("year").format(_e)),u=rr(t),d=w(()=>u.value?t.getJournal(u.value.journal):null),m=w(()=>d.value?.type==="day"),g=w(()=>d.value?.type==="week"),p=w(()=>d.value?.type==="month"&&u.value?.date===l.value),k=w(()=>d.value?.type==="quarter"&&u.value?.date===s.value),y=w(()=>d.value?.type==="year"&&u.value?.date===i.value);return(x,A)=>(v(),E(vo,{columns:n.value},{header:f(()=>[ze(x.$slots,"header",{},()=>[c(qt,{date:x.refDate,type:"month","data-selected":p.value?"":null},null,8,["date","data-selected"]),a.value?(v(),E(qt,{key:0,date:x.refDate,type:"quarter","data-selected":k.value?"":null},null,8,["date","data-selected"])):R("",!0),c(qt,{date:x.refDate,type:"year","data-selected":y.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[c(gl),(v(!0),C(W,null,Ce(b(r),T=>(v(),E(qt,{key:T.key+(T.isWeekNumber?"week":"day"),class:$t({"week-number":T.isWeekNumber}),date:T.key,type:T.isWeekNumber?"week":"day","data-outside":T.outside||null,"data-today":T.today||null,"data-selected":b(u)&&(T.isWeekNumber&&g.value||!T.isWeekNumber&&m.value)&&b(u)?.date===T.key?"":null},null,8,["class","date","type","data-outside","data-today","data-selected"]))),128))]),_:3},8,["columns"]))}}),tg=ye(eg,[["__scopeId","data-v-307b41ae"]]),ng={class:"timeline-week"},og=I({__name:"TimelineWeek",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Oe().format("YYYY-MM-DD"));return(o,a)=>(v(),C("div",ng,[c(tg,{"ref-date":n.value},null,8,["ref-date"])]))}}),ag=ye(og,[["__scopeId","data-v-1d4774b6"]]),rg=I({__name:"NotesMonthView",props:{refDate:{},hideOutsideDates:{type:Boolean}},emits:["select","selectWeek"],setup(e){const t=pe(),n=w(()=>t.calendarViewSettings.weeks==="none"?7:8),{journals:o}=na(),a=w(()=>o.quarter.value.length>0),{grid:r}=ou(w(()=>e.refDate)),l=w(()=>K(e.refDate).startOf("month").format(_e)),s=w(()=>K(e.refDate).startOf("quarter").format(_e)),i=w(()=>K(e.refDate).startOf("year").format(_e)),u=rr(t),d=w(()=>u.value?t.getJournal(u.value.journal):null),m=w(()=>d.value?.type==="day"),g=w(()=>d.value?.type==="week"),p=w(()=>d.value?.type==="month"&&u.value?.date===l.value),k=w(()=>d.value?.type==="quarter"&&u.value?.date===s.value),y=w(()=>d.value?.type==="year"&&u.value?.date===i.value);return(x,A)=>(v(),E(vo,{class:"month-grid",columns:n.value,"compact-first-line":""},{header:f(()=>[ze(x.$slots,"header",{},()=>[c(qt,{date:x.refDate,type:"month","data-selected":p.value?"":null},null,8,["date","data-selected"]),a.value?(v(),E(qt,{key:0,date:x.refDate,type:"quarter","data-selected":k.value?"":null},null,8,["date","data-selected"])):R("",!0),c(qt,{date:x.refDate,type:"year","data-selected":y.value?"":null},null,8,["date","data-selected"])],!0)]),default:f(()=>[c(gl),(v(!0),C(W,null,Ce(b(r),T=>(v(),E(qt,{key:T.key+(T.isWeekNumber?"week":"day"),class:$t({"week-number":T.isWeekNumber}),date:T.key,type:T.isWeekNumber?"week":"day","data-outside":T.outside||null,"data-today":T.today||null,inactive:x.hideOutsideDates&&T.outside,"data-selected":b(u)&&(T.isWeekNumber&&g.value||!T.isWeekNumber&&m.value)&&b(u)?.date===T.key?"":null},null,8,["class","date","type","data-outside","data-today","inactive","data-selected"]))),128))]),_:3},8,["columns"]))}}),lr=ye(rg,[["__scopeId","data-v-34fdf9ce"]]),lg={class:"timeline-month"},sg=I({__name:"TimelineMonth",props:{noteData:{}},setup(e){const t=w(()=>e.noteData?e.noteData.date:Oe().format("YYYY-MM-DD"));return(n,o)=>(v(),C("div",lg,[c(lr,{"ref-date":t.value},null,8,["ref-date"])]))}}),ig=ye(sg,[["__scopeId","data-v-889faf70"]]),ug={class:"timeline-quarter-container"},dg={class:"timeline-quarter"},cg=I({__name:"TimelineQuarter",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Oe().format("YYYY-MM-DD")),o=w(()=>K(n.value)),a=w(()=>{const r=o.value.clone().startOf("quarter");return[r.clone(),r.clone().add(1,"month"),r.clone().add(2,"month")]});return(r,l)=>(v(),C("div",ug,[h("div",dg,[(v(!0),C(W,null,Ce(a.value,s=>(v(),E(lr,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),fg=ye(cg,[["__scopeId","data-v-d9d5c81f"]]),pg={class:"timeline-calendar-container"},mg={class:"timeline-calendar"},vg=I({__name:"TimelineCalendar",props:{noteData:{}},setup(e){const t=e,n=w(()=>t.noteData?t.noteData.date:Oe().format("YYYY-MM-DD")),o=w(()=>K(n.value)),a=w(()=>{const r=o.value.clone().startOf("year");return Array.from({length:12}).map((l,s)=>r.clone().add(s,"month"))});return(r,l)=>(v(),C("div",pg,[h("div",mg,[(v(!0),C(W,null,Ce(a.value,s=>(v(),E(lr,{key:s.format("YYYY-MM-DD"),"ref-date":s.format("YYYY-MM-DD"),"hide-outside-dates":""},null,8,["ref-date"]))),128))])]))}}),hg=ye(vg,[["__scopeId","data-v-b317befd"]]),gg={key:1},Cu=I({__name:"TimelineCodeBlock",props:{mode:{},path:{}},setup(e){const t=e,n=pe(),o=ar(t.path),a=w(()=>o.value?n.getJournal(o.value.journal):null),r=w(()=>a.value?.shelfName??null);ta(r);const l=w(()=>{if(t.mode&&_u.includes(t.mode))return t.mode;if(a.value)switch(a.value.type){case"day":case"week":return"week";case"month":return"month";case"quarter":return"quarter";case"year":return"calendar"}return"week"}),s=w(()=>{switch(l.value){case"week":return ag;case"month":return ig;case"quarter":return fg;case"calendar":return hg}return null});return(i,u)=>(v(),C("div",null,[s.value?(v(),E(zo(s.value),{key:0,"note-data":b(o)},null,8,["note-data"])):(v(),C("div",gg,"No component"))]))}}),yg={class:"home-code-block"},wg={key:0},bg=["onClick"],kg=I({__name:"HomeCodeBlock",props:{path:{},config:{}},setup(e){Fn(u=>({"8c1763ac":t.value}));const t=w(()=>e.config.scale??1),n=ar(e.path),o=pe(),a=w(()=>n.value?o.getJournal(n.value.journal):null),r=w(()=>e.config.shelf||a.value?.shelfName),l=w(()=>o.journals),s=w(()=>{const u=[],d=Oe().format(_e);for(const m of e.config.show){const g=l.value.filter(p=>p.type===m&&(!r.value||p.shelfName===r.value));if(g.length!==0)if(m==="custom")for(const p of g)u.push({type:m,text:p.getNoteNameForDate(d),journalNames:[p.name]});else u.push({type:m,text:Ii(m,Oe().format("YYYY-MM-DD")),journalNames:g.map(p=>p.name)})}return u});function i(u,d,m){const g=Oe().format("YYYY-MM-DD");u!=="custom"&&u===a.value?.type?Wo(o,g,[a.value.name],!1,Lo(m),m).catch(console.error):Wo(o,g,d,!1,Lo(m),m).catch(console.error)}return(u,d)=>(v(),C("div",yg,[(v(!0),C(W,null,Ce(s.value,(m,g)=>(v(),C(W,{key:m.text},[g>0?(v(),C("span",wg,P(u.config.separator),1)):R("",!0),h("a",{href:"#",onClick:Qt(p=>i(m.type,m.journalNames,p),["stop","prevent"])},P(m.text),9,bg)],64))),128))]))}}),Wr=ye(kg,[["__scopeId","data-v-db98ec2a"]]),_g={},Cg={class:"journal-divider"};function Sg(e,t){return v(),C("div",Cg)}const en=ye(_g,[["render",Sg],["__scopeId","data-v-f48008b5"]]);function xg(e){const t=pe(),n=`@fake@/${Date.now()}-${Math.random()}`,o=on(e),a=w(()=>t.getJournal(o.value)),r=Oe().format("YYYY-MM-DD");return t.index.registerPathData(n,{path:n,title:"Fake Note",journal:o.value,date:a.value?.resolveAnchorDate(r)??r,tags:[],properties:{},tasks:[]}),qa(()=>{t.index.unregisterPathData(n)}),n}const Dg=`show: 
  - day 
  - month
scale: 2
separator: " | "`,Vg=I({__name:"CodeBlockReference.modal",props:{type:{},journalName:{}},setup(e){const t=xg(e.journalName);return(n,o)=>(v(),C("div",null,[o[3]||(o[3]=h("p",{class:"hint"},"Click on a code block to copy it to your clipboard.",-1)),c(_o,{name:"journal-nav"}),o[4]||(o[4]=h("p",null,"Navigation code block helps navigating relative to current note.",-1)),h("p",null,[o[0]||(o[0]=_(" It is fully customizable on journal level.",-1)),o[1]||(o[1]=h("br",null,null,-1)),_(" Current configuration for "+P(n.journalName)+" journal looks like this: ",1)]),c(en),c(ku,{path:b(t)},null,8,["path"]),c(en),o[5]||(o[5]=h("p",null,[_(" Plugin still supports older code blocks "),h("code",null,"calendar-nav"),_(" and "),h("code",null,"journal-nav"),_(" that function just as aliases to "),h("code",null,"journal-nav"),_(". ")],-1)),c(en),c(_o,{name:"calendar-timeline"}),o[6]||(o[6]=h("p",null,"Timeline code block helps navigating within bigger time periods.",-1)),h("p",null,"Default timeline for "+P(n.journalName)+" journal looks like this:",1),c(en),c(Cu,{path:b(t)},null,8,["path"]),c(en),o[7]||(o[7]=h("p",null,"You can change default timeline mode by adding mode prop to code block.",-1)),c(_o,{name:"calendar-timeline"},{default:f(()=>[...o[2]||(o[2]=[_("mode: month",-1)])]),_:1}),o[8]||(o[8]=h("p",null,"Supported modes are:",-1)),h("ul",null,[(v(!0),C(W,null,Ce(b(_u),a=>(v(),C("li",{key:a},P(a),1))),128))]),c(en),c(_o,{name:"journals-home"}),o[9]||(o[9]=h("p",null,"Home block displays links to current notes in journals.",-1)),o[10]||(o[10]=h("p",null,"It looks like this by default:",-1)),c(en),c(Wr,{path:b(t),config:{show:["day"],separator:" • ",scale:1}},null,8,["path"]),c(en),o[11]||(o[11]=il("<p data-v-30e980f3>Supported settings:</p><ul data-v-30e980f3><li data-v-30e980f3><code data-v-30e980f3>show</code> - controls what journals are displayed (by default only Today link is displayed). Supported values are - <code data-v-30e980f3>day</code>, <code data-v-30e980f3>week</code>, <code data-v-30e980f3>month</code>, <code data-v-30e980f3>quarter</code>, <code data-v-30e980f3>year</code>, <code data-v-30e980f3>custom</code>. </li><li data-v-30e980f3><code data-v-30e980f3>separator</code> - used to separate multiple links. Default - <code data-v-30e980f3> • </code>.</li><li data-v-30e980f3><code data-v-30e980f3>scale</code> - allows to increase size of links. Used as multiplier of text size - so to have links twice as large use <code data-v-30e980f3>scale: 2</code>. </li><li data-v-30e980f3><code data-v-30e980f3>shelf</code> - allows to limit journal displayed in block to some specific shelf.</li></ul>",2)),c(en),c(_o,{name:"journals-home"},{default:f(()=>[_(P(Dg))]),_:1}),c(en),c(Wr,{path:b(t),config:{show:["day","month"],separator:" | ",scale:2}},null,8,["path"])]))}}),jg=ye(Vg,[["__scopeId","data-v-30e980f3"]]),$g=I({__name:"CodeBlockReferenceHint",props:{type:{},journalName:{}},setup(e){const t=pe();function n(){new Ne(t,"Supported code blocks",jg,{type:e.type,journalName:e.journalName},780).open()}return(o,a)=>(v(),C("a",{href:"#",onClick:Qt(n,["prevent"])},"Supported code blocks."))}}),Mg={class:"path-hint"},Ng={class:"u-pop"},Og=I({__name:"TemplatePathPreview",props:{path:{},journalName:{}},setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Oe().format("YYYY-MM-DD")})),a=w(()=>n.value?n.value.getResolvedTemplatePath(e.path,o.value):""),r=w(()=>{const l=xl("(.*?)");return[...e.path.matchAll(l)].some(s=>s.groups?.format?.replaceAll(/\[.*?\]/gi,"").includes("W"))});return(l,s)=>(v(),C("div",Mg,[s[0]||(s[0]=_(" Template path with resolved variables: ",-1)),h("b",Ng,P(a.value),1),r.value?(v(),E(or,{key:0})):R("",!0)]))}}),Ag=ye(Og,[["__scopeId","data-v-b2541cca"]]);class Tg extends X.AbstractInputSuggest{constructor(t,n){super(t,n),this.textInputElement=n}getSuggestions(t){const n=t.toLocaleLowerCase();return n?this.app.vault.getAllLoadedFiles().filter(a=>a instanceof X.TFolder?!1:a.path.toLocaleLowerCase().includes(n)):[]}renderSuggestion(t,n){n.setText(t.path)}selectSuggestion(t){this.textInputElement.value=t.path,this.textInputElement.trigger("input"),this.close()}}const Fg=["placeholder","disabled"],Eg=I({__name:"TemplateInput",props:Ut({placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=Lt(e,"modelValue"),n=fe(),o=_l();let a;return bt(()=>{n.value&&(a=new Tg(o,n.value))}),al(()=>{a&&a.close()}),(r,l)=>Yn((v(),C("input",{ref_key:"element",ref:n,"onUpdate:modelValue":l[0]||(l[0]=s=>t.value=s),type:"text",placeholder:r.placeholder,disabled:r.disabled,spellcheck:"false"},null,8,Fg)),[[Go,t.value]])}}),Pg=I({__name:"EditFrontmatterFieldName",props:{journalName:{},fieldName:{}},emits:["close"],setup(e,{emit:t}){const n=t,{defineField:o,errorBag:a,handleSubmit:r}=xn({initialValues:{name:""},validationSchema:Vn(At({name:wt(Xe(),Gt("Property name is required"))}))}),[l,s]=o("name"),i=pe(),u=w(()=>i.getJournal(e.journalName)),d=w(()=>(u.value?.config.value.frontmatter[e.fieldName]||ym[e.fieldName])??""),m=r(async g=>{u.value&&(await u.value.renameFrontmatterField(e.fieldName,d.value,g.name),n("close"))});return bt(()=>{l.value=d.value}),(g,p)=>(v(),C("form",{onSubmit:p[2]||(p[2]=Qt((...k)=>b(m)&&b(m)(...k),["prevent"]))},[c(M,{name:"Current name"},{default:f(()=>[_(P(d.value),1)]),_:1}),c(M,{name:"New name"},{description:f(()=>[c(et,{errors:b(a).name},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(l),"onUpdate:modelValue":p[0]||(p[0]=k=>ce(l)?l.value=k:null)},b(s)),null,16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:p[1]||(p[1]=k=>g.$emit("close"))},{default:f(()=>[...p[3]||(p[3]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",type:"submit"},{default:f(()=>[...p[4]||(p[4]=[_("Update",-1)])]),_:1})]),_:1})],32))}}),Ig=I({__name:"TemplaterSupport.modal",emits:["close"],setup(e){return(t,n)=>(v(),C("div",null,[...n[0]||(n[0]=[il("<p> There can be cases when Templater is interfering with plugin actions resulting in partially broken note or journal related data removed from frontmatter. </p><p>The best setup to avoid such problems would be:</p><ul><li>template configured in journal plugin settings</li><li><code>Trigger Templater on new file creation</code> is disabled</li><li> OR <code>Trigger Templater on new file creation</code> is enabled, <code>Enable Folder Templates</code> is enabled, <b>NO</b> Folder template is configured </li></ul><p> This ensures that only journal plugin is processing note template thus avoiding conflicts with templater plugin (journal plugin will use templater itself under the hood to process templater commands). </p>",4)])]))}}),Rg=I({__name:"TemplaterSupportHint",setup(e){const t=pe(),n=yu(t.app,"<% $>");function o(){new Ne(t,"Templater caveats",Ig,{}).open()}return(a,r)=>b(n)?(v(),C(W,{key:0},[r[0]||(r[0]=h("br",null,null,-1)),r[1]||(r[1]=_("Templater syntax is ",-1)),h("a",{href:"#",onClick:Qt(o,["stop"])},"supported"),r[2]||(r[2]=_(". ",-1))],64)):R("",!0)}}),Bg={class:"u-pop name-preview"},Yg=I({__name:"NoteNamePreview",props:{journalName:{}},setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=w(()=>({journal:e.journalName,date:Oe().format("YYYY-MM-DD"),index:1})),a=w(()=>n.value?n.value.getConfiguredPathData(o.value)[1]:"");return(r,l)=>(v(),C("div",null,[l[0]||(l[0]=_(" Note name with resolved variables will look like: ",-1)),h("b",Bg,P(a.value),1)]))}}),Ug=ye(Yg,[["__scopeId","data-v-d4a91fdb"]]),Wg={key:0},Lg={key:0,class:"journal-important"},Jg={key:1,class:"journal-important"},qg={key:0},Hg={key:0},zg={key:1},Kg=["aria-label"],Gg={key:0},Qg={key:0},Xg={key:0,class:"journal-important"},Zg={key:0,class:"journal-important"},ey={class:"flair"},ty={class:"flair"},ny={class:"flair"},oy={class:"decoration-preview-container"},ay={class:"decoration-preview-block"},ry={key:0},Ss=800,ly=I({__name:"JournalSettingsEdit",props:{journalName:{}},emits:["back","edit"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>o.getJournal(e.journalName)),r=w(()=>a.value?.config.value),l=Oe().day(),s=Oe().format("YYYY-MM-DD"),i=_n({templates:!1,commands:!1,decorations:!1,navBlock:!1,calendarViewBlock:!1,frontmatter:!1}),u=w(()=>a.value?lm(a.value.config.value.write):""),d=w(()=>a.value?.config.value.nameTemplate.includes("/")),m=w(()=>a.value?.config.value.dateFormat.includes("/"));function g(){if(!a.value)return;const se=a.value.config.value.nameTemplate.split("/");a.value.config.value.nameTemplate=se.pop()??"";const D=se.join("/");let G=a.value.config.value.folder;G&&!G.endsWith("/")&&(G+="/"),G+=D,a.value.config.value.folder=G}function p(){if(!a.value)return;const se=a.value.config.value.dateFormat.split("/");a.value.config.value.dateFormat=se.pop()??"";const D=se.map(Ge=>`{{date:${Ge}}}`).join("/");let G=a.value.config.value.folder;G&&!G.endsWith("/")&&(G+="/"),G+=D,a.value.config.value.folder=G}function k(){a.value&&new Ne(o,"Rename journal",ph,{name:a.value.name,async onSave(se){a.value&&(await o.renameJournal(a.value.name,se),n("edit",se))}}).open()}function y(){a.value&&new Ne(o,"Place journal",Ih,{currentShelf:a.value.shelfName,onSave(se){o.moveJournal(e.journalName,se)}}).open()}function x(){r.value?.templates.push(""),i.templates||(i.templates=!0)}function A(){a.value&&new Ne(o,"Add command",ws,{index:a.value.commands.length,writeType:a.value.type,commands:a.value.commands,onSubmit:se=>{a.value&&(a.value.addCommand(se),i.commands||(i.commands=!0))}}).open()}function T(se,D){a.value&&new Ne(o,"Edit command",ws,{index:D,writeType:a.value.type,command:se,commands:a.value.commands,onSubmit:G=>{a.value&&a.value.updateCommand(D,G)}}).open()}function Z(se){a.value&&a.value.deleteCommand(se)}function O(){a.value&&new Ne(o,"Add calendar decoration",ks,{index:a.value.decorations.length,writeType:a.value.type,onSubmit:se=>{a.value&&(a.value.addDecoration(se),i.decorations||(i.decorations=!0))}},Ss).open()}function N(se,D){a.value&&new Ne(o,"Add calendar decoration",ks,{index:a.value.decorations.length,writeType:a.value.type,decoration:se,onSubmit:G=>{a.value&&a.value.editDecoration(D,G)}},Ss).open()}function le(se){a.value&&a.value.deleteDecoration(se)}function ie(){a.value&&new Ne(o,"Add row to nav block",pa,{currentJournal:a.value.name,onSubmit:se=>{a.value&&(a.value.addNavRow(se),i.navBlock||(i.navBlock=!0))}}).open()}function L(se){a.value&&new Ne(o,"Edit nav block row",pa,{currentJournal:e.journalName,row:a.value.navBlock.rows[se],onSubmit:D=>{a.value&&a.value.editNavRow(se,D)}}).open()}function me(se){a.value&&a.value.deleteNavRow(se)}function Le(se){a.value&&a.value.moveNavRowUp(se)}function Te(se){a.value&&a.value.moveNavRowDown(se)}function tt(){a.value&&new Ne(o,"Add row to calendar view block",pa,{currentJournal:a.value.name,onSubmit:se=>{a.value&&(a.value.addCalendarViewRow(se),i.calendarViewBlock||(i.calendarViewBlock=!0))}}).open()}function vt(se){a.value&&new Ne(o,"Edit calendar view block row",pa,{currentJournal:e.journalName,row:a.value.calendarViewBlock.rows[se],onSubmit:D=>{a.value&&a.value.editCalendarViewRow(se,D)}}).open()}function nt(se){a.value&&a.value.deleteCalendarViewRow(se)}function qe(se){a.value&&a.value.moveNavRowUp(se)}function ee(se){a.value&&a.value.moveNavRowDown(se)}function ne(se){a.value&&new Ne(o,"Edit frontmatter field",Pg,{journalName:a.value.name,fieldName:se}).open()}async function z(){a.value&&await a.value.toggleFrontmatterStartDate()}async function oe(){a.value&&await a.value.toggleFrontmatterEndDate()}async function $e(se){se&&await a.value?.autoCreate()}return lt(()=>a.value?.config.value.start,se=>{a.value&&se&&(a.value.config.value.index.anchorDate=se)}),lt(()=>a.value?.config.value.end.type,()=>{a.value?.config.value.end.type==="repeats"&&!a.value.config.value.end.repeats&&(a.value.config.value.end.repeats=1)}),(se,D)=>a.value&&r.value?(v(),C("div",Wg,[c(M,{heading:""},{name:f(()=>[_(" Configuring "+P(a.value.name)+" (writing "+P(u.value)+") ",1)]),default:f(()=>[c(be,{icon:"pencil",tooltip:"Rename journal",onClick:k}),c(be,{icon:"chevron-left",tooltip:"Back to list",onClick:D[0]||(D[0]=G=>se.$emit("back"))})]),_:1}),b(o).usesShelves?(v(),E(M,{key:0,name:"Shelf"},{default:f(()=>[_(P(a.value.shelfName||"Not on a shelf")+" ",1),c(be,{icon:"pencil",tooltip:"Change shelf",onClick:y})]),_:1})):R("",!0),c(M,{name:"Start writing on"},{description:f(()=>[D[30]||(D[30]=_(" New notes prior to this date won't be created. ",-1)),r.value.end.type==="repeats"&&!r.value.start?(v(),C("div",Lg," Start date should be defined for journal that ends after some number of repeats. ")):R("",!0),r.value.write.type==="custom"?(v(),C("div",Jg," Start date for custom intervals cannot be changes as it is used to calculate interval ")):R("",!0)]),default:f(()=>[r.value.write.type==="custom"?(v(),C("span",qg,P(r.value.write.anchorDate),1)):(v(),E(To,{key:1,modelValue:r.value.start,"onUpdate:modelValue":D[1]||(D[1]=G=>r.value.start=G)},null,8,["modelValue"])),r.value.start&&r.value.write.type!=="custom"?(v(),E(be,{key:2,icon:"trash",tooltip:"Clear start date",onClick:D[2]||(D[2]=G=>r.value.start="")})):R("",!0)]),_:1}),c(M,{name:"End writing"},{description:f(()=>[r.value.end.type==="repeats"?(v(),C("div",Hg,"After creating this many notes, new notes won't be created.")):R("",!0),r.value.end.type==="date"?(v(),C("div",zg,"New notes after this date won't be created.")):R("",!0)]),default:f(()=>[c(Ve,{modelValue:r.value.end.type,"onUpdate:modelValue":D[3]||(D[3]=G=>r.value.end.type=G)},{default:f(()=>[...D[31]||(D[31]=[h("option",{value:"never"},"Never",-1),h("option",{value:"date"},"After date",-1),h("option",{value:"repeats"},"After repeating",-1)])]),_:1},8,["modelValue"]),r.value.end.type==="date"?(v(),E(To,{key:0,modelValue:r.value.end.date,"onUpdate:modelValue":D[4]||(D[4]=G=>r.value.end.date=G)},null,8,["modelValue"])):R("",!0),r.value.end.type==="repeats"?(v(),C(W,{key:1},[c(ln,{modelValue:r.value.end.repeats,"onUpdate:modelValue":D[5]||(D[5]=G=>r.value.end.repeats=G),min:1},null,8,["modelValue"]),D[32]||(D[32]=_(" times ",-1))],64)):R("",!0)]),_:1}),c(M,{name:"Index notes"},{description:f(()=>[...D[33]||(D[33]=[_(" Allows to assign numbers to notes (ex. Day 1, Day 2, etc.). ",-1)])]),default:f(()=>[c(He,{modelValue:r.value.index.enabled,"onUpdate:modelValue":D[6]||(D[6]=G=>r.value.index.enabled=G)},null,8,["modelValue"])]),_:1}),r.value.index.enabled?(v(),C(W,{key:1},[c(M,{name:"Anchor date"},{description:f(()=>[...D[34]||(D[34]=[_(" This date is used to connect some number to it for further calculations.",-1),h("br",null,null,-1),_(" Start date is used as anchor date if defined. ",-1)])]),default:f(()=>[h("div",{"aria-label":r.value.start?"Start date is used":""},[r.value.start?(v(),C("span",Gg,P(r.value.start),1)):(v(),E(To,{key:1,modelValue:r.value.index.anchorDate,"onUpdate:modelValue":D[7]||(D[7]=G=>r.value.index.anchorDate=G)},null,8,["modelValue"]))],8,Kg)]),_:1}),c(M,{name:"Start number"},{description:f(()=>[...D[35]||(D[35]=[_(" This number is used to start numbering notes at anchor date. ",-1)])]),default:f(()=>[c(ln,{modelValue:r.value.index.anchorIndex,"onUpdate:modelValue":D[8]||(D[8]=G=>r.value.index.anchorIndex=G),min:1},null,8,["modelValue"])]),_:1}),c(M,{name:"Index change"},{description:f(()=>[...D[36]||(D[36]=[_(" Define how index number will change with time. ",-1)])]),default:f(()=>[c(Ve,{modelValue:r.value.index.type,"onUpdate:modelValue":D[9]||(D[9]=G=>r.value.index.type=G)},{default:f(()=>[...D[37]||(D[37]=[h("option",{value:"increment"},"Constantly increasing",-1),h("option",{value:"reset_after"},"Resets after",-1)])]),_:1},8,["modelValue"]),r.value.index.type==="reset_after"?(v(),C(W,{key:0},[c(ln,{modelValue:r.value.index.resetAfter,"onUpdate:modelValue":D[10]||(D[10]=G=>r.value.index.resetAfter=G),min:2,narrow:""},null,8,["modelValue"]),D[38]||(D[38]=_(" repeats ",-1))],64)):R("",!0)]),_:1}),!r.value.start&&r.value.index.type==="increment"?(v(),E(M,{key:0,name:"Allow before"},{description:f(()=>[...D[39]||(D[39]=[_(" Enabled to index before anchor date. Might result in negative numbers. ",-1)])]),default:f(()=>[c(He,{modelValue:r.value.index.allowBefore,"onUpdate:modelValue":D[11]||(D[11]=G=>r.value.index.allowBefore=G)},null,8,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),c(M,{name:"Confirm creating new note?"},{description:f(()=>[...D[40]||(D[40]=[_(" When turned on will show confirmation dialog any time you try navigating to a date that does not have a note yet. ",-1)])]),default:f(()=>[c(He,{modelValue:r.value.confirmCreation,"onUpdate:modelValue":D[12]||(D[12]=G=>r.value.confirmCreation=G)},null,8,["modelValue"])]),_:1}),c(M,{name:"Auto-create current notes"},{description:f(()=>[D[41]||(D[41]=_(" When turned on will automatically create notes for current date if they don't exist yet. ",-1)),D[42]||(D[42]=h("br",null,null,-1)),r.value.confirmCreation?(v(),C("div",Qg,"Confirmation dialog won't be shown for autocreated notes.")):R("",!0)]),default:f(()=>[c(He,{modelValue:r.value.autoCreate,"onUpdate:modelValue":[D[13]||(D[13]=G=>r.value.autoCreate=G),$e]},null,8,["modelValue"])]),_:1}),c(M,{name:"Default date format"},{description:f(()=>[D[44]||(D[44]=_(" Used to format dates if not defined in variables (like ",-1)),D[45]||(D[45]=h("span",{class:"u-pop"}," {{ date }} ",-1)),D[46]||(D[46]=_(").",-1)),D[47]||(D[47]=h("br",null,null,-1)),D[48]||(D[48]=h("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),D[49]||(D[49]=h("br",null,null,-1)),c(pu,{format:r.value.dateFormat},null,8,["format"]),m.value?(v(),C("div",Xg,[D[43]||(D[43]=_(' Looks like you are using date format to create folders. Recommended way to do this is to use variables in "Folder" field. ',-1)),h("a",{href:"#",onClick:p},"Apply recommendation")])):R("",!0)]),default:f(()=>[c(Je,{modelValue:r.value.dateFormat,"onUpdate:modelValue":D[14]||(D[14]=G=>r.value.dateFormat=G)},null,8,["modelValue"])]),_:1}),c(M,{name:"Folder"},{description:f(()=>[D[50]||(D[50]=_(" New notes will be created in this folder. ",-1)),D[51]||(D[51]=h("br",null,null,-1)),c(ba,{type:r.value.write.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),D[52]||(D[52]=_()),D[53]||(D[53]=h("br",null,null,-1)),r.value.folder&&r.value.folder.includes("{")?(v(),E(Yh,{key:0,"journal-name":se.journalName},null,8,["journal-name"])):R("",!0)]),default:f(()=>[c(fu,{modelValue:r.value.folder,"onUpdate:modelValue":D[15]||(D[15]=G=>r.value.folder=G)},null,8,["modelValue"])]),_:1}),c(M,{name:"Note name template"},{description:f(()=>[D[55]||(D[55]=_(" Template used to generate new note name.",-1)),D[56]||(D[56]=h("br",null,null,-1)),c(ba,{type:r.value.write.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),c(Ug,{"journal-name":se.journalName},null,8,["journal-name"]),d.value?(v(),C("div",Zg,[D[54]||(D[54]=_(' Looks like you are using name template to create folders. Recommended way is to define folder path fully in "Folder" field. ',-1)),h("a",{href:"#",onClick:g},"Apply recommendation")])):R("",!0)]),default:f(()=>[c(Je,{modelValue:r.value.nameTemplate,"onUpdate:modelValue":D[16]||(D[16]=G=>r.value.nameTemplate=G)},null,8,["modelValue"])]),_:1}),c(xt,{expanded:i.templates,"onUpdate:expanded":D[17]||(D[17]=G=>i.templates=G)},{trigger:f(()=>[c(Dt,{icon:"notepad-text-dashed"},{default:f(()=>[D[57]||(D[57]=_(" Templates ",-1)),h("span",ey,P(r.value.templates.length),1)]),_:1})]),controls:f(()=>[c(ue,{onClick:x},{default:f(()=>[...D[58]||(D[58]=[_(" Add template ",-1)])]),_:1})]),default:f(()=>[c(M,{"no-controls":""},{description:f(()=>[D[59]||(D[59]=_(" Path to note that will be used as template when creating new notes. ",-1)),D[60]||(D[60]=h("br",null,null,-1)),D[61]||(D[61]=_(" When multiple templates are configured - first existing will be used. ",-1)),D[62]||(D[62]=h("br",null,null,-1)),c(ba,{type:a.value.type,"date-format":a.value.dateFormat},null,8,["type","date-format"]),D[63]||(D[63]=h("br",null,null,-1)),c($g,{type:a.value.type,"journal-name":se.journalName},null,8,["type","journal-name"]),c(Rg)]),_:1}),(v(!0),C(W,null,Ce(r.value.templates,(G,Ge)=>(v(),C(W,{key:Ge},[c(M,{"controls-only":""},{default:f(()=>[c(Eg,{modelValue:r.value.templates[Ge],"onUpdate:modelValue":Ft=>r.value.templates[Ge]=Ft,class:"grow"},null,8,["modelValue","onUpdate:modelValue"]),c(be,{icon:"trash",tooltip:"Remove template",onClick:Ft=>r.value.templates.splice(Ge,1)},null,8,["onClick"])]),_:2},1024),G.includes("{")?(v(),E(Ag,{key:0,"journal-name":se.journalName,path:G},null,8,["journal-name","path"])):R("",!0)],64))),128))]),_:1},8,["expanded"]),c(xt,{expanded:i.commands,"onUpdate:expanded":D[18]||(D[18]=G=>i.commands=G)},{trigger:f(()=>[c(Dt,{icon:"terminal"},{default:f(()=>[D[64]||(D[64]=_(" Commands ",-1)),h("span",ty,P(a.value.commands.length),1)]),_:1})]),controls:f(()=>[c(ue,{onClick:A},{default:f(()=>[...D[65]||(D[65]=[_("Add command",-1)])]),_:1})]),default:f(()=>[a.value.commands.length===0?(v(),E(M,{key:0},{description:f(()=>[...D[66]||(D[66]=[_(" No commands configured yet. ",-1)])]),_:1})):(v(!0),C(W,{key:1},Ce(a.value.commands,(G,Ge)=>(v(),E(M,{key:Ge},{name:f(()=>[_(P(G.name),1)]),description:f(()=>[_(P(b(nr)(a.value.type,G.type))+" "+P(b(Wm)(a.value.type,G.type,G.context)),1)]),default:f(()=>[c(be,{icon:"pencil",tooltip:"Edit",onClick:Ft=>T(G,Ge)},null,8,["onClick"]),c(be,{icon:"trash-2",tooltip:"Delete",onClick:Ft=>Z(Ge)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),c(xt,{expanded:i.decorations,"onUpdate:expanded":D[19]||(D[19]=G=>i.decorations=G)},{trigger:f(()=>[c(Dt,{icon:"paintbrush"},{default:f(()=>[D[67]||(D[67]=_(" Calendar decorations ",-1)),h("span",ny,P(a.value.decorations.length),1)]),_:1})]),controls:f(()=>[c(ue,{onClick:O},{default:f(()=>[...D[68]||(D[68]=[_("Add decoration",-1)])]),_:1})]),default:f(()=>[c(M,{"no-controls":""},{description:f(()=>[...D[69]||(D[69]=[_(" Use decorations to highlight dates in calendar that meet certain conditions. ",-1)])]),_:1}),a.value.decorations.length===0?(v(),E(M,{key:0},{description:f(()=>[...D[70]||(D[70]=[_(" No calendar decorations configured yet. ",-1)])]),_:1})):(v(!0),C(W,{key:1},Ce(a.value.decorations,(G,Ge)=>(v(),E(M,{key:Ge},{description:f(()=>[h("div",oy,[h("div",ay,[c(ea,{class:"decoration-preview",styles:G.styles},{default:f(()=>[h("span",null,P(b(l)),1)]),_:2},1032,["styles"])]),D[71]||(D[71]=_(" when ",-1)),(v(!0),C(W,null,Ce(G.conditions,(Ft,Xt)=>(v(),C(W,{key:Xt},[_(P(b(sm)(Ft))+" ",1),Xt>0?(v(),C("span",ry,P(G.mode),1)):R("",!0)],64))),128))])]),default:f(()=>[c(be,{icon:"pencil",tooltip:"Edit",onClick:Ft=>N(G,Ge)},null,8,["onClick"]),c(be,{icon:"trash-2",tooltip:"Delete",onClick:Ft=>le(Ge)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"]),c(xt,{expanded:i.navBlock,"onUpdate:expanded":D[22]||(D[22]=G=>i.navBlock=G)},{trigger:f(()=>[c(Dt,{icon:"signpost-big"},{default:f(()=>[...D[72]||(D[72]=[_(" Navigation block ",-1)])]),_:1})]),controls:f(()=>[c(ue,{onClick:ie},{default:f(()=>[...D[73]||(D[73]=[_("Add row",-1)])]),_:1})]),default:f(()=>[c(Cs,{class:"nav-block-preview",rows:a.value.navBlock.rows,"journal-name":se.journalName,"ref-date":b(s),onMoveUp:Le,onMoveDown:Te,onEdit:L,onRemove:me},null,8,["rows","journal-name","ref-date"]),c(M,{name:"Navigation block mode"},{default:f(()=>[c(Ve,{modelValue:a.value.navBlock.type,"onUpdate:modelValue":D[20]||(D[20]=G=>a.value.navBlock.type=G)},{default:f(()=>[...D[74]||(D[74]=[h("option",{value:"create"},"Create new note",-1),h("option",{value:"existing"},"Open existing note",-1)])]),_:1},8,["modelValue"])]),_:1}),c(M,{name:"Decorate whole navigation block"},{default:f(()=>[c(He,{modelValue:a.value.navBlock.decorateWholeBlock,"onUpdate:modelValue":D[21]||(D[21]=G=>a.value.navBlock.decorateWholeBlock=G)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"]),a.value.type==="custom"?(v(),E(xt,{key:2,expanded:i.calendarViewBlock,"onUpdate:expanded":D[24]||(D[24]=G=>i.calendarViewBlock=G)},{trigger:f(()=>[c(Dt,{icon:"signpost-big"},{default:f(()=>[...D[75]||(D[75]=[_(" Calendar View block ",-1)])]),_:1})]),controls:f(()=>[c(ue,{onClick:tt},{default:f(()=>[...D[76]||(D[76]=[_("Add row",-1)])]),_:1})]),default:f(()=>[c(Cs,{class:"nav-block-preview",rows:a.value.calendarViewBlock.rows,"journal-name":se.journalName,"ref-date":b(s),onMoveUp:qe,onMoveDown:ee,onEdit:vt,onRemove:nt},null,8,["rows","journal-name","ref-date"]),c(M,{name:"Decorate whole navigation block"},{default:f(()=>[c(He,{modelValue:a.value.calendarViewBlock.decorateWholeBlock,"onUpdate:modelValue":D[23]||(D[23]=G=>a.value.calendarViewBlock.decorateWholeBlock=G)},null,8,["modelValue"])]),_:1})]),_:1},8,["expanded"])):R("",!0),c(xt,{expanded:i.frontmatter,"onUpdate:expanded":D[29]||(D[29]=G=>i.frontmatter=G)},{trigger:f(()=>[c(Dt,{icon:"table-properties"},{default:f(()=>[...D[77]||(D[77]=[_(" Frontmatter ",-1)])]),_:1})]),default:f(()=>[c(M,{name:"Date property name"},{default:f(()=>[_(P(r.value.frontmatter.dateField||b(Xa))+" ",1),c(be,{icon:"pencil",tooltip:"Edit",onClick:D[25]||(D[25]=G=>ne("dateField"))})]),_:1}),r.value.index.enabled?(v(),E(M,{key:0,name:"Index property name"},{default:f(()=>[_(P(r.value.frontmatter.indexField||b(Za))+" ",1),c(be,{icon:"pencil",tooltip:"Edit",onClick:D[26]||(D[26]=G=>ne("indexField"))})]),_:1})):R("",!0),c(M,{name:"Add start date property?"},{description:f(()=>[...D[78]||(D[78]=[_(" In most cases start date is equal to date property. But for weeks journals it might be different for weeks that start one year and end in other - in this case date is equals to end date. ",-1)])]),default:f(()=>[c(He,{"model-value":r.value.frontmatter.addStartDate,"onUpdate:modelValue":z},null,8,["model-value"])]),_:1}),r.value.frontmatter.addStartDate?(v(),E(M,{key:1,name:"Start date property name"},{default:f(()=>[_(P(r.value.frontmatter.startDateField||b(an))+" ",1),c(be,{icon:"pencil",tooltip:"Edit",onClick:D[27]||(D[27]=G=>ne("startDateField"))})]),_:1})):R("",!0),c(M,{name:"Add end date property?"},{default:f(()=>[c(He,{"model-value":r.value.frontmatter.addEndDate,"onUpdate:modelValue":oe},null,8,["model-value"])]),_:1}),r.value.frontmatter.addEndDate?(v(),E(M,{key:2,name:"End date property name"},{default:f(()=>[_(P(r.value.frontmatter.endDateField||b(wn))+" ",1),c(be,{icon:"pencil",tooltip:"Edit",onClick:D[28]||(D[28]=G=>ne("endDateField"))})]),_:1})):R("",!0)]),_:1},8,["expanded"])])):R("",!0)}}),sy=ye(ly,[["__scopeId","data-v-d7644216"]]),iy={key:0,class:"journal-important"},uy=I({__name:"RenameShelf.modal",props:{name:{}},emits:["save","close"],setup(e,{emit:t}){const n=e,o=t,a=pe(),r=fe(n.name),l=w(()=>r.value.length>0&&r.value!==n.name&&!a.hasShelf(r.value)),s=w(()=>r.value&&r.value!==n.name&&a.hasShelf(r.value));function i(){o("save",r.value),o("close")}return(u,d)=>(v(),C(W,null,[c(M,{name:"New name"},{description:f(()=>[s.value?(v(),C("span",iy,"This name is already used.")):R("",!0)]),default:f(()=>[c(Je,{modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=m=>r.value=m)},null,8,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:d[1]||(d[1]=m=>u.$emit("close"))},{default:f(()=>[...d[2]||(d[2]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",disabled:!l.value,onClick:i},{default:f(()=>[...d[3]||(d[3]=[_("Save",-1)])]),_:1},8,["disabled"])]),_:1})],64))}}),dy={key:0},cy={class:"flair"},fy={class:"flair"},py=I({__name:"JournalSettingsShelfDetails",props:{shelfName:{}},emits:["back","edit","organize","bulk-add"],setup(e,{emit:t}){const n=t,o=pe(),a=w(()=>`Shelf: ${e.shelfName}`),r=_n({commands:!1}),l=w(()=>o.getShelf(e.shelfName)),s=w(()=>l.value?o.getShelfJournals(e.shelfName):[]);function i(){l.value&&new Ne(o,"Rename shelf",uy,{name:l.value.name,onSave(p){o.renameShelf(e.shelfName,p),n("organize",p)}}).open()}function u(){new Ne(o,"Add Journal",yl,{onCreate(p,k){if(!l.value)return;const y=o.createJournal(p,k);l.value.journals.push(p),y.shelves.push(e.shelfName),n("edit",p)}}).open()}function d(){l.value&&new Ne(o,"Add command",Ea,{index:l.value.commands.length,commands:l.value.commands,onSubmit:p=>{l.value&&(l.value.commands.push(p),so(o,p,a.value,()=>o.getShelfJournals(e.shelfName).filter(k=>k.type===p.writeType)),r.commands||(r.commands=!0))}}).open()}function m(p,k){l.value&&new Ne(o,"Edit command",Ea,{index:k,command:p,commands:l.value.commands,onSubmit:y=>{l.value&&(l.value.commands[k]=y,Pa(o,p,a.value),so(o,y,a.value,()=>o.getShelfJournals(e.shelfName).filter(x=>x.type===y.writeType)))}}).open()}function g(p){if(!l.value)return;const[k]=l.value.commands.splice(p,1);k&&Pa(o,k,a.value)}return bt(()=>{l.value&&!l.value.commands&&(l.value.commands=[])}),(p,k)=>l.value?(v(),C("div",dy,[c(M,{heading:""},{name:f(()=>[c(Dt,{icon:"library"},{default:f(()=>[_(" Configuring "+P(l.value.name),1)]),_:1})]),default:f(()=>[c(be,{icon:"pencil",tooltip:"Rename shelf",onClick:i}),c(be,{icon:"chevron-left",tooltip:"Back to list",onClick:k[0]||(k[0]=y=>p.$emit("back"))})]),_:1}),c(xt,{"default-expanded":s.value.length>0},{trigger:f(()=>[c(Dt,{icon:"book-open"},{default:f(()=>[k[4]||(k[4]=_(" Journals ",-1)),h("span",cy,P(s.value.length),1)]),_:1})]),controls:f(()=>[c(be,{icon:"plus",cta:"",tooltip:"Create new journal",onClick:u})]),default:f(()=>[c(cl,{journals:s.value,onEdit:k[1]||(k[1]=y=>p.$emit("edit",y)),onBulkAdd:k[2]||(k[2]=y=>p.$emit("bulk-add",y))},null,8,["journals"])]),_:1},8,["default-expanded"]),c(xt,{expanded:r.commands,"onUpdate:expanded":k[3]||(k[3]=y=>r.commands=y)},{trigger:f(()=>[c(Dt,{icon:"terminal"},{default:f(()=>[k[5]||(k[5]=_(" Commands ",-1)),h("span",fy,P(l.value.commands.length),1)]),_:1})]),controls:f(()=>[c(ue,{onClick:d},{default:f(()=>[...k[6]||(k[6]=[_("Add command",-1)])]),_:1})]),default:f(()=>[l.value.commands.length===0?(v(),E(M,{key:0},{description:f(()=>[...k[7]||(k[7]=[_(" No commands configured yet. ",-1)])]),_:1})):(v(!0),C(W,{key:1},Ce(l.value.commands,(y,x)=>(v(),E(M,{key:x},{name:f(()=>[_(P(y.name),1)]),description:f(()=>[_(P(b(nr)(y.writeType,y.type)),1)]),default:f(()=>[c(be,{icon:"pencil",tooltip:"Edit",onClick:A=>m(y,x)},null,8,["onClick"]),c(be,{icon:"trash-2",tooltip:"Delete",onClick:A=>g(x)},null,8,["onClick"])]),_:2},1024))),128))]),_:1},8,["expanded"])])):R("",!0)}}),my=I({__name:"ConditionItem",props:{condition:{}},emits:["change"],setup(e){const t=w(()=>{switch(e.condition.type){case"title":return vu;case"tag":return hu;case"property":return gu}return null});return(n,o)=>t.value?(v(),E(zo(t.value),{key:0,condition:n.condition,onChange:o[0]||(o[0]=a=>n.$emit("change",a))},null,40,["condition"])):R("",!0)}}),vy={key:0,class:"mode-hint"},hy={key:0,class:"journal-hint"},gy=I({__name:"ConditionsList",props:{mode:{},conditions:{}},emits:["add-condition","change-condition","remove-condition"],setup(e,{emit:t}){const n=t,o=[{value:"title",label:"Note title"},{value:"tag",label:"Tag"},{value:"property",label:"Property"}];function a(s){n("add-condition",jt(lu[s]))}function r(s){n("remove-condition",s)}function l(s,i){n("change-condition",s,i)}return(s,i)=>(v(),C(W,null,[c(M,null,{default:f(()=>[c(Yr,{options:o,onSelect:a},{default:f(()=>[...i[0]||(i[0]=[_("Add condition",-1)])]),_:1})]),_:1}),(v(!0),C(W,null,Ce(s.conditions,(u,d)=>(v(),E(M,{key:d,class:"condition-wrapper"},{default:f(()=>[d>0?(v(),C("span",vy,P(s.mode),1)):R("",!0),c(my,{condition:u,onChange:m=>l(d,m)},null,8,["condition","onChange"]),c(be,{icon:"trash",onClick:m=>r(d)},null,8,["onClick"])]),_:2},1024))),128)),s.conditions.length===0?(v(),C("p",hy,"No conditions defined yet")):R("",!0)],64))}}),yy={key:0},wy=I({__name:"ConfigureBulkAddNotes",props:{journalName:{}},emits:["process","close"],setup(e,{emit:t}){const n=pe(),o=w(()=>n.getJournal(e.journalName)),a=t,{defineField:r,errorBag:l,handleSubmit:s}=xn({initialValues:{folder:"",date_place:"title",property_name:"",date_format:o.value?.dateFormat,filter_combinator:"no",existing_note:"skip",other_folder:"keep",other_name:"keep",dry_run:!1},validationSchema:Vn(wt(At({folder:Xe(),date_place:yt(["title","property"]),property_name:Xe(),date_format:wt(Xe(),Gt("Date format is required")),filter_combinator:yt(["no","and","or"]),existing_note:yt(["skip","override","merge","ask"]),other_folder:yt(["keep","move","ask"]),other_name:yt(["keep","rename","ask"]),dry_run:rn()}),Xo(mo([["date_place"],["property_name"]],qe=>qe.date_place==="property"?!!qe.property_name:!0,"Please enter property name."),["property_name"])))}),[i,u]=r("folder"),[d,m]=r("date_place"),[g,p]=r("property_name"),[k,y]=r("date_format"),[x,A]=r("filter_combinator"),[T,Z]=r("existing_note"),[O,N]=r("other_folder"),[le,ie]=r("other_name"),[L,me]=r("dry_run"),Le=fe([]);function Te(qe){Le.value.push(qe)}function tt(qe,ee){Le.value[qe][ee.prop]=ee.value}function vt(qe){Le.value.splice(qe,1)}const nt=s(()=>{a("process",{folder:i.value??"/",date_place:d.value??"title",property_name:g.value??"",date_format:k.value??o.value?.dateFormat??"",filter_combinator:x.value??"no",filters:Le.value,existing_note:T.value??"skip",other_folder:O.value??"keep",other_name:le.value??"keep",dry_run:L.value??!1})});return(qe,ee)=>(v(),C("form",{onSubmit:ee[10]||(ee[10]=Qt((...ne)=>b(nt)&&b(nt)(...ne),["prevent"]))},[c(M,{name:"Folder",description:""},{description:f(()=>[ee[11]||(ee[11]=h("div",null,"Select folder with existing notes that you want to process",-1)),c(et,{errors:b(l).folder},null,8,["errors"])]),default:f(()=>[c(fu,De({modelValue:b(i),"onUpdate:modelValue":ee[0]||(ee[0]=ne=>ce(i)?i.value=ne:null)},b(u)),null,16,["modelValue"])]),_:1}),c(M,{name:"Take date from"},{default:f(()=>[c(Ve,De({modelValue:b(d),"onUpdate:modelValue":ee[1]||(ee[1]=ne=>ce(d)?d.value=ne:null)},b(m)),{default:f(()=>[...ee[12]||(ee[12]=[h("option",{value:"title"},"Note title",-1),h("option",{value:"property"},"Property",-1)])]),_:1},16,["modelValue"])]),_:1}),b(d)==="property"?(v(),E(M,{key:0,name:"Property containing date"},{description:f(()=>[c(et,{errors:b(l).property_name},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(g),"onUpdate:modelValue":ee[2]||(ee[2]=ne=>ce(g)?g.value=ne:null)},b(p)),null,16,["modelValue"])]),_:1})):R("",!0),c(M,{name:"Date format"},{description:f(()=>[ee[13]||(ee[13]=h("a",{target:"_blank",href:"https://momentjs.com/docs/#/displaying/format/"},"Syntax reference",-1)),ee[14]||(ee[14]=h("br",null,null,-1)),ee[15]||(ee[15]=_(" If your dates have time component in them - please omit it in format. ",-1)),c(pu,{format:b(k)??""},null,8,["format"]),b(d)==="property"?(v(),C("div",yy," Please pay attention that dates might differ from how they are stored. Check format in Source display mode. ")):R("",!0),c(et,{errors:b(l).date_format},null,8,["errors"])]),default:f(()=>[c(Je,De({modelValue:b(k),"onUpdate:modelValue":ee[3]||(ee[3]=ne=>ce(k)?k.value=ne:null)},b(y)),null,16,["modelValue"])]),_:1}),c(M,{name:"Process"},{default:f(()=>[c(Ve,De({modelValue:b(x),"onUpdate:modelValue":ee[4]||(ee[4]=ne=>ce(x)?x.value=ne:null)},b(A)),{default:f(()=>[...ee[16]||(ee[16]=[h("option",{value:"no"},"All notes",-1),h("option",{value:"or"},"Notes that match any filter",-1),h("option",{value:"and"},"Notes that match all filters",-1)])]),_:1},16,["modelValue"])]),_:1}),b(x)&&b(x)!=="no"?(v(),E(gy,{key:1,conditions:Le.value,mode:b(x),onAddCondition:Te,onChangeCondition:tt,onRemoveCondition:vt},null,8,["conditions","mode"])):R("",!0),c(M,{name:"If other note with same date exists in journal"},{default:f(()=>[c(Ve,De({modelValue:b(T),"onUpdate:modelValue":ee[5]||(ee[5]=ne=>ce(T)?T.value=ne:null)},b(Z)),{default:f(()=>[...ee[17]||(ee[17]=[h("option",{value:"skip"},"Skip note",-1),h("option",{value:"override"},"Override date connection",-1),h("option",{value:"merge"},"Merge note content into existing one",-1),h("option",{value:"ask"},"Ask for action for every such note",-1)])]),_:1},16,["modelValue"])]),_:1}),c(M,{name:"When note name differs from journal settings"},{default:f(()=>[c(Ve,De({modelValue:b(le),"onUpdate:modelValue":ee[6]||(ee[6]=ne=>ce(le)?le.value=ne:null)},b(ie)),{default:f(()=>[...ee[18]||(ee[18]=[h("option",{value:"keep"},"Keep as is",-1),h("option",{value:"rename"},"Rename",-1),h("option",{value:"ask"},"Ask for action for every such note",-1)])]),_:1},16,["modelValue"])]),_:1}),c(M,{name:"When note is not in folder from journal setting"},{default:f(()=>[c(Ve,De({modelValue:b(O),"onUpdate:modelValue":ee[7]||(ee[7]=ne=>ce(O)?O.value=ne:null)},b(N)),{default:f(()=>[...ee[19]||(ee[19]=[h("option",{value:"keep"},"Keep as is",-1),h("option",{value:"move"},"Move to configured folder",-1),h("option",{value:"ask"},"Ask for action for every such note",-1)])]),_:1},16,["modelValue"])]),_:1}),c(M,{name:"Dry run?"},{description:f(()=>[...ee[20]||(ee[20]=[_(" Don't change notes, just report potential changes ",-1)])]),default:f(()=>[c(He,De({modelValue:b(L),"onUpdate:modelValue":ee[8]||(ee[8]=ne=>ce(L)?L.value=ne:null)},b(me)),null,16,["modelValue"])]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:ee[9]||(ee[9]=ne=>qe.$emit("close"))},{default:f(()=>[...ee[21]||(ee[21]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",onClick:b(nt)},{default:f(()=>[...ee[22]||(ee[22]=[_("Start",-1)])]),_:1},8,["onClick"])]),_:1})],32))}});class by{#e;repeats=1;constructor(t){this.#e=t}get duration(){return this.#e.value.type}resolveForDate(t){const n=K(t);return n.isValid()?this.#n(n):null}resolveNext(t){const n=K(t);return n.isValid()?(n.add(1,this.#e.value.type),this.#n(n)):null}resolvePrevious(t){const n=K(t);return n.isValid()?(n.subtract(1,this.#e.value.type),this.#n(n)):null}resolveStartDate(t){const n=this.#e.value.type;return K(t).startOf(n).format(_e)}resolveEndDate(t){const n=this.#e.value.type;return K(t).endOf(n).format(_e)}resolveRelativeDate(t){const n=this.#e.value.type;return Ii(n,t)}resolveDateForCommand(t,n){switch(n){case"same":return t;case"next":return K(t).add(1,this.#e.value.type).format(_e);case"previous":return K(t).subtract(1,this.#e.value.type).format(_e);case"same_next_week":return K(t).add(1,"week").format(_e);case"same_previous_week":return K(t).subtract(1,"week").format(_e);case"same_next_month":return K(t).add(1,"month").format(_e);case"same_previous_month":return K(t).subtract(1,"month").format(_e);case"same_next_year":return K(t).add(1,"year").format(_e);case"same_previous_year":return K(t).subtract(1,"year").format(_e)}return null}countRepeats(t,n){const o=K(t),a=K(n);return Math.abs(Math.ceil(o.diff(a,this.#e.value.type)))}calculateOffset(t){const n=K(t),o=this.#n(n);if(!o)return[0,0];const a=this.resolveStartDate(o),r=this.resolveEndDate(o);return n.isBefore(a)||n.isAfter(r)?[0,0]:[n.diff(a,"days")+1,n.diff(r,"days")-1]}#n(t){const n=this.#e.value.type,o=t.clone().startOf(n);if(this.#e.value.type==="week"){const a=t.clone().endOf(n);if(!o.isSame(a,"year")&&o.week()===1)return a.format(_e)}return o.format(_e)}}class ky{constructor(t,n,o){this.journalName=t,this.index=o,this.#e=n}#e;get repeats(){return this.#e.value.duration}get duration(){return this.#e.value.every}resolveForDate(t){this.#a(t);const o=this.index.getJournalIndex(this.journalName).findClosestDate(t);if(o)return o===t?o:o<=t?this.#o(t,o):this.#n(t,o);const a=this.#e.value.anchorDate,r=this.resolveEndDate(a);return t>=a&&t<r?a:t<a?this.#n(t,a):this.#o(t,a)}resolveNext(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.resolveEndDate(n);return K(o).add(1,"day").format(_e)}resolvePrevious(t){const n=this.resolveForDate(t);if(!n)return null;const o=this.index.getJournalIndex(this.journalName),a=K(n).subtract(1,"day"),r=o.findClosestDate(a.format(_e));if(r){const s=this.index.get(this.journalName,r);if(s?.end_date&&a.isSame(s.end_date,"day"))return r}const l=this.#r(n);return l.format(_e)}resolveDateForCommand(t,n){const o=this.resolveForDate(t);return o?n==="next"?this.resolveNext(o):n==="previous"?this.resolvePrevious(o):o:null}resolveStartDate(t){return t}resolveEndDate(t){const n=this.index.get(this.journalName,t);return(n?.end_date?K(n.end_date):this.#t(t).subtract(1,"day")).format(_e)}resolveRelativeDate(t){const n=this.resolveForDate(Oe().format(_e));if(!n)return"";const o=this.countRepeats(n,t);switch(o){case 0:return"This "+this.journalName;case-1:return"Last "+this.journalName;case 1:return"Next "+this.journalName}return t<n?`${Math.abs(o)} ${this.journalName}s ago`:`${o} ${this.journalName}s from now`}calculateOffset(t){const n=this.resolveForDate(t);if(!n)return[0,0];const o=K(t),a=K(n),r=K(this.resolveEndDate(n));return[o.diff(a,"days")+1,o.diff(r,"days")-1]}countRepeats(t,n){const o=this.resolveForDate(t),a=this.resolveForDate(n);if(!o||!a)return 0;let r=K(o),l=K(a);r.isAfter(l)&&([r,l]=[l,r]);let s=0;for(;r.isBefore(l);){++s;const i=this.resolveNext(r.format(_e));if(!i)break;r=K(i)}return t>n?-s:s}#n(t,n){const o=this.index.getJournalIndex(this.journalName);let a=K(n),r=!1;for(;!r;){const l=a.clone().subtract(1,"day"),s=o.findClosestDate(l.format(_e));let i=this.#r(a);if(s){const u=this.index.get(this.journalName,s);u?.end_date&&l.isSame(u.end_date,"day")&&(i=K(s))}a=i.clone(),i.isSameOrBefore(t,"day")&&l.isSameOrAfter(t,"day")&&(r=!0)}return a.format(_e)}#o(t,n){let o=K(n),a=!1,r=0;for(;!a&&!(r>10);){const l=K(this.resolveEndDate(o.format(_e)));o.isSameOrBefore(t,"day")&&l.isSameOrAfter(t,"day")?a=!0:o=l.clone().add(1,"day"),++r}return o.format(_e)}#a(t){if(!K(t).isValid())throw new Error(`Invalid date: ${t}`)}#t(t){const n=typeof t=="string"?K(t):t;if(this.#e.value.every==="month"&&n.date()>28){const o=n.clone().endOf("month"),a=o.diff(n,"days");return o.clone().add(this.#e.value.duration,this.#e.value.every).endOf("month").clone().subtract(a,"days")}return n.clone().add(this.#e.value.duration,this.#e.value.every)}#r(t){const n=typeof t=="string"?K(t):t;if(this.#e.value.every==="month"&&n.date()>28){const o=n.clone().endOf("month"),a=o.diff(n,"days");return o.clone().subtract(this.#e.value.duration,this.#e.value.every).endOf("month").clone().add(a,"days")}return n.clone().subtract(this.#e.value.duration,this.#e.value.every)}}class ma{constructor(t,n,o,a,r,l){this.name=t,this.config=n,this.index=o,this.appManager=a,this.notesManager=r,this.activeNote=l,this.#e=this.config.value.write.type==="custom"?new ky(this.name,w(()=>this.config.value.write),this.index):new by(w(()=>this.config.value.write))}#e;#n=new Map;get type(){return this.config.value.write.type}get dateFormat(){return this.config.value.dateFormat}get navBlock(){return this.config.value.navBlock}get calendarViewBlock(){return this.config.value.calendarViewBlock}get decorations(){return this.config.value.decorations}get commands(){return this.config.value.commands}get isOnShelf(){return this.config.value.shelves.length>0}get shelfName(){return this.config.value.shelves[0]??""}get startDate(){return this.config.value.start}get endDate(){switch(this.config.value.end.type){case"date":return this.config.value.end.date;case"repeats":{const t=K(this.startDate);return t.isValid()?t.clone().add(this.config.value.end.repeats*this.#e.repeats,this.#e.duration).format(_e):""}}return""}calculateOffset(t){return this.#e.calculateOffset(t)}registerCommands(){for(const t of this.config.value.commands)this.#o(t)}get(t){const n=this.#e.resolveForDate(t);if(!n)return null;const o=this.index.get(this.name,n);return o||(this.#d(n)?this.#u(n):null)}next(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findNext(this.name,o);const a=this.#e.resolveNext(o);if(!a)return null;const r=this.index.get(this.name,a);return r||(this.#d(a)?this.#u(a):null)}previous(t,n=!1){const o=this.#e.resolveForDate(t);if(!o)return null;if(n)return this.index.findPrevious(this.name,o);const a=this.#e.resolvePrevious(o);if(!a)return null;const r=this.index.get(this.name,a);return r||(this.#d(a)?this.#u(a):null)}getNoteNameForDate(t){const n=this.get(t);if(!n)return"";const o=this.#s(n);return It(this.config.value.nameTemplate,o)}findAll(t,n){const o=this.#e.resolveForDate(t),a=this.#e.resolveForDate(n);if(!o||!a)return[];const r=[];let l=o;for(;l&&l<=a;){const s=this.get(l);s&&r.push(s);const i=this.next(l);l=i?i.date:null}return r}async open(t,n){const[o,a]=await this.#i(t);o&&await this.#l(o,n,a)}resolveAnchorDate(t){return this.#e.resolveForDate(t)}resolveStartDate(t){return this.#e.resolveStartDate(t)}resolveEndDate(t){return this.#e.resolveEndDate(t)}resolveRelativeDate(t){return this.#e.resolveRelativeDate(t)}addCommand(t){this.config.value.commands.push(t),this.#o(t)}updateCommand(t,n){this.config.value.commands[t]&&(this.#a(this.config.value.commands[t]),this.config.value.commands[t]=n,this.#o(n))}deleteCommand(t){const[n]=this.config.value.commands.splice(t,1);n&&this.#a(n)}#o(t){this.appManager.addCommand(this.name,t,n=>n?this.#t(t):(this.#r(t).catch(console.error),!0)),t.showInRibbon&&this.appManager.addRibbonIcon(this.name,t.icon,t.name,()=>{this.#t(t)&&this.#r(t).catch(console.error)})}#a(t){this.appManager.removeCommand(this.name,t),this.appManager.removeRibbonIcon(this.name,t.name)}#t(t){if(t.context==="only_open_note"){const n=this.activeNote.value;if(!n)return!1;const o=this.index.getForPath(n);if(!o||o.journal!==this.name)return!1}return!0}async#r(t){const n=this.#m(t);if(!n)return;const o=this.#e.resolveDateForCommand(n,t.type);if(!o)return;const a=this.get(o);a&&await this.open(a,t.openMode)}addDecoration(t){this.config.value.decorations.push(t)}editDecoration(t,n){this.config.value.decorations[t]=n}deleteDecoration(t){this.config.value.decorations.splice(t,1)}addNavRow(t){this.config.value.navBlock.rows.push(t)}editNavRow(t,n){this.config.value.navBlock.rows[t]=n}deleteNavRow(t){this.config.value.navBlock.rows.splice(t,1)}moveNavRowUp(t){if(t>0){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t-1],this.config.value.navBlock.rows[t-1]=n}}moveNavRowDown(t){if(t<this.config.value.navBlock.rows.length-1){const n=this.config.value.navBlock.rows[t];this.config.value.navBlock.rows[t]=this.config.value.navBlock.rows[t+1],this.config.value.navBlock.rows[t+1]=n}}addCalendarViewRow(t){this.config.value.calendarViewBlock.rows.push(t)}editCalendarViewRow(t,n){this.config.value.calendarViewBlock.rows[t]=n}deleteCalendarViewRow(t){this.config.value.calendarViewBlock.rows.splice(t,1)}moveCalendarViewRowUp(t){if(t>0){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t-1],this.config.value.calendarViewBlock.rows[t-1]=n}}moveCalendarViewRowDown(t){if(t<this.config.value.calendarViewBlock.rows.length-1){const n=this.config.value.calendarViewBlock.rows[t];this.config.value.calendarViewBlock.rows[t]=this.config.value.calendarViewBlock.rows[t+1],this.config.value.calendarViewBlock.rows[t+1]=n}}async connectNote(t,n,o){const a=this.get(n);if(!a)return!1;if("path"in a){if(!o.override)return!1;await this.disconnectNote(a.path)}if(o.rename||o.move){const[r,l]=this.getConfiguredPathData(a),s=o.move?r:this.notesManager.getNoteFolder(t),i=o.rename?l:this.notesManager.getNoteFilename(t),u=this.notesManager.normalizePath(s?`${s}/${i}`:i);await this.notesManager.renameNote(t,u),t=u}return await this.#c(t,a),!0}async disconnectNote(t){await this.notesManager.updateNoteFrontmatter(t,n=>{delete n[mt],delete n[this.frontmatterDate],delete n[this.frontmatterStartDate],delete n[this.frontmatterEndDate],delete n[this.frontmatterIndex]})}async clearNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.disconnectNote(o));await Promise.allSettled(t)}async deleteNotes(){const t=[],n=this.index.getAllPaths(this.name);for(const o of n)t.push(this.notesManager.deleteNote(o));await Promise.allSettled(t)}get frontmatterDate(){return this.config.value.frontmatter.dateField||Xa}get frontmatterIndex(){return this.config.value.frontmatter.indexField||Za}get frontmatterStartDate(){return this.config.value.frontmatter.startDateField||an}get frontmatterEndDate(){return this.config.value.frontmatter.endDateField||wn}async renameFrontmatterField(t,n,o){this.config.value.frontmatter[t]=o;const a=this.index.getJournalIndex(this.name);if(a)for(const[,r]of a)await this.notesManager.updateNoteFrontmatter(r,l=>{String(n)in l&&(l[o]=l[n],delete l[n])})}async toggleFrontmatterStartDate(){this.config.value.frontmatter.addStartDate=!this.config.value.frontmatter.addStartDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const a=this.resolveAnchorDate(o[this.frontmatterDate]);a&&(this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(a):delete o[this.frontmatterStartDate])})}async toggleFrontmatterEndDate(){this.config.value.frontmatter.addEndDate=!this.config.value.frontmatter.addEndDate;const t=this.index.getJournalIndex(this.name);if(t)for(const[,n]of t)await this.notesManager.updateNoteFrontmatter(n,o=>{const a=this.resolveAnchorDate(o[this.frontmatterDate]);if(!a)return;const r=this.index.getForPath(n);this.config.value.frontmatter.addEndDate?o[this.frontmatterEndDate]=r?.end_date??this.resolveEndDate(a):r?.end_date?this.resolveEndDate(a)===r.end_date&&delete o[this.frontmatterEndDate]:delete o[this.frontmatterEndDate]})}async autoCreate(){if(!this.config.value.autoCreate)return;const t=this.get(Oe().format(_e));t&&await this.#i(t)}async#l(t,n="active",o=!1){await this.notesManager.openNote(t,n==="active"?void 0:n),o&&await this.notesManager.tryTemplaterCursorJump(t)}async#i(t){const n=this.getNotePath(t);let o=!1;if(!this.notesManager.nodeExists(n)){const a=this.#s(t),r=It(this.config.value.nameTemplate,a);if(this.config.value.confirmCreation&&!await this.notesManager.confirmNoteCreation(this.name,r))return[null,!1];o=!0;try{await this.notesManager.createNote(n,""),a.note_name={type:"string",value:r};const l=await this.#p(n,a);l&&await this.notesManager.updateNote(n,l)}catch(l){throw console.error(l),new Error("Failed to create note")}}return await this.#c(n,t),[n,o]}getConfiguredPathData(t){const n=this.#s(t),o=It(this.config.value.nameTemplate??su[this.type],n)+".md";return[It(this.config.value.folder,n)||"/",o]}getResolvedTemplatePath(t,n){const o=this.#s(n);return It(t,o)}getNotePath(t){if("path"in t)return t.path;const n=this.#s(t),o=It(this.config.value.nameTemplate,n)+".md",a=It(this.config.value.folder,n);return this.notesManager.normalizePath(a?`${a}/${o}`:o)}#s(t){const n=String(X.moment()),o={date:{type:"date",value:t.date,defaultFormat:this.config.value.dateFormat},start_date:{type:"date",value:this.#e.resolveStartDate(t.date),defaultFormat:this.config.value.dateFormat},end_date:{type:"date",value:t.end_date??this.#e.resolveEndDate(t.date),defaultFormat:this.config.value.dateFormat},journal_name:{type:"string",value:this.config.value.name},index:{type:"number",value:t.index},note_name:{type:"string",value:""},title:{type:"string",value:""},time:{type:"date",value:n,defaultFormat:"HH:mm"},current_time:{type:"date",value:n,defaultFormat:"HH:mm"},current_date:{type:"date",value:n,defaultFormat:"YYYY-MM-DD"}},a=It(this.config.value.nameTemplate,o);return a&&(o.title&&(o.title.value=a),o.note_name&&(o.note_name.value=a)),o}async#p(t,n){if(this.config.value.templates.length>0)for(const o of this.config.value.templates){const a=It(o.endsWith(".md")?o:o+".md",n),r=await this.notesManager.getNoteContent(a);if(r)return this.notesManager.tryApplyingTemplater(a,t,It(r,n))}return""}async#c(t,n){await this.notesManager.updateNoteFrontmatter(t,o=>{o[mt]=this.name,o[this.frontmatterDate]=K(n.date).format(_e),this.config.value.frontmatter.addStartDate?o[this.frontmatterStartDate]=this.resolveStartDate(n.date):delete o[this.frontmatterStartDate],this.config.value.frontmatter.addEndDate||n.end_date&&n.end_date!==this.resolveStartDate(n.date)?o[this.frontmatterEndDate]=n.end_date?K(n.end_date).format(_e):this.resolveEndDate(n.date):delete o[this.frontmatterEndDate],n.index==null?delete o[this.frontmatterIndex]:o[this.frontmatterIndex]=n.index})}#u(t){return{journal:this.name,date:t,index:this.#f(t)}}#m(t){const n=this.activeNote.value,o=n?this.index.getForPath(n):null;return o&&t.context!=="today"?o.date:t.context==="only_open_note"?null:Oe().format(_e)}#d(t){if(this.config.value.start){const n=K(this.config.value.start);if(n.isValid()&&K(t).isBefore(n))return!1}if(this.config.value.end.type==="date"&&this.config.value.end.date){const n=K(this.config.value.end.date);if(n.isValid()&&K(t).isAfter(n))return!1}return!(this.config.value.end.type==="repeats"&&this.config.value.end.repeats&&this.config.value.start&&this.#e.countRepeats(this.config.value.start,t)>=this.config.value.end.repeats)}#f(t){if(!this.config.value.index.enabled||!this.config.value.index.anchorDate||!this.config.value.index.anchorIndex)return;if(this.#n.has(t))return this.#n.get(t);const n=this.previous(t,!0);if(n?.index){const s=this.#e.countRepeats(n.date,t);let i=n.index+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const o=this.next(t,!0);if(o?.index){const s=this.#e.countRepeats(t,o.date);let i=o.index-s;return this.config.value.index.type==="reset_after"&&i<0&&(i*=-1),this.#n.set(t,i),i}const a=K(this.config.value.index.anchorDate);if(!a.isValid())return;if(a.isAfter(t)&&this.config.value.index.type==="increment"&&!this.config.value.index.allowBefore){this.#n.set(t,void 0);return}if(a.isBefore(t)){const s=this.#e.countRepeats(this.config.value.index.anchorDate,t);let i=this.config.value.index.anchorIndex+s;return this.config.value.index.type==="reset_after"&&(i%=this.config.value.index.resetAfter),this.#n.set(t,i),i}const r=this.#e.countRepeats(t,this.config.value.index.anchorDate);let l=this.config.value.index.anchorIndex-r;return this.config.value.index.type==="reset_after"&&l<0&&(l*=-1),this.#n.set(t,l),l}dispose(){for(const t of this.commands)this.#a(t)}}function _y(e,t,n,o){const a=[],r=Gc(o.date_format);for(const l of n){const s={path:l,operations:[]};a.push(s);const i=e.index.getForPath(l);if(i){s.operations.push({type:"skipping",reason:t.name===i.journal?"already in journal":"already in another journal "+i.journal});continue}if(!Cy(e,l,o.filter_combinator,o.filters)){s.operations.push({type:"skipping",reason:"does not match filters"});continue}const u=o.date_place==="title"?e.notesManager.getNoteName(l):e.notesManager.getNoteMetadata(l)?.frontmatter?.[o.property_name];if(u===void 0){s.operations.push({type:"skipping",reason:"does not have date containing property "+o.property_name});continue}const d=u.match(r);if(!d){s.operations.push({type:"skipping",reason:"date with configured format not found"});continue}const m=K(d[0],o.date_format);if(!m.isValid()){s.operations.push({type:"skipping",reason:"invalid date "+u});continue}const g=t.get(m.format("YYYY-MM-DD"));if(!g){s.operations.push({type:"skipping",reason:"date is outside of journal boundaries "+m.format("YYYY-MM-DD")});continue}"path"in g&&g.path&&s.operations.push({type:"existing_note",other_file:g.path,decision:o.existing_note});const[p,k]=t.getConfiguredPathData(g);p!==e.notesManager.getNoteFolder(l)&&s.operations.push({type:"other_folder",configured_folder:p,decision:o.other_folder}),k!==e.notesManager.getNoteFilename(l)&&s.operations.push({type:"other_name",configured_name:k,decision:o.other_name}),s.operations.push({type:"connect",anchor_date:g.date})}return a}function Cy(e,t,n,o){return n==="no"?!0:n==="and"?o.every(a=>xs(e,t,a)):n==="or"?o.some(a=>xs(e,t,a)):!1}function xs(e,t,n){if(!e.notesManager.getNoteMetadata(t))return!1;switch(n.type){case"title":return Sy(e,t,n);case"tag":return xy(e,t,n);case"property":return Dy(e,t,n)}return!0}function Sy(e,t,n){const o=e.notesManager.getNoteName(t);switch(n.condition){case"contains":return o.contains(n.value);case"starts-with":return o.startsWith(n.value);case"ends-with":return o.endsWith(n.value);default:tr(n.condition)}}function xy(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o||!o.tags)return!1;switch(n.condition){case"contains":return o.tags.some(a=>a.tag.contains(n.value));case"starts-with":return o.tags.some(a=>a.tag.startsWith(n.value));case"ends-with":return o.tags.some(a=>a.tag.endsWith(n.value));default:tr(n.condition)}}function Dy(e,t,n){const o=e.notesManager.getNoteMetadata(t);if(!o)return!1;const a=o.frontmatter?.[n.name];switch(n.condition){case"exists":return!!o.frontmatter&&n.name in o.frontmatter;case"does-not-exist":return!!o.frontmatter&&!(n.name in o.frontmatter);case"eq":return a==n.value;case"neq":return a!=n.value;case"contains":return typeof a=="string"&&a.contains(n.value);case"does-not-contain":return typeof a!="string"||typeof a=="string"&&!a.contains(n.value);case"starts-with":return typeof a=="string"&&a.startsWith(n.value);case"ends-with":return typeof a=="string"&&a.endsWith(n.value);default:tr(n.condition)}}function Vy(e,t){t.actions.push(`Skipped: ${e.reason}`)}async function jy(e,t,n,o,a){a.actions.push(`Note connected to journal at ${o.anchor_date}`),n.dry_run||await e.connectNote(t.path,o.anchor_date,{})}async function $y(e,t,n,o,a){switch(o.decision){case"skip":{a.actions.push("Skipped: other note connected to same date already exists in journal");break}case"override":{a.actions.push(`Other note "${o.other_file}" connected to same date disconnected`),n.dry_run||await e.disconnectNote(t.path);break}case"merge":{if(a.actions.push(`Content of note was merged into "${o.other_file}, note deleted"`),!n.dry_run){const r=await e.notesManager.getNoteContent(t.path);await e.notesManager.appendNote(o.other_file,r),await e.notesManager.deleteNote(t.path)}break}}}async function My(e,t,n,o,a){switch(o.decision){case"keep":{a.actions.push(`Notes folder "${e.notesManager.getNoteFolder(t.path)??"/"}" differs from configured folder "${o.configured_folder??"/"}" - keeping as is`);break}case"move":{if(a.actions.push(`Moved note to "${o.configured_folder??"/"}"`),!n.dry_run){const r=e.notesManager.getNoteFilename(t.path),l=X.normalizePath(o.configured_folder?`${o.configured_folder}/${r}`:r);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function Ny(e,t,n,o,a){switch(o.decision){case"keep":{a.actions.push(`Note name "${e.notesManager.getNoteName(t.path)}" differs from configured name "${o.configured_name}" - keeping as is`);break}case"rename":{if(a.actions.push(`Renamed note to "${o.configured_name}"`),!n.dry_run){const r=e.notesManager.getNoteFolder(t.path),l=X.normalizePath(r?`${r}/${o.configured_name}`:o.configured_name);await e.notesManager.renameNote(t.path,l),t.path=l}break}}}async function Oy(e,t,n,o){const{path:a,operations:r}=n,l={note:e.notesManager.getNoteFilename(a),folder:e.notesManager.getNoteFolder(a),path:a,actions:[]};try{for(const s of r)switch(s.type){case"skipping":{Vy(s,l);break}case"connect":{await jy(t,n,o,s,l);break}case"existing_note":return await $y(e,n,o,s,l),l;case"other_folder":{await My(e,n,o,s,l);break}case"other_name":{await Ny(e,n,o,s,l);break}}}catch(s){console.error(s),l.actions.push(`Error: ${s instanceof Error?s.message:String(s)}`)}return l}const Ay={key:0},Ty={key:0},Fy={class:"u-pop"},Ey={class:"decision-buttons"},Py={key:1},Iy={class:"u-pop"},Ry={class:"u-pop"},By={class:"decision-buttons"},Yy={key:2},Uy={class:"u-pop"},Wy={class:"u-pop"},Ly={class:"decision-buttons"},Jy={key:1},qy={class:"flair"},Hy=I({__name:"BulkProcessNotes",props:{journalName:{},parameters:{}},emits:["close"],setup(e){const t=pe(),n=w(()=>t.getJournal(e.journalName)),o=fe("Building list..."),a=fe([]),r=fe(null),l=w(()=>r.value?r.value.operations.filter(k=>k.type==="existing_note"&&k.decision==="ask"||k.type==="other_folder"&&k.decision==="ask"||k.type==="other_name"&&k.decision==="ask"):[]),s=w(()=>r.value?t.notesManager.getNoteFilename(r.value.path):""),i=w(()=>r.value?t.notesManager.getNoteFolder(r.value.path):""),u=fe([]),d=w(()=>l.value.length>0);async function m(){await rm(10),a.value.length>0?(r.value=a.value.shift()??null,g().catch(console.error)):o.value="Finished"}async function g(){if(!n.value||!r.value||d.value)return;const k=await Oy(t,n.value,r.value,e.parameters);u.value.push(k),r.value=null,m().catch(console.error)}function p(k,y){k.decision=y,g().catch(console.error)}return bt(()=>{if(!n.value)return;const k=t.notesManager.getNotesInFolder(e.parameters.folder);o.value="Preprocessing notes...",a.value=_y(t,n.value,k,e.parameters),o.value="Processing notes...",m().catch(console.error)}),(k,y)=>(v(),C(W,null,[r.value&&d.value?(v(),C("div",Ay,[h("h4",null,"Note: "+P(s.value),1),(v(!0),C(W,null,Ce(l.value,(x,A)=>(v(),C("div",{key:A,class:"operation"},[x.type==="existing_note"?(v(),C("div",Ty,[h("p",null,[y[1]||(y[1]=_(" Other note with same date exists in journal - ",-1)),h("span",Fy,P(b(t).notesManager.getNoteName(x.other_file)),1)]),h("div",Ey,[c(ue,{onClick:T=>p(x,"skip")},{default:f(()=>[...y[2]||(y[2]=[_("Skip note",-1)])]),_:2},1032,["onClick"]),c(ue,{onClick:T=>p(x,"override")},{default:f(()=>[...y[3]||(y[3]=[_("Override date connection",-1)])]),_:2},1032,["onClick"]),c(ue,{onClick:T=>p(x,"merge")},{default:f(()=>[...y[4]||(y[4]=[_("Merge note content into existing one",-1)])]),_:2},1032,["onClick"])])])):x.type==="other_folder"?(v(),C("div",Py,[h("p",null,[y[5]||(y[5]=_(" Note is not in folder from journal setting",-1)),y[6]||(y[6]=h("br",null,null,-1)),y[7]||(y[7]=h("b",null,"Configured folder:",-1)),h("span",Iy,P(x.configured_folder),1),y[8]||(y[8]=h("br",null,null,-1)),y[9]||(y[9]=h("b",null,"Current folder:",-1)),y[10]||(y[10]=_()),h("span",Ry,P(i.value),1)]),h("div",By,[c(ue,{onClick:T=>p(x,"keep")},{default:f(()=>[...y[11]||(y[11]=[_("Keep as is",-1)])]),_:2},1032,["onClick"]),c(ue,{onClick:T=>p(x,"move")},{default:f(()=>[...y[12]||(y[12]=[_("Move to configured folder",-1)])]),_:2},1032,["onClick"])])])):x.type==="other_name"?(v(),C("div",Yy,[h("p",null,[y[13]||(y[13]=_(" Note name differs from journal settings",-1)),y[14]||(y[14]=h("br",null,null,-1)),y[15]||(y[15]=h("b",null,"Configured name:",-1)),y[16]||(y[16]=_()),h("span",Uy,P(x.configured_name),1),y[17]||(y[17]=h("br",null,null,-1)),y[18]||(y[18]=h("b",null,"Current name:",-1)),y[19]||(y[19]=_()),h("span",Wy,P(s.value),1)]),h("div",Ly,[c(ue,{onClick:T=>p(x,"keep")},{default:f(()=>[...y[20]||(y[20]=[_("Keep as is",-1)])]),_:2},1032,["onClick"]),c(ue,{onClick:T=>p(x,"rename")},{default:f(()=>[...y[21]||(y[21]=[_("Rename to configured name",-1)])]),_:2},1032,["onClick"])])])):R("",!0)]))),128))])):(v(),C("div",Jy,P(o.value),1)),u.value.length>0?(v(),E(xt,{key:2},{trigger:f(()=>[_(" Processed notes "+P(k.parameters.dry_run?"(dry run)":"")+" ",1),h("span",qy,P(u.value.length),1)]),default:f(()=>[(v(!0),C(W,null,Ce(u.value,x=>(v(),C("div",{key:x.path,class:"log-entry"},[_(P(x.path),1),y[22]||(y[22]=h("br",null,null,-1)),h("ul",null,[(v(!0),C(W,null,Ce(x.actions,A=>(v(),C("li",{key:A},P(A),1))),128))])]))),128))]),_:1})):R("",!0),o.value==="Finished"?(v(),E(M,{key:3},{default:f(()=>[c(ue,{onClick:y[0]||(y[0]=x=>k.$emit("close"))},{default:f(()=>[...y[23]||(y[23]=[_("Close",-1)])]),_:1})]),_:1})):R("",!0)],64))}}),zy=ye(Hy,[["__scopeId","data-v-ffd82087"]]),Ky=I({__name:"BulkAddNotes.modal",props:{journalName:{}},emits:["close"],setup(e){const t=fe();function n(o){t.value=o}return(o,a)=>t.value?(v(),E(zy,{key:0,"journal-name":o.journalName,parameters:t.value,onClose:a[0]||(a[0]=r=>o.$emit("close"))},null,8,["journal-name","parameters"])):(v(),E(wy,{key:1,"journal-name":o.journalName,onProcess:n,onClose:a[1]||(a[1]=r=>o.$emit("close"))},null,8,["journal-name"]))}}),Gy=I({__name:"JournalSettingsRoot",setup(e){const t=fe(null),n=fe(null),o=pe();function a(r){new Ne(o,`Add notes to ${r}`,Ky,{journalName:r},700).open()}return(r,l)=>t.value?(v(),E(sy,{key:0,"journal-name":t.value,onBack:l[0]||(l[0]=s=>t.value=null),onEdit:l[1]||(l[1]=s=>t.value=s)},null,8,["journal-name"])):n.value?(v(),E(py,{key:1,"shelf-name":n.value,onBack:l[2]||(l[2]=s=>n.value=null),onOrganize:l[3]||(l[3]=s=>n.value=s),onEdit:l[4]||(l[4]=s=>t.value=s),onBulkAdd:l[5]||(l[5]=s=>a(s))},null,8,["shelf-name"])):(v(),E(nv,{key:2,onEdit:l[6]||(l[6]=s=>t.value=s),onOrganize:l[7]||(l[7]=s=>n.value=s),onBulkAdd:l[8]||(l[8]=s=>a(s))}))}});class Qy extends X.PluginSettingTab{#e=null;#n;constructor(t,n){super(t,n),this.#n=n}display(){this.#e=fo(Gy),this.#e.provide(Wn,this.#n),this.#e.mount(this.containerEl)}hide(){this.#e?.unmount(),this.#e=null,this.containerEl.empty()}}class Xy{#e=fe(new Map);#n=new Map;#o=[];has(t){return this.#e.value.has(t)}get(t){return this.#e.value.get(t)??null}getAll(){return[...this.#e.value.values()]}set(t,n){const o=this.#e.value.has(t);this.#e.value.set(t,n),this.#n.set(n,t),o||this.#a(t)}delete(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.#n.delete(n),this.#t(t)}deleteForPath(t){const n=this.#n.get(t);n&&this.delete(n)}findNext(t){const n=this.#r(t);if(n===-1||n===this.#o.length-1)return null;const o=this.#o[n+1];return o?this.#e.value.get(o)??null:null}findPrevious(t){const n=this.#r(t);if(n===-1||n===0)return null;const o=this.#o[n-1];return o?this.#e.value.get(o)??null:null}findClosestDate(t){if(this.#e.value.size===0)return;if(this.#e.value.has(t))return t;const n=this.#o[0];if(n&&t<=n)return n;const o=this.#o.at(-1);if(o&&t>=o)return o;const a=this.#r(t);if(a!==-1)return this.#o[a]?this.#o[a]:void 0}*[Symbol.iterator](){yield*this.#e.value}#a(t){const n=this.#r(t);return this.#o.splice(n+1,0,t),n+1}#t(t){const n=this.#r(t);n!==-1&&this.#o.splice(n,1)}#r(t){if(this.#o.length===0)return-1;let n=0,o=this.#o.length;for(;o-n>1;){const a=Math.floor((n+o)/2),r=this.#o[a];if(!r)break;if(r===t)return a;r<t?n=a:o=a}return n===0&&this.#o[0]&&this.#o[0]>t?-1:n}}class Zy{#e=fe(new Map);#n=new Map;#o=co(new Map);getForPath(t){return this.#e.value.get(t)??null}getForPathComputed(t){let n=this.#n.get(t);return n||(n=w(()=>this.#e.value.get(t)??null),this.#n.set(t,n),n)}get(t,n){const o=this.getJournalIndex(t).get(n);return o?this.getForPath(o):null}getAllPaths(t){return this.getJournalIndex(t).getAll()}findNext(t,n){const o=this.getJournalIndex(t).findNext(n);return o?this.getForPath(o):null}findPrevious(t,n){const o=this.getJournalIndex(t).findPrevious(n);return o?this.getForPath(o):null}getJournalIndex(t){let n=this.#o.value.get(t);return n||(n=new Xy,this.#o.value.set(t,n)),n}registerPathData(t,n){this.#e.value.set(t,n),this.getJournalIndex(n.journal).set(n.date,t)}unregisterPathData(t){const n=this.#e.value.get(t);this.#e.value.delete(t),n&&this.getJournalIndex(n.journal).delete(n.date)}clearForPath(t){const n=this.#e.value.get(t);n&&(this.#e.value.delete(t),this.#n.delete(t),this.#o.value.get(n.journal)?.delete(n.date))}transferPathData(t,n,o){const a=this.#e.value.get(t);if(!a)return;this.#e.value.delete(t),a.path=n,a.title=o,this.#e.value.set(n,a);const r=this.#o.value.get(a.journal);r&&(r.deleteForPath(t),r.set(a.date,n))}updateFromMetadata(t,n,o,a){const{frontmatter:r}=a;if(!r||!(mt in r))return;const l=r[t.frontmatterDate],s=r[t.frontmatterEndDate];if(!K(l).isValid()||s&&!K(s).isValid())return;const i={title:n,journal:t.name,date:l,end_date:s,path:o,index:r[t.frontmatterIndex],tags:a.tags?.map(u=>u.tag)??[],tasks:a.listItems?.filter(u=>u.task!=null).map(u=>({completed:u.task!==" "}))??[],properties:r};this.#e.value.set(o,i),this.getJournalIndex(t.name).set(l,o)}onunload(){this.#e.value.clear(),this.#n.clear(),this.#o.value.clear()}}const e1={class:"calendar-view-interval"},t1=I({__name:"CalendarViewCustomInterval",props:{date:{},journal:{}},setup(e){Fn(u=>({cfc2f888:s.value,"01165f16":i.value}));const t=pe(),n=w(()=>K(e.date).startOf("month").format("YYYY-MM-DD")),o=w(()=>K(e.date).endOf("month").format("YYYY-MM-DD")),a=w(()=>e.journal.findAll(n.value,o.value)),r=rr(t),l=w(()=>r.value?.journal===e.journal.name),s=w(()=>Vt(t.calendarViewSettings.activeStyle.color)),i=w(()=>Vt(t.calendarViewSettings.activeStyle.background));return(u,d)=>(v(),C("div",e1,[(v(!0),C(W,null,Ce(a.value,m=>(v(),E(ka,{key:m.date,rows:u.journal.calendarViewBlock.rows,"ref-date":m.date,"journal-name":u.journal.name,class:$t({"is-active":l.value&&m.date===b(r)?.date}),"decorate-block":u.journal.calendarViewBlock.decorateWholeBlock},null,8,["rows","ref-date","journal-name","class","decorate-block"]))),128))]))}}),n1=ye(t1,[["__scopeId","data-v-6fda8589"]]),o1={class:"custom-intervals-journals"},a1=I({__name:"CalendarViewCustomIntervals",props:{date:{}},setup(e){const{journals:{custom:t}}=na();return(n,o)=>(v(),C("div",o1,[(v(!0),C(W,null,Ce(b(t),a=>(v(),E(n1,{key:a.name,date:n.date,journal:a},null,8,["date","journal"]))),128))]))}}),r1=ye(a1,[["__scopeId","data-v-1db5074f"]]),l1={class:"calendar-view-header"},s1={class:"month-header"},i1=I({__name:"CalendarView",setup(e){const t=pe(),n=fe(Oe()),o=w(()=>n.value.format("YYYY-MM-DD")),a=w({get(){return t.uiSettings.calendarShelf},set(O){t.uiSettings.calendarShelf=O}}),r=w(()=>t.usesShelves&&Object.values(t.shelves).length>0),{journals:l}=ta(a),s=w(()=>n.value.clone().startOf("month").format(_e)),i=w(()=>n.value.clone().startOf("quarter").format(_e)),u=w(()=>n.value.clone().startOf("year").format(_e)),d=rr(t),m=w(()=>d.value?t.getJournal(d.value.journal):null),g=w(()=>m.value?.type==="month"&&d.value?.date===s.value),p=w(()=>m.value?.type==="quarter"&&d.value?.date===i.value),k=w(()=>m.value?.type==="year"&&d.value?.date===u.value);function y(O){const N=new X.Menu;N.addItem(le=>{le.setTitle("All journals").onClick(()=>{a.value=null})});for(const le of t.shelves)N.addItem(ie=>{ie.setTitle(le.name).onClick(()=>{a.value=le.name})});N.showAtMouseEvent(O)}function x(O,N="month"){const le=n.value.clone();O<0?le.subtract(Math.abs(O),N):le.add(O,N),n.value=le}function A(O){n.value=Oe(),t.calendarViewSettings.todayMode==="create"?Z(o.value,O):t.calendarViewSettings.todayMode==="navigate"&&Z(o.value,O,!0)}function T(O){new Ne(t,"Pick a date",au,{selectedDate:o.value,onSelect(N){n.value=K(N),t.calendarViewSettings.pickMode==="create"?Z(N,O):t.calendarViewSettings.pickMode==="navigate"&&Z(N,O,!0)}},400).open()}function Z(O,N,le=!1){Wo(t,O,l.day.value.map(ie=>ie.name),le,Lo(N),N).catch(console.error)}return lt(d,O=>{if(!O)return;const N=t.getJournal(O.journal);if(N)switch(N.type){case"week":{const le=K(O.date),ie=n.value.clone().startOf("month").startOf("week"),L=n.value.clone().endOf("month").endOf("week");(le.isBefore(ie)||le.isAfter(L))&&(n.value=le);break}case"quarter":{const le=K(O.date).startOf("quarter"),ie=K(O.date).endOf("quarter");n.value.isBetween(le,ie)||(n.value=le);break}case"year":{const le=K(O.date).startOf("year"),ie=K(O.date).endOf("year");n.value.isBetween(le,ie)||(n.value=le);break}default:n.value=K(O.date)}}),(O,N)=>(v(),C("div",null,[h("div",l1,[r.value?(v(),E(ue,{key:0,onClick:y},{default:f(()=>[_(P(a.value||"All journals"),1)]),_:1})):R("",!0),c(be,{icon:"crosshair",tooltip:"Select a date to be displayed",onClick:T}),c(ue,{onClick:A},{default:f(()=>[...N[4]||(N[4]=[_("Today",-1)])]),_:1})]),c(lr,{"ref-date":o.value},{header:f(()=>[c(be,{icon:"chevrons-left",tooltip:"Previous year",onClick:N[0]||(N[0]=le=>x(-1,"year"))}),c(be,{icon:"chevron-left",tooltip:"Previous month",onClick:N[1]||(N[1]=le=>x(-1,"month"))}),h("div",s1,[c(qt,{date:s.value,type:"month","data-selected":g.value?"":null},null,8,["date","data-selected"]),b(l).quarter.value.length>0?(v(),E(qt,{key:0,date:i.value,type:"quarter","data-selected":p.value?"":null},null,8,["date","data-selected"])):R("",!0),c(qt,{date:u.value,type:"year","data-selected":k.value?"":null},null,8,["date","data-selected"])]),c(be,{icon:"chevron-right",tooltip:"Next month",onClick:N[2]||(N[2]=le=>x(1,"month"))}),c(be,{icon:"chevrons-right",tooltip:"Next year",onClick:N[3]||(N[3]=le=>x(1,"year"))})]),_:1},8,["ref-date"]),N[5]||(N[5]=h("div",{class:"calendar-view-separator"},null,-1)),c(r1,{date:o.value},null,8,["date"])]))}}),u1=ye(i1,[["__scopeId","data-v-778e81e7"]]);class d1 extends X.ItemView{constructor(t,n){super(t),this.plugin=n}navigation=!1;#e=null;getViewType(){return fn}getDisplayText(){return"Calendar"}getIcon(){return"calendar-days"}onOpen(){return this.#e=fo(u1),this.#e.provide(Wn,this.plugin),this.#e.mount(this.contentEl),Promise.resolve()}onClose(){return this.#e?.unmount(),this.#e=null,this.contentEl.empty(),Promise.resolve()}}class c1 extends X.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.path=a,this.init(t)}_vueApp;mode;init(t){const n=this.source.split(`
`);for(const o of n){const[a,r]=o.split(":");a?.trim()==="mode"&&(this.mode=r?.trim()??"week")}this._vueApp=fo(Cu,{mode:this.mode,path:this.path}),this._vueApp.provide(Wn,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}class $r extends X.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.path=a,this.init(t)}_vueApp;init(t){this._vueApp=fo(ku,{path:this.path}),this._vueApp.provide(Wn,t),this._vueApp.mount(this.containerEl)}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}const f1={key:0},p1={class:"u-pop"},m1={key:1},v1=["value"],h1={class:"u-pop"},g1={class:"u-pop"},y1={class:"u-pop"},w1={class:"u-pop"},b1={class:"u-pop"},k1=I({__name:"ConnectNote.modal",props:{path:{}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,a=pe(),r=ar(n.path),l=w(()=>a.notesManager.getNoteFilename(n.path)),s=w(()=>a.notesManager.getNoteFolder(n.path)),{defineField:i,errorBag:u,handleSubmit:d}=xn({initialValues:{journalName:"",refDate:"",override:!1,rename:!1,move:!1},validationSchema:Vn(At({journalName:wt(Xe(),Gt("Journal name is required")),refDate:wt(Xe(),Gt("Date is required")),override:rn(),rename:rn(),move:rn()}))}),[m,g]=i("journalName"),[p,k]=i("refDate"),[y,x]=i("override"),[A,T]=i("rename"),[Z,O]=i("move");lt(p,()=>{y.value=!1,A.value=!1,Z.value=!1});const N=w(()=>m.value?a.getJournal(m.value):null),le=w(()=>{if(N.value)return N.value.startDate}),ie=w(()=>{if(N.value)return N.value.endDate}),L=w(()=>!N.value||!p.value?null:N.value.resolveAnchorDate(p.value)),me=w(()=>!N.value||!L.value?null:N.value.get(L.value)),Le=w(()=>!N.value||!p.value||!L.value?null:a.index.get(N.value.name,L.value)),Te=w(()=>!me.value||!N.value?null:N.value.getConfiguredPathData(me.value)),tt=w(()=>{if(!Te.value)return!1;const[,ne]=Te.value;return l.value!==ne}),vt=w(()=>{if(!Te.value)return!1;const[ne]=Te.value;return s.value!==(ne??"/")}),nt=w(()=>!(!N.value||!p.value||Le.value&&!y.value));function qe(){a.disconnectNote(n.path).catch(console.error)}const ee=d(()=>{nt.value&&L.value&&(N.value?.connectNote(n.path,L.value,{override:y.value,rename:A.value,move:Z.value}).catch(console.error),o("close"))});return(ne,z)=>b(r)?(v(),C("div",f1,[c(M,{name:"Note is already connected"},{description:f(()=>[z[8]||(z[8]=_(" Journal: ",-1)),h("b",p1,P(b(r).journal),1)]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:z[0]||(z[0]=oe=>ne.$emit("close"))},{default:f(()=>[...z[9]||(z[9]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",onClick:qe},{default:f(()=>[...z[10]||(z[10]=[_("Disconnect",-1)])]),_:1})]),_:1})])):(v(),C("div",m1,[_(P(ne.path)+" ",1),h("form",{onSubmit:z[7]||(z[7]=(...oe)=>b(ee)&&b(ee)(...oe))},[c(M,{name:"Journal"},{description:f(()=>[c(et,{errors:b(u).journalName},null,8,["errors"])]),default:f(()=>[c(Ve,De({modelValue:b(m),"onUpdate:modelValue":z[1]||(z[1]=oe=>ce(m)?m.value=oe:null)},b(g)),{default:f(()=>[(v(!0),C(W,null,Ce(b(a).journals,oe=>(v(),C("option",{key:oe.name,value:oe.name},P(oe.name),9,v1))),128))]),_:1},16,["modelValue"])]),_:1}),b(m)?(v(),C(W,{key:0},[c(M,{name:"Date"},{description:f(()=>[c(et,{errors:b(u).refDate},null,8,["errors"])]),default:f(()=>[c(To,De({modelValue:b(p),"onUpdate:modelValue":z[2]||(z[2]=oe=>ce(p)?p.value=oe:null)},b(k),{min:le.value,max:ie.value}),null,16,["modelValue","min","max"])]),_:1}),Le.value?(v(),E(M,{key:0,name:"Override?"},{description:f(()=>[z[11]||(z[11]=_(" Other note ",-1)),h("b",h1,P(Le.value?.path),1),z[12]||(z[12]=_(" is connected to this date. It will be disconnected if override option is on. ",-1))]),default:f(()=>[c(He,De({modelValue:b(y),"onUpdate:modelValue":z[3]||(z[3]=oe=>ce(y)?y.value=oe:null)},b(x)),null,16,["modelValue"])]),_:1})):R("",!0),tt.value?(v(),E(M,{key:1,name:"Rename?"},{description:f(()=>[z[13]||(z[13]=_(" Note name ",-1)),h("b",g1,P(l.value),1),z[14]||(z[14]=_(" differs from journal note name config: ",-1)),h("b",y1,P(Te.value?.[1]??""),1)]),default:f(()=>[c(He,De({modelValue:b(A),"onUpdate:modelValue":z[4]||(z[4]=oe=>ce(A)?A.value=oe:null)},b(T)),null,16,["modelValue"])]),_:1})):R("",!0),vt.value?(v(),E(M,{key:2,name:"Move?"},{description:f(()=>[z[15]||(z[15]=_(" Note folder ",-1)),h("b",w1,P(s.value),1),z[16]||(z[16]=_(" differs from journal folder path config: ",-1)),h("b",b1,P(Te.value?.[0]??""),1)]),default:f(()=>[c(He,De({modelValue:b(Z),"onUpdate:modelValue":z[5]||(z[5]=oe=>ce(Z)?Z.value=oe:null)},b(O)),null,16,["modelValue"])]),_:1})):R("",!0)],64)):R("",!0),c(M,null,{default:f(()=>[c(ue,{onClick:z[6]||(z[6]=oe=>ne.$emit("close"))},{default:f(()=>[...z[17]||(z[17]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",type:"submit",disabled:!nt.value},{default:f(()=>[...z[18]||(z[18]=[_("Connect",-1)])]),_:1},8,["disabled"])]),_:1})],32)]))}}),_1="All journals";class C1 extends X.SuggestModal{constructor(t,n,o){super(t),this.shelves=n,this.callback=o}getSuggestions(t){return t=t.toLocaleLowerCase(),["All journals",...this.shelves.filter(n=>n.toLocaleLowerCase().contains(t))]}renderSuggestion(t,n){n.setText(t)}onChooseSuggestion(t){this.callback(t===_1?null:t)}}class S1 extends X.MarkdownRenderChild{constructor(t,n,o,a){super(n),this.source=o,this.context=a,this.init(t)}_vueApp;init(t){const n=this.#e();this._vueApp=fo(Wr,{path:this.context.sourcePath,config:n}),this._vueApp.provide(Wn,t),this._vueApp.mount(this.containerEl)}#e(){try{const t=this.source?X.parseYaml(this.source.replaceAll("	","  ")):{show:["day"]};return{show:t.show.filter(n=>["day","week","month","quarter","year","custom"].includes(n)),separator:t.separator||" • ",scale:t.scale||1,shelf:t.shelf}}catch(t){return console.error(t),{show:["day"],separator:" • ",scale:1}}}onunload(){this._vueApp?.unmount(),this._vueApp=void 0,this.containerEl.empty()}}function x1(e){e.commands||(e.commands=jt(wl.commands));for(const t of Object.values(e.shelves))t.commands||(t.commands=[]);return e.dismissedNotifications||(e.dismissedNotifications=[]),e.version=3,e}function D1(e){let t=!1,n=e;return"version"in n||(n=Sm(n),t=!0),n.version===2&&(n=x1(n)),{migratedData:n,needsUser:t}}const V1=I({__name:"ConfirmNoteCreation.modal",props:{noteName:{},journalName:{}},emits:["confirm","close"],setup(e){return(t,n)=>(v(),C(W,null,[c(M,{name:"Journal"},{default:f(()=>[_(P(t.journalName),1)]),_:1}),c(M,{name:"Note"},{default:f(()=>[_(P(t.noteName),1)]),_:1}),c(M,null,{default:f(()=>[c(ue,{onClick:n[0]||(n[0]=o=>t.$emit("confirm",!1))},{default:f(()=>[...n[2]||(n[2]=[_("Cancel",-1)])]),_:1}),c(ue,{cta:"",onClick:n[1]||(n[1]=o=>t.$emit("confirm",!0))},{default:f(()=>[...n[3]||(n[3]=[_("Create",-1)])]),_:1})]),_:1})],64))}});class j1{constructor(t){this.plugin=t,this.app=t.app}app;normalizePath(t){return X.normalizePath(t)}nodeExists(t){return!!this.app.vault.getAbstractFileByPath(t)}getNoteName(t){const n=this.app.vault.getAbstractFileByPath(t);return n?n instanceof X.TFile?n.basename:n.name:""}getNoteFilename(t){return this.app.vault.getAbstractFileByPath(t)?.name??""}getNoteFolder(t){return this.app.vault.getAbstractFileByPath(t)?.parent?.path??""}async confirmNoteCreation(t,n){return new Promise(o=>{const a=new Ne(this.plugin,"About to create a new note",V1,{journalName:t,noteName:n,onConfirm(r){a.close(),o(r)},onClose(){a.close(),o(!1)}},400);a.open()})}async createNote(t,n){await this.#e(t),await this.app.vault.create(t,n)}async updateNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&await this.app.vault.modify(o,n)}async appendNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&await this.app.vault.append(o,n)}async renameNote(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&(await this.#e(n),await this.app.vault.rename(o,n))}getMarkdownFiles(){return this.app.vault.getMarkdownFiles()}getNotesInFolder(t){const n=this.app.vault.getFolderByPath(t||"/");if(!n)throw new Error(`Folder ${t} not found`);const o=[],a=[n];for(;a.length>0;){const r=a.shift();if(!r)break;for(const l of r.children)l instanceof X.TFile?o.push(l.path):l instanceof X.TFolder&&a.push(l)}return o}getNoteMetadata(t){return this.app.metadataCache.getCache(t)}async openNote(t,n){const o=this.findOpenedNote(t);if(o)return this.app.workspace.setActiveLeaf(o,{focus:!0});const a=this.app.vault.getAbstractFileByPath(t);if(!a||!(a instanceof X.TFile))return;await this.app.workspace.getLeaf(n).openFile(a,{active:!0})}findOpenedNote(t){for(const n of this.app.workspace.getLeavesOfType("markdown")){const{file:o}=n.view;if(o&&o.path===t)return n}return null}async getNoteContent(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof X.TFile)?"":this.app.vault.read(n)}async updateNoteFrontmatter(t,n){const o=this.app.vault.getAbstractFileByPath(t);o&&o instanceof X.TFile&&await this.app.fileManager.processFrontMatter(o,a=>{n(a)})}async deleteNote(t){const n=this.app.vault.getAbstractFileByPath(t);n&&n instanceof X.TFile&&await this.app.vault.delete(n)}async tryApplyingTemplater(t,n,o){const a=this.app.vault.getAbstractFileByPath(t);if(!a||!(a instanceof X.TFile))return o;const r=this.app.vault.getAbstractFileByPath(n);return!r||!(r instanceof X.TFile)?o:gh(this.app,a,r,o)}async tryTemplaterCursorJump(t){const n=this.app.vault.getAbstractFileByPath(t);return!n||!(n instanceof X.TFile)?!1:await hh(this.app,n)}async#e(t){if(!t)return;const n=t.split("/");if(t.endsWith(".md")&&n.pop(),n.length>0){const o=n.join("/");this.app.vault.getAbstractFileByPath(o)||await this.app.vault.createFolder(o)}}}class $1{constructor(t){this.plugin=t}#e=new Map;addCommand(t,n,o){this.plugin.addCommand({id:this.#n(t+":"+n.name),name:t?`${t}: ${n.name}`:n.name,icon:n.icon,checkCallback:o})}removeCommand(t,n){this.plugin.removeCommand(this.#n(t+":"+n.name))}addRibbonIcon(t,n,o,a){const r=this.#n("journals:"+t+":"+o),l=this.plugin.app.workspace.leftRibbon.addRibbonItemButton(r,n,o,a);return this.#e.set(r,l),r}removeRibbonIcon(t,n){const o=this.#n("journals:"+t+":"+n);return this.plugin.app.workspace.leftRibbon.removeRibbonAction(o),this.#e.get(o)?.detach(),this.#e.delete(o),o}showContextMenu(t,n){const o=this.plugin.app.vault.getAbstractFileByPath(t);if(o){const a=new X.Menu;this.plugin.app.workspace.trigger("file-menu",a,o,"file-explorer-context-menu",null),a.addItem(r=>r.setTitle("Delete").setIcon("trash").onClick(()=>{this.plugin.app.fileManager.promptForFileDeletion(o)})),a.showAtMouseEvent(n)}}showPreview(t,n){this.plugin.app.workspace.trigger("link-hover",this.plugin,n.target,t,t)}#n(t){return t.replaceAll(/\s/gi,"-").toLocaleLowerCase()}dispose(){for(const t of this.#e.values())t.detach();this.#e.clear()}}class M1 extends X.Plugin{#e=[];#n=co({});#o=new Zy;#a=fe(null);#t=fe(jt(wl));#r;#l=new j1(this);#i=new $1(this);#s=!1;get hasMigrations(){return this.#t.value.pendingMigrations.length>0}get dismissedNotifications(){return this.#t.value.dismissedNotifications}dismissNotification(t){this.#t.value.dismissedNotifications.push(t)}get notesManager(){return this.#l}get appManager(){return this.#i}get showReloadHint(){return this.#t.value.showReloadHint}get index(){return this.#o}get activeNote(){return this.#a.value}get usesShelves(){return this.#t.value.useShelves}set usesShelves(t){this.#t.value.useShelves=t}get openOnStartup(){return this.#t.value.openOnStartup}set openOnStartup(t){this.#t.value.openOnStartup=t}get calendarSettings(){return this.#t.value.calendar}get calendarViewSettings(){return this.#t.value.calendarView}get uiSettings(){return this.#t.value.ui}get pendingMigrations(){return this.#t.value.pendingMigrations}get shelves(){return Object.values(this.#t.value.shelves).sort((t,n)=>t.name.localeCompare(n.name))}get commands(){return this.#t.value.commands}getShelf(t){return this.#t.value.shelves[t]}get journals(){return Object.values(this.#n.value).sort((t,n)=>t.name.localeCompare(n.name))}hasJournal(t){return t in this.#n.value}getJournal(t){return this.#n.value[t]}getJournalConfig(t){return this.#t.value.journals[t]}createJournal(t,n){const o=jt({...bl,...kl(n),name:t,write:n});return this.#t.value.journals[t]=o,this.#n.value={...this.#n.value,[t]:new ma(t,w(()=>this.#t.value.journals[t]),this.#o,this.#i,this.#l,this.#a)},this.getJournal(t)?.autoCreate().catch(console.error),this.#t.value.journals[t]}registerJournal(t){if(t.name in this.#t.value.journals)throw new Error("Name already used");this.#t.value.journals[t.name]=t;const n=new ma(t.name,w(()=>this.#t.value.journals[t.name]),this.#o,this.#i,this.#l,this.#a);if(this.#n.value={...this.#n.value,[t.name]:n},t.shelves.length>0)for(const o of t.shelves)this.#t.value.shelves[o]?.journals.push(t.name);return n}async renameJournal(t,n){const o=this.getJournal(t);if(!o)return;o.dispose();const a=this.#t.value.journals[t];if(!a)return;this.#t.value.journals[n]=a,this.#t.value.journals[n].name=n,delete this.#t.value.journals[t];for(const u of this.#t.value.journals[n]?.shelves??[]){const d=this.#t.value.shelves[u];d&&(d.journals=d.journals.map(m=>m===t?n:m))}const{[t]:r,...l}=this.#n.value,s=new ma(n,w(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#a);this.#n.value={...l,[n]:s},s.registerCommands(),this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup=n);const i=this.#o.getJournalIndex(t);if(i)for(const[,u]of i)await this.#l.updateNoteFrontmatter(u,d=>{d[mt]=n})}async removeJournal(t,n){const o=this.getJournal(t);if(!o)return;switch(n){case"clear":{await o.clearNotes();break}case"delete":{await o.deleteNotes();break}}o.dispose();const{[t]:a,...r}=this.#n.value;this.#n.value=r;for(const l of this.#t.value.journals[t]?.shelves??[])this.#t.value.shelves[l]&&(this.#t.value.shelves[l].journals=this.#t.value.shelves[l].journals.filter(s=>s!==t));delete this.#t.value.journals[t],this.#t.value.openOnStartup===t&&(this.#t.value.openOnStartup="")}getShelfJournals(t){return this.journals.filter(n=>n.shelfName===t)}moveJournal(t,n){const o=this.getJournal(t);if(!o)return;const a=o.shelfName;a&&this.#t.value.shelves[a]&&(this.#t.value.shelves[a].journals=this.#t.value.shelves[a].journals.filter(r=>r!==t)),n?(this.#t.value.shelves[n]?.journals.push(t),this.#t.value.journals[t]&&(this.#t.value.journals[t].shelves=[n])):this.#t.value.journals[t]&&(this.#t.value.journals[t].shelves=[])}requestReloadHint(){this.#t.value.showReloadHint=!0}placeCalendarView(t=!1){if(this.app.workspace.getLeavesOfType(fn).length>0){if(!t)return;for(const n of this.app.workspace.getLeavesOfType(fn))n.detach()}this.#t.value.calendarView.leaf==="left"?this.app.workspace.getLeftLeaf(!1)?.setViewState({type:fn}).catch(console.error):this.app.workspace.getRightLeaf(!1)?.setViewState({type:fn}).catch(console.error)}hasShelf(t){return t in this.#t.value.shelves}createShelf(t){this.#t.value.shelves[t]={name:t,journals:[],commands:[]}}renameShelf(t,n){const o=this.#t.value.shelves[t];if(o){this.#t.value.shelves[n]=o,this.#t.value.shelves[n].name=n;for(const a of this.#t.value.shelves[n].journals)this.#t.value.journals[a]&&(this.#t.value.journals[a].shelves=this.#t.value.journals[a].shelves.map(r=>r===t?n:r));delete this.#t.value.shelves[t]}}removeShelf(t,n){for(const o of this.#t.value.shelves[t]?.journals??[])this.#t.value.journals[o]&&(this.#t.value.journals[o].shelves=n?this.#t.value.journals[o].shelves.map(a=>a===t?n:a):this.#t.value.journals[o].shelves.filter(a=>a!==t));delete this.#t.value.shelves[t]}async onload(){const t=!this.app.workspace.layoutReady;await this.#c(),Qc(),this.#t.value.calendar.dow===-1?Ta(this.#t.value.calendar.global):Aa(this.#t.value.calendar.dow,this.#t.value.calendar.doy,this.#t.value.calendar.global),this.#m(),this.#d(),this.#t.value.showReloadHint&&(this.#t.value.showReloadHint=!1),this.#v(),this.addSettingTab(new Qy(this.app,this)),this.registerMarkdownCodeBlockProcessor("calendar-timeline",(n,o,a)=>{const r=new c1(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("calendar-nav",(n,o,a)=>{const r=new $r(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("interval-nav",(n,o,a)=>{const r=new $r(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("journal-nav",(n,o,a)=>{const r=new $r(this,o,n,a.sourcePath);a.addChild(r)}),this.registerMarkdownCodeBlockProcessor("journals-home",(n,o,a)=>{const r=new S1(this,o,n,a);a.addChild(r)}),this.registerView(fn,n=>new d1(n,this)),this.app.workspace.onLayoutReady(async()=>{this.reprocessNotes(),this.placeCalendarView(),this.#a.value=this.app.workspace.getActiveFile()?.path??null,await this.autoCreateNotes(),t&&await this.openStartupNote(),this.#s&&(this.#u(),this.#s=!1)})}onunload(){clearTimeout(this.#r);for(const t of this.#e)t();for(const t of this.app.workspace.getLeavesOfType(fn))t.detach();for(const t of this.journals)t.dispose()}reprocessNotes(){const t=this.#l.getMarkdownFiles();for(const n of t)this.#f(n)}async autoCreateNotes(){for(const t of Object.values(this.#n.value))await t.autoCreate();this.#p()}async openStartupNote(){const t=this.#t.value.openOnStartup;t&&this.getJournal(t)&&await On(this,Oe().format(_e),t)}async disconnectNote(t){const n=this.#l.getNoteMetadata(t);if(!n)return;const{frontmatter:o}=n;if(!o)return;const a=o[mt];if(!a)return;const r=this.getJournal(a);if(r)await r.disconnectNote(t);else return this.#l.updateNoteFrontmatter(t,l=>{delete l[mt],delete l[Xa],delete l[an],delete l[wn],delete l[Za]})}#p(){clearTimeout(this.#r),this.#r=setTimeout(()=>{this.autoCreateNotes().catch(console.error)},hf)}async#c(){const t=await this.loadData();if(t)if((t.version??1)===ru)this.#t.value=t;else{const{migratedData:o,needsUser:a}=D1(t);this.#t.value=o,await this.saveData(o).catch(console.error),this.#s=a}}#u(){new Ne(this,"Migrate Journals plugin data to v2",du).open()}#m(){const t={};for(const n of Object.keys(this.#t.value.journals))t[n]=new ma(n,w(()=>this.#t.value.journals[n]),this.#o,this.#i,this.#l,this.#a);this.#n.value=t}#d(){this.#e.push(lt(this.#t,qc(t=>{this.saveData(t).catch(console.error)},50),{deep:!0}),lt(()=>this.#t.value.calendarView.leaf,()=>{this.placeCalendarView(!0)})),this.registerEvent(this.app.workspace.on("file-open",t=>{this.#a.value=t?.path??null})),this.registerEvent(this.app.vault.on("rename",(t,n)=>{t instanceof X.TFile&&this.index.transferPathData(n,t.path,t.basename)})),this.registerEvent(this.app.vault.on("delete",t=>{t instanceof X.TFile&&this.index.clearForPath(t.path)})),this.registerEvent(this.app.metadataCache.on("changed",t=>{this.#f(t)}))}#f(t){const n=this.#l.getNoteMetadata(t.path);if(!n)return;const{frontmatter:o}=n;if(!o||!(mt in o))return;const a=o[mt],r=this.getJournal(a);r&&this.index.updateFromMetadata(r,t.basename,t.path,n)}#v(){this.addCommand({id:"open-next",name:"Open next note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const a=this.#o.getForPath(o.path);if(!a){new X.Notice("This note is not connected to any journal.");return}const r=this.getJournal(a.journal);if(!r){new X.Notice("Unknown journal.");return}const l=r.next(a.date,!0);if(!l){new X.Notice("There is no next note after this one.");return}await r.open(l)}}),this.addCommand({id:"open-prev",name:"Open previous note",editorCallback:async(t,n)=>{const o=n.file;if(!o)return;const a=this.#o.getForPath(o.path);if(!a){new X.Notice("This note is not connected to any journal.");return}const r=this.getJournal(a.journal);if(!r){new X.Notice("Unknown journal.");return}const l=r.previous(a.date,!0);if(!l){new X.Notice("There is no previous note before this one.");return}await r.open(l)}}),this.addCommand({id:"connect-note",name:"Connect note to a journal",editorCallback:(t,n)=>{const o=n.file;o&&new Ne(this,"Connect note to a journal",k1,{path:o.path}).open()}}),this.addCommand({id:"open-calendar",name:"Open calendar",callback:()=>{let[t]=this.app.workspace.getLeavesOfType(fn);t||(this.placeCalendarView(),t=this.app.workspace.getLeavesOfType(fn)[0]),t&&this.app.workspace.revealLeaf(t).catch(console.error)}});for(const t of Object.values(this.#n.value))t.registerCommands();for(const t of this.commands)so(this,t,"",()=>this.journals.filter(n=>n.type===t.writeType));for(const t of this.shelves)for(const n of t.commands)so(this,n,`Shelf: ${t.name}`,()=>this.getShelfJournals(t.name).filter(o=>o.type===n.writeType));this.addCommand({id:"change-calendar-shelf",name:"Change calendar view shelf",checkCallback:t=>t?this.#t.value.useShelves&&Object.values(this.#t.value.shelves).length>0:(new C1(this.app,Object.keys(this.#t.value.shelves),n=>{this.#t.value.ui.calendarShelf=n}).open(),!0)})}}exports.default=M1;

/* nosourcemap */